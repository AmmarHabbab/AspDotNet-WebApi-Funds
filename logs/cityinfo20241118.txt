2024-11-18 00:56:51.675 +03:00 [INF] Application is shutting down...
2024-11-18 00:56:51.677 +03:00 [DBG] Hosting stopping
2024-11-18 00:56:51.687 +03:00 [DBG] Hosting stopped
2024-11-18 00:57:07.498 +03:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2024-11-18 00:57:07.792 +03:00 [DBG] Hosting starting
2024-11-18 00:57:07.914 +03:00 [INF] User profile is available. Using 'C:\Users\DaRK1AnGE1-\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-11-18 00:57:07.939 +03:00 [DBG] Reading data from file 'C:\Users\DaRK1AnGE1-\AppData\Local\ASP.NET\DataProtection-Keys\key-7aaf1ab6-3338-4bbe-824d-412c9ce49ea3.xml'.
2024-11-18 00:57:07.998 +03:00 [DBG] Found key {7aaf1ab6-3338-4bbe-824d-412c9ce49ea3}.
2024-11-18 00:57:08.118 +03:00 [DBG] Considering key {7aaf1ab6-3338-4bbe-824d-412c9ce49ea3} with expiration date 2025-02-15 20:08:59Z as default key.
2024-11-18 00:57:08.192 +03:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-11-18 00:57:08.284 +03:00 [DBG] Decrypting secret element using Windows DPAPI.
2024-11-18 00:57:08.333 +03:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-11-18 00:57:08.353 +03:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2024-11-18 00:57:08.367 +03:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2024-11-18 00:57:08.409 +03:00 [DBG] Using key {7aaf1ab6-3338-4bbe-824d-412c9ce49ea3} as the default key.
2024-11-18 00:57:08.422 +03:00 [DBG] Key ring with default key {7aaf1ab6-3338-4bbe-824d-412c9ce49ea3} was loaded during application startup.
2024-11-18 00:57:08.775 +03:00 [DBG] Using development certificate: CN=localhost (Thumbprint: 9E758B43FC1DB07235D03E669781821F9B436A79)
2024-11-18 00:57:08.853 +03:00 [INF] Now listening on: https://localhost:7117
2024-11-18 00:57:08.863 +03:00 [INF] Now listening on: http://localhost:5211
2024-11-18 00:57:08.867 +03:00 [DBG] Loaded hosting startup assembly WebApi1
2024-11-18 00:57:08.869 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-11-18 00:57:08.871 +03:00 [INF] Hosting environment: Development
2024-11-18 00:57:08.873 +03:00 [INF] Content root path: E:\Asp\WebApi1\
2024-11-18 00:57:08.875 +03:00 [DBG] Hosting started
2024-11-18 00:57:40.170 +03:00 [DBG] Connection id "0HN87ABDI65UU" received FIN.
2024-11-18 00:57:40.181 +03:00 [DBG] Connection id "0HN87ABDI65UU" accepted.
2024-11-18 00:57:40.183 +03:00 [DBG] Connection id "0HN87ABDI65UU" started.
2024-11-18 00:57:40.185 +03:00 [DBG] Connection id "0HN87ABDI65UV" accepted.
2024-11-18 00:57:40.187 +03:00 [DBG] Connection id "0HN87ABDI65UV" started.
2024-11-18 00:57:40.203 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2024-11-18 00:57:40.241 +03:00 [DBG] Connection id "0HN87ABDI65UU" stopped.
2024-11-18 00:57:40.249 +03:00 [DBG] Connection id "0HN87ABDI65UU" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-11-18 00:57:40.285 +03:00 [DBG] Connection 0HN87ABDI65UV established using the following protocol: "Tls12"
2024-11-18 00:57:40.350 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7117/api/cities - -
2024-11-18 00:57:40.352 +03:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2024-11-18 00:57:40.413 +03:00 [DBG] The request path  does not match the path filter
2024-11-18 00:57:40.457 +03:00 [DBG] 1 candidate(s) found for the request path '/api/cities'
2024-11-18 00:57:40.469 +03:00 [DBG] Endpoint 'WebApi1.Controllers.CitiesController.GetCities (WebApi1)' with route pattern 'api/cities' is valid for the request path '/api/cities'
2024-11-18 00:57:40.472 +03:00 [DBG] Request matched endpoint 'WebApi1.Controllers.CitiesController.GetCities (WebApi1)'
2024-11-18 00:57:40.703 +03:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo: 'System.DateTime', Current time: 'System.DateTime'.
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2024-11-18 00:57:40.714 +03:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo: 'System.DateTime', Current time: 'System.DateTime'.
2024-11-18 00:57:40.724 +03:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2024-11-18 00:57:40.741 +03:00 [INF] AuthenticationScheme: Bearer was challenged.
2024-11-18 00:57:40.750 +03:00 [DBG] Connection id "0HN87ABDI65UV" completed keep alive response.
2024-11-18 00:57:40.757 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7117/api/cities - - - 401 0 - 416.2238ms
2024-11-18 00:57:50.256 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7117/api/authentication/authenticate application/json 114
2024-11-18 00:57:50.259 +03:00 [DBG] POST requests are not supported
2024-11-18 00:57:50.264 +03:00 [DBG] 1 candidate(s) found for the request path '/api/authentication/authenticate'
2024-11-18 00:57:50.266 +03:00 [DBG] Endpoint 'WebApi1.Controllers.AuthenticationController.Authenticate (WebApi1)' with route pattern 'api/authentication/authenticate' is valid for the request path '/api/authentication/authenticate'
2024-11-18 00:57:50.269 +03:00 [DBG] Request matched endpoint 'WebApi1.Controllers.AuthenticationController.Authenticate (WebApi1)'
2024-11-18 00:57:50.273 +03:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-18 00:57:50.278 +03:00 [INF] Executing endpoint 'WebApi1.Controllers.AuthenticationController.Authenticate (WebApi1)'
2024-11-18 00:57:50.333 +03:00 [INF] Route matched with {action = "Authenticate", controller = "Authentication"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.ActionResult`1[System.String] Authenticate(AuthenticationRequestBody) on controller WebApi1.Controllers.AuthenticationController (WebApi1).
2024-11-18 00:57:50.338 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-18 00:57:50.341 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-18 00:57:50.348 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-11-18 00:57:50.351 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-18 00:57:50.353 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-11-18 00:57:50.358 +03:00 [DBG] Executing controller factory for controller WebApi1.Controllers.AuthenticationController (WebApi1)
2024-11-18 00:57:50.362 +03:00 [DBG] Executed controller factory for controller WebApi1.Controllers.AuthenticationController (WebApi1)
2024-11-18 00:57:50.368 +03:00 [DBG] Attempting to bind parameter 'authenticationRequestBody' of type 'WebApi1.Controllers.AuthenticationController+AuthenticationRequestBody' ...
2024-11-18 00:57:50.372 +03:00 [DBG] Attempting to bind parameter 'authenticationRequestBody' of type 'WebApi1.Controllers.AuthenticationController+AuthenticationRequestBody' using the name '' in request data ...
2024-11-18 00:57:50.379 +03:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonPatchInputFormatter' for content type 'application/json'.
2024-11-18 00:57:50.381 +03:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonInputFormatter' for content type 'application/json'.
2024-11-18 00:57:50.390 +03:00 [DBG] Connection id "0HN87ABDI65UV", Request id "0HN87ABDI65UV:00000003": started reading request body.
2024-11-18 00:57:50.396 +03:00 [DBG] Connection id "0HN87ABDI65UV", Request id "0HN87ABDI65UV:00000003": done reading request body.
2024-11-18 00:57:50.578 +03:00 [DBG] Done attempting to bind parameter 'authenticationRequestBody' of type 'WebApi1.Controllers.AuthenticationController+AuthenticationRequestBody'.
2024-11-18 00:57:50.581 +03:00 [DBG] Done attempting to bind parameter 'authenticationRequestBody' of type 'WebApi1.Controllers.AuthenticationController+AuthenticationRequestBody'.
2024-11-18 00:57:50.583 +03:00 [DBG] Attempting to validate the bound parameter 'authenticationRequestBody' of type 'WebApi1.Controllers.AuthenticationController+AuthenticationRequestBody' ...
2024-11-18 00:57:50.601 +03:00 [DBG] Done attempting to validate the bound parameter 'authenticationRequestBody' of type 'WebApi1.Controllers.AuthenticationController+AuthenticationRequestBody'.
2024-11-18 00:57:50.740 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-18 00:57:50.748 +03:00 [DBG] No information found on request to perform content negotiation.
2024-11-18 00:57:50.749 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-18 00:57:50.750 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-18 00:57:50.752 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter' and content type 'text/plain' to write the response.
2024-11-18 00:57:50.755 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.String'.
2024-11-18 00:57:50.773 +03:00 [INF] Executed action WebApi1.Controllers.AuthenticationController.Authenticate (WebApi1) in 401.2926ms
2024-11-18 00:57:50.779 +03:00 [INF] Executed endpoint 'WebApi1.Controllers.AuthenticationController.Authenticate (WebApi1)'
2024-11-18 00:57:50.782 +03:00 [DBG] Connection id "0HN87ABDI65UV" completed keep alive response.
2024-11-18 00:57:50.784 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7117/api/authentication/authenticate application/json 114 - 200 - text/plain;+charset=utf-8 527.3337ms
2024-11-18 00:57:58.201 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7117/api/cities - -
2024-11-18 00:57:58.204 +03:00 [DBG] The request path  does not match the path filter
2024-11-18 00:57:58.205 +03:00 [DBG] 1 candidate(s) found for the request path '/api/cities'
2024-11-18 00:57:58.207 +03:00 [DBG] Endpoint 'WebApi1.Controllers.CitiesController.GetCities (WebApi1)' with route pattern 'api/cities' is valid for the request path '/api/cities'
2024-11-18 00:57:58.212 +03:00 [DBG] Request matched endpoint 'WebApi1.Controllers.CitiesController.GetCities (WebApi1)'
2024-11-18 00:57:58.214 +03:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo: 'System.DateTime', Current time: 'System.DateTime'.
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2024-11-18 00:57:58.220 +03:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo: 'System.DateTime', Current time: 'System.DateTime'.
2024-11-18 00:57:58.223 +03:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2024-11-18 00:57:58.230 +03:00 [INF] AuthenticationScheme: Bearer was challenged.
2024-11-18 00:57:58.232 +03:00 [DBG] Connection id "0HN87ABDI65UV" completed keep alive response.
2024-11-18 00:57:58.234 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7117/api/cities - - - 401 0 - 32.7086ms
2024-11-18 00:58:07.264 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7117/api/cities - -
2024-11-18 00:58:07.265 +03:00 [DBG] The request path  does not match the path filter
2024-11-18 00:58:07.267 +03:00 [DBG] 1 candidate(s) found for the request path '/api/cities'
2024-11-18 00:58:07.268 +03:00 [DBG] Endpoint 'WebApi1.Controllers.CitiesController.GetCities (WebApi1)' with route pattern 'api/cities' is valid for the request path '/api/cities'
2024-11-18 00:58:07.270 +03:00 [DBG] Request matched endpoint 'WebApi1.Controllers.CitiesController.GetCities (WebApi1)'
2024-11-18 00:58:07.299 +03:00 [DBG] Successfully validated the token.
2024-11-18 00:58:07.302 +03:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2024-11-18 00:58:07.305 +03:00 [DBG] Authorization was successful.
2024-11-18 00:58:07.310 +03:00 [INF] Executing endpoint 'WebApi1.Controllers.CitiesController.GetCities (WebApi1)'
2024-11-18 00:58:07.333 +03:00 [INF] Route matched with {action = "GetCities", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[WebApi1.Models.CityWithoutPointOfInterestDto]]] GetCities(System.String, System.String, Int32, Int32) on controller WebApi1.Controllers.CitiesController (WebApi1).
2024-11-18 00:58:07.337 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-18 00:58:07.339 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-18 00:58:07.341 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-11-18 00:58:07.346 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-18 00:58:07.348 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-11-18 00:58:07.350 +03:00 [DBG] Executing controller factory for controller WebApi1.Controllers.CitiesController (WebApi1)
2024-11-18 00:58:07.518 +03:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2024-11-18 00:58:07.849 +03:00 [DBG] Executed controller factory for controller WebApi1.Controllers.CitiesController (WebApi1)
2024-11-18 00:58:07.852 +03:00 [DBG] Attempting to bind parameter 'name' of type 'System.String' ...
2024-11-18 00:58:07.854 +03:00 [DBG] Attempting to bind parameter 'name' of type 'System.String' using the name '' in request data ...
2024-11-18 00:58:07.859 +03:00 [DBG] Could not find a value in the request with name '' for binding parameter 'name' of type 'System.String'.
2024-11-18 00:58:07.862 +03:00 [DBG] Done attempting to bind parameter 'name' of type 'System.String'.
2024-11-18 00:58:07.863 +03:00 [DBG] Done attempting to bind parameter 'name' of type 'System.String'.
2024-11-18 00:58:07.865 +03:00 [DBG] Attempting to validate the bound parameter 'name' of type 'System.String' ...
2024-11-18 00:58:07.868 +03:00 [DBG] Done attempting to validate the bound parameter 'name' of type 'System.String'.
2024-11-18 00:58:07.872 +03:00 [DBG] Attempting to bind parameter 'searchQuery' of type 'System.String' ...
2024-11-18 00:58:07.878 +03:00 [DBG] Attempting to bind parameter 'searchQuery' of type 'System.String' using the name '' in request data ...
2024-11-18 00:58:07.882 +03:00 [DBG] Could not find a value in the request with name '' for binding parameter 'searchQuery' of type 'System.String'.
2024-11-18 00:58:07.884 +03:00 [DBG] Done attempting to bind parameter 'searchQuery' of type 'System.String'.
2024-11-18 00:58:07.885 +03:00 [DBG] Done attempting to bind parameter 'searchQuery' of type 'System.String'.
2024-11-18 00:58:07.887 +03:00 [DBG] Attempting to validate the bound parameter 'searchQuery' of type 'System.String' ...
2024-11-18 00:58:07.889 +03:00 [DBG] Done attempting to validate the bound parameter 'searchQuery' of type 'System.String'.
2024-11-18 00:58:07.891 +03:00 [DBG] Attempting to bind parameter 'pageNumber' of type 'System.Int32' ...
2024-11-18 00:58:07.896 +03:00 [DBG] Attempting to bind parameter 'pageNumber' of type 'System.Int32' using the name '' in request data ...
2024-11-18 00:58:07.900 +03:00 [DBG] Could not find a value in the request with name '' for binding parameter 'pageNumber' of type 'System.Int32'.
2024-11-18 00:58:07.902 +03:00 [DBG] Done attempting to bind parameter 'pageNumber' of type 'System.Int32'.
2024-11-18 00:58:07.904 +03:00 [DBG] Done attempting to bind parameter 'pageNumber' of type 'System.Int32'.
2024-11-18 00:58:07.906 +03:00 [DBG] Attempting to validate the bound parameter 'pageNumber' of type 'System.Int32' ...
2024-11-18 00:58:07.910 +03:00 [DBG] Done attempting to validate the bound parameter 'pageNumber' of type 'System.Int32'.
2024-11-18 00:58:07.913 +03:00 [DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' ...
2024-11-18 00:58:07.916 +03:00 [DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' using the name '' in request data ...
2024-11-18 00:58:07.918 +03:00 [DBG] Could not find a value in the request with name '' for binding parameter 'pageSize' of type 'System.Int32'.
2024-11-18 00:58:07.920 +03:00 [DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
2024-11-18 00:58:07.922 +03:00 [DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
2024-11-18 00:58:07.923 +03:00 [DBG] Attempting to validate the bound parameter 'pageSize' of type 'System.Int32' ...
2024-11-18 00:58:07.930 +03:00 [DBG] Done attempting to validate the bound parameter 'pageSize' of type 'System.Int32'.
2024-11-18 00:58:09.240 +03:00 [INF] Entity Framework Core 6.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.0' with options: None
2024-11-18 00:58:09.300 +03:00 [DBG] Compiling query expression: 
'DbSet<City>()
    .Count()'
2024-11-18 00:58:09.531 +03:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<int>(
    asyncEnumerable: new SingleQueryingEnumerable<int>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT COUNT(*)
            FROM Cities AS c), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, int>, 
        WebApi1.DbContexts.CityInfoContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2024-11-18 00:58:09.596 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-18 00:58:09.651 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (52ms).
2024-11-18 00:58:09.665 +03:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2024-11-18 00:58:09.692 +03:00 [DBG] Opened connection to database 'main' on server 'E:\Asp\WebApi1\CityInfo.db'.
2024-11-18 00:58:09.708 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "Cities" AS "c"
2024-11-18 00:58:09.750 +03:00 [INF] Executed DbCommand (37ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "Cities" AS "c"
2024-11-18 00:58:09.770 +03:00 [DBG] A data reader was disposed.
2024-11-18 00:58:09.778 +03:00 [DBG] Closing connection to database 'main' on server 'E:\Asp\WebApi1\CityInfo.db'.
2024-11-18 00:58:09.786 +03:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db'.
2024-11-18 00:58:09.804 +03:00 [DBG] Compiling query expression: 
'DbSet<City>()
    .OrderBy(c => c.Name)
    .Skip(__p_0)
    .Take(__p_1)'
2024-11-18 00:58:09.879 +03:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<City>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: City.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: City.Description (string) MaxLength(200), 1], [Property: City.Name (string) Required MaxLength(50), 2] }
        SELECT c.Id, c.Description, c.Name
        FROM Cities AS c
        ORDER BY c.Name ASC
        OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, City>, 
    WebApi1.DbContexts.CityInfoContext, 
    False, 
    False, 
    True
)'
2024-11-18 00:58:09.895 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-18 00:58:09.898 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2024-11-18 00:58:09.902 +03:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2024-11-18 00:58:09.904 +03:00 [DBG] Opened connection to database 'main' on server 'E:\Asp\WebApi1\CityInfo.db'.
2024-11-18 00:58:09.919 +03:00 [DBG] Executing DbCommand [Parameters=[@__p_1='?' (DbType = Int32), @__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Name"
FROM "Cities" AS "c"
ORDER BY "c"."Name"
LIMIT @__p_1 OFFSET @__p_0
2024-11-18 00:58:09.932 +03:00 [INF] Executed DbCommand (25ms) [Parameters=[@__p_1='?' (DbType = Int32), @__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Name"
FROM "Cities" AS "c"
ORDER BY "c"."Name"
LIMIT @__p_1 OFFSET @__p_0
2024-11-18 00:58:09.960 +03:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-11-18 00:58:10.012 +03:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-11-18 00:58:10.015 +03:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-11-18 00:58:10.017 +03:00 [DBG] A data reader was disposed.
2024-11-18 00:58:10.018 +03:00 [DBG] Closing connection to database 'main' on server 'E:\Asp\WebApi1\CityInfo.db'.
2024-11-18 00:58:10.020 +03:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db'.
2024-11-18 00:58:10.078 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-18 00:58:10.086 +03:00 [DBG] No information found on request to perform content negotiation.
2024-11-18 00:58:10.089 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-18 00:58:10.139 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-18 00:58:10.394 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-18 00:58:10.401 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[WebApi1.Models.CityWithoutPointOfInterestDto, WebApi1, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-18 00:58:10.516 +03:00 [INF] Executed action WebApi1.Controllers.CitiesController.GetCities (WebApi1) in 3165.2534ms
2024-11-18 00:58:10.523 +03:00 [INF] Executed endpoint 'WebApi1.Controllers.CitiesController.GetCities (WebApi1)'
2024-11-18 00:58:10.529 +03:00 [DBG] Connection id "0HN87ABDI65UV" completed keep alive response.
2024-11-18 00:58:10.566 +03:00 [DBG] 'CityInfoContext' disposed.
2024-11-18 00:58:10.573 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7117/api/cities - - - 200 254 application/json;+charset=utf-8 3308.5737ms
2024-11-18 00:58:18.332 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7117/api/cities/1/pointsofinterest - -
2024-11-18 00:58:18.334 +03:00 [DBG] The request path  does not match the path filter
2024-11-18 00:58:18.336 +03:00 [DBG] 1 candidate(s) found for the request path '/api/cities/1/pointsofinterest'
2024-11-18 00:58:18.337 +03:00 [DBG] Endpoint 'WebApi1.Controllers.PointsOfInterestController.GetPointsOfInterest (WebApi1)' with route pattern 'api/cities/{cityId}/pointsofinterest' is valid for the request path '/api/cities/1/pointsofinterest'
2024-11-18 00:58:18.342 +03:00 [DBG] Request matched endpoint 'WebApi1.Controllers.PointsOfInterestController.GetPointsOfInterest (WebApi1)'
2024-11-18 00:58:18.344 +03:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-18 00:58:18.347 +03:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2024-11-18 00:58:18.349 +03:00 [INF] AuthenticationScheme: Bearer was challenged.
2024-11-18 00:58:18.350 +03:00 [DBG] Connection id "0HN87ABDI65UV" completed keep alive response.
2024-11-18 00:58:18.352 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7117/api/cities/1/pointsofinterest - - - 401 0 - 20.2057ms
2024-11-18 00:58:25.957 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7117/api/cities/1/pointsofinterest - -
2024-11-18 00:58:25.960 +03:00 [DBG] The request path  does not match the path filter
2024-11-18 00:58:25.962 +03:00 [DBG] 1 candidate(s) found for the request path '/api/cities/1/pointsofinterest'
2024-11-18 00:58:25.963 +03:00 [DBG] Endpoint 'WebApi1.Controllers.PointsOfInterestController.GetPointsOfInterest (WebApi1)' with route pattern 'api/cities/{cityId}/pointsofinterest' is valid for the request path '/api/cities/1/pointsofinterest'
2024-11-18 00:58:25.967 +03:00 [DBG] Request matched endpoint 'WebApi1.Controllers.PointsOfInterestController.GetPointsOfInterest (WebApi1)'
2024-11-18 00:58:25.969 +03:00 [DBG] Successfully validated the token.
2024-11-18 00:58:25.970 +03:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2024-11-18 00:58:25.972 +03:00 [DBG] Authorization was successful.
2024-11-18 00:58:25.977 +03:00 [INF] Executing endpoint 'WebApi1.Controllers.PointsOfInterestController.GetPointsOfInterest (WebApi1)'
2024-11-18 00:58:25.987 +03:00 [INF] Route matched with {action = "GetPointsOfInterest", controller = "PointsOfInterest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[WebApi1.Models.PointOfInterestDto]]] GetPointsOfInterest(Int32) on controller WebApi1.Controllers.PointsOfInterestController (WebApi1).
2024-11-18 00:58:25.993 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-18 00:58:25.996 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-18 00:58:25.998 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-11-18 00:58:26.002 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-18 00:58:26.005 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-11-18 00:58:26.011 +03:00 [DBG] Executing controller factory for controller WebApi1.Controllers.PointsOfInterestController (WebApi1)
2024-11-18 00:58:26.028 +03:00 [DBG] Executed controller factory for controller WebApi1.Controllers.PointsOfInterestController (WebApi1)
2024-11-18 00:58:26.031 +03:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2024-11-18 00:58:26.034 +03:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2024-11-18 00:58:26.036 +03:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2024-11-18 00:58:26.038 +03:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2024-11-18 00:58:26.043 +03:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2024-11-18 00:58:26.046 +03:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2024-11-18 00:58:26.054 +03:00 [INF] Entity Framework Core 6.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.0' with options: None
2024-11-18 00:58:26.068 +03:00 [DBG] Compiling query expression: 
'DbSet<City>()
    .Any(c => c.Id == __cityId_0 && c.Name == __cityName_1)'
2024-11-18 00:58:26.109 +03:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<bool>(
    asyncEnumerable: new SingleQueryingEnumerable<bool>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT EXISTS (
                SELECT 1
                FROM Cities AS c
                WHERE (c.Id == @__cityId_0) && (c.Name == @__cityName_1))), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, bool>, 
        WebApi1.DbContexts.CityInfoContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2024-11-18 00:58:26.136 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-18 00:58:26.138 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2024-11-18 00:58:26.143 +03:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2024-11-18 00:58:26.146 +03:00 [DBG] Opened connection to database 'main' on server 'E:\Asp\WebApi1\CityInfo.db'.
2024-11-18 00:58:26.148 +03:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32), @__cityName_1='?' (Size = 8)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE ("c"."Id" = @__cityId_0) AND ("c"."Name" = @__cityName_1))
2024-11-18 00:58:26.153 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@__cityId_0='?' (DbType = Int32), @__cityName_1='?' (Size = 8)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE ("c"."Id" = @__cityId_0) AND ("c"."Name" = @__cityName_1))
2024-11-18 00:58:26.158 +03:00 [DBG] A data reader was disposed.
2024-11-18 00:58:26.163 +03:00 [DBG] Closing connection to database 'main' on server 'E:\Asp\WebApi1\CityInfo.db'.
2024-11-18 00:58:26.165 +03:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db'.
2024-11-18 00:58:26.168 +03:00 [INF] Executing ForbidResult with authentication schemes ([]).
2024-11-18 00:58:26.228 +03:00 [INF] AuthenticationScheme: Bearer was forbidden.
2024-11-18 00:58:26.230 +03:00 [INF] Executed action WebApi1.Controllers.PointsOfInterestController.GetPointsOfInterest (WebApi1) in 218.2482ms
2024-11-18 00:58:26.232 +03:00 [INF] Executed endpoint 'WebApi1.Controllers.PointsOfInterestController.GetPointsOfInterest (WebApi1)'
2024-11-18 00:58:26.233 +03:00 [DBG] Connection id "0HN87ABDI65UV" completed keep alive response.
2024-11-18 00:58:26.235 +03:00 [DBG] 'CityInfoContext' disposed.
2024-11-18 00:58:26.239 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7117/api/cities/1/pointsofinterest - - - 403 0 - 281.5964ms
2024-11-18 00:58:31.131 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7117/api/cities/2/pointsofinterest - -
2024-11-18 00:58:31.133 +03:00 [DBG] The request path  does not match the path filter
2024-11-18 00:58:31.134 +03:00 [DBG] 1 candidate(s) found for the request path '/api/cities/2/pointsofinterest'
2024-11-18 00:58:31.135 +03:00 [DBG] Endpoint 'WebApi1.Controllers.PointsOfInterestController.GetPointsOfInterest (WebApi1)' with route pattern 'api/cities/{cityId}/pointsofinterest' is valid for the request path '/api/cities/2/pointsofinterest'
2024-11-18 00:58:31.138 +03:00 [DBG] Request matched endpoint 'WebApi1.Controllers.PointsOfInterestController.GetPointsOfInterest (WebApi1)'
2024-11-18 00:58:31.139 +03:00 [DBG] Successfully validated the token.
2024-11-18 00:58:31.144 +03:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2024-11-18 00:58:31.147 +03:00 [DBG] Authorization was successful.
2024-11-18 00:58:31.148 +03:00 [INF] Executing endpoint 'WebApi1.Controllers.PointsOfInterestController.GetPointsOfInterest (WebApi1)'
2024-11-18 00:58:31.150 +03:00 [INF] Route matched with {action = "GetPointsOfInterest", controller = "PointsOfInterest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[WebApi1.Models.PointOfInterestDto]]] GetPointsOfInterest(Int32) on controller WebApi1.Controllers.PointsOfInterestController (WebApi1).
2024-11-18 00:58:31.153 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-18 00:58:31.156 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-18 00:58:31.164 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-11-18 00:58:31.167 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-18 00:58:31.168 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-11-18 00:58:31.176 +03:00 [DBG] Executing controller factory for controller WebApi1.Controllers.PointsOfInterestController (WebApi1)
2024-11-18 00:58:31.181 +03:00 [DBG] Executed controller factory for controller WebApi1.Controllers.PointsOfInterestController (WebApi1)
2024-11-18 00:58:31.183 +03:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2024-11-18 00:58:31.185 +03:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2024-11-18 00:58:31.188 +03:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2024-11-18 00:58:31.190 +03:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2024-11-18 00:58:31.195 +03:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2024-11-18 00:58:31.198 +03:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2024-11-18 00:58:31.455 +03:00 [INF] Entity Framework Core 6.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.0' with options: None
2024-11-18 00:58:31.464 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-18 00:58:31.465 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2024-11-18 00:58:31.468 +03:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2024-11-18 00:58:31.469 +03:00 [DBG] Opened connection to database 'main' on server 'E:\Asp\WebApi1\CityInfo.db'.
2024-11-18 00:58:31.471 +03:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32), @__cityName_1='?' (Size = 8)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE ("c"."Id" = @__cityId_0) AND ("c"."Name" = @__cityName_1))
2024-11-18 00:58:31.478 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[@__cityId_0='?' (DbType = Int32), @__cityName_1='?' (Size = 8)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE ("c"."Id" = @__cityId_0) AND ("c"."Name" = @__cityName_1))
2024-11-18 00:58:31.483 +03:00 [DBG] A data reader was disposed.
2024-11-18 00:58:31.484 +03:00 [DBG] Closing connection to database 'main' on server 'E:\Asp\WebApi1\CityInfo.db'.
2024-11-18 00:58:31.486 +03:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db'.
2024-11-18 00:58:31.488 +03:00 [INF] Executing ForbidResult with authentication schemes ([]).
2024-11-18 00:58:31.493 +03:00 [INF] AuthenticationScheme: Bearer was forbidden.
2024-11-18 00:58:31.494 +03:00 [INF] Executed action WebApi1.Controllers.PointsOfInterestController.GetPointsOfInterest (WebApi1) in 318.6953ms
2024-11-18 00:58:31.497 +03:00 [INF] Executed endpoint 'WebApi1.Controllers.PointsOfInterestController.GetPointsOfInterest (WebApi1)'
2024-11-18 00:58:31.499 +03:00 [DBG] Connection id "0HN87ABDI65UV" completed keep alive response.
2024-11-18 00:58:31.504 +03:00 [DBG] 'CityInfoContext' disposed.
2024-11-18 00:58:31.509 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7117/api/cities/2/pointsofinterest - - - 403 0 - 377.6746ms
2024-11-18 00:58:36.170 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7117/api/cities/3/pointsofinterest - -
2024-11-18 00:58:36.171 +03:00 [DBG] The request path  does not match the path filter
2024-11-18 00:58:36.172 +03:00 [DBG] 1 candidate(s) found for the request path '/api/cities/3/pointsofinterest'
2024-11-18 00:58:36.176 +03:00 [DBG] Endpoint 'WebApi1.Controllers.PointsOfInterestController.GetPointsOfInterest (WebApi1)' with route pattern 'api/cities/{cityId}/pointsofinterest' is valid for the request path '/api/cities/3/pointsofinterest'
2024-11-18 00:58:36.182 +03:00 [DBG] Request matched endpoint 'WebApi1.Controllers.PointsOfInterestController.GetPointsOfInterest (WebApi1)'
2024-11-18 00:58:36.185 +03:00 [DBG] Successfully validated the token.
2024-11-18 00:58:36.186 +03:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2024-11-18 00:58:36.188 +03:00 [DBG] Authorization was successful.
2024-11-18 00:58:36.190 +03:00 [INF] Executing endpoint 'WebApi1.Controllers.PointsOfInterestController.GetPointsOfInterest (WebApi1)'
2024-11-18 00:58:36.194 +03:00 [INF] Route matched with {action = "GetPointsOfInterest", controller = "PointsOfInterest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[WebApi1.Models.PointOfInterestDto]]] GetPointsOfInterest(Int32) on controller WebApi1.Controllers.PointsOfInterestController (WebApi1).
2024-11-18 00:58:36.202 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-18 00:58:36.204 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-18 00:58:36.207 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-11-18 00:58:36.219 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-18 00:58:36.228 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-11-18 00:58:36.234 +03:00 [DBG] Executing controller factory for controller WebApi1.Controllers.PointsOfInterestController (WebApi1)
2024-11-18 00:58:36.238 +03:00 [DBG] Executed controller factory for controller WebApi1.Controllers.PointsOfInterestController (WebApi1)
2024-11-18 00:58:36.242 +03:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2024-11-18 00:58:36.246 +03:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2024-11-18 00:58:36.250 +03:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2024-11-18 00:58:36.252 +03:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2024-11-18 00:58:36.254 +03:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2024-11-18 00:58:36.260 +03:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2024-11-18 00:58:36.264 +03:00 [INF] Entity Framework Core 6.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.0' with options: None
2024-11-18 00:58:36.278 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-18 00:58:36.281 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2024-11-18 00:58:36.283 +03:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2024-11-18 00:58:36.286 +03:00 [DBG] Opened connection to database 'main' on server 'E:\Asp\WebApi1\CityInfo.db'.
2024-11-18 00:58:36.289 +03:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32), @__cityName_1='?' (Size = 8)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE ("c"."Id" = @__cityId_0) AND ("c"."Name" = @__cityName_1))
2024-11-18 00:58:36.305 +03:00 [INF] Executed DbCommand (16ms) [Parameters=[@__cityId_0='?' (DbType = Int32), @__cityName_1='?' (Size = 8)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE ("c"."Id" = @__cityId_0) AND ("c"."Name" = @__cityName_1))
2024-11-18 00:58:36.316 +03:00 [DBG] A data reader was disposed.
2024-11-18 00:58:36.318 +03:00 [DBG] Closing connection to database 'main' on server 'E:\Asp\WebApi1\CityInfo.db'.
2024-11-18 00:58:36.321 +03:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db'.
2024-11-18 00:58:36.323 +03:00 [INF] Executing ForbidResult with authentication schemes ([]).
2024-11-18 00:58:36.326 +03:00 [INF] AuthenticationScheme: Bearer was forbidden.
2024-11-18 00:58:36.330 +03:00 [INF] Executed action WebApi1.Controllers.PointsOfInterestController.GetPointsOfInterest (WebApi1) in 95.4076ms
2024-11-18 00:58:36.332 +03:00 [INF] Executed endpoint 'WebApi1.Controllers.PointsOfInterestController.GetPointsOfInterest (WebApi1)'
2024-11-18 00:58:36.334 +03:00 [DBG] Connection id "0HN87ABDI65UV" completed keep alive response.
2024-11-18 00:58:36.344 +03:00 [DBG] 'CityInfoContext' disposed.
2024-11-18 00:58:36.347 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7117/api/cities/3/pointsofinterest - - - 403 0 - 177.7832ms
2024-11-18 00:59:13.682 +03:00 [INF] Application is shutting down...
2024-11-18 00:59:13.684 +03:00 [DBG] Hosting stopping
2024-11-18 00:59:13.693 +03:00 [DBG] Connection id "0HN87ABDI65UV" disconnecting.
2024-11-18 00:59:13.697 +03:00 [DBG] Connection id "0HN87ABDI65UV" stopped.
2024-11-18 00:59:13.698 +03:00 [DBG] Connection id "0HN87ABDI65UV" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-11-18 00:59:13.707 +03:00 [DBG] Hosting stopped
2024-11-18 00:59:23.590 +03:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2024-11-18 00:59:24.196 +03:00 [DBG] Hosting starting
2024-11-18 00:59:24.229 +03:00 [INF] User profile is available. Using 'C:\Users\DaRK1AnGE1-\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-11-18 00:59:24.238 +03:00 [DBG] Reading data from file 'C:\Users\DaRK1AnGE1-\AppData\Local\ASP.NET\DataProtection-Keys\key-7aaf1ab6-3338-4bbe-824d-412c9ce49ea3.xml'.
2024-11-18 00:59:24.365 +03:00 [DBG] Found key {7aaf1ab6-3338-4bbe-824d-412c9ce49ea3}.
2024-11-18 00:59:24.416 +03:00 [DBG] Considering key {7aaf1ab6-3338-4bbe-824d-412c9ce49ea3} with expiration date 2025-02-15 20:08:59Z as default key.
2024-11-18 00:59:24.463 +03:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-11-18 00:59:24.548 +03:00 [DBG] Decrypting secret element using Windows DPAPI.
2024-11-18 00:59:24.603 +03:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-11-18 00:59:24.635 +03:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2024-11-18 00:59:24.662 +03:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2024-11-18 00:59:24.683 +03:00 [DBG] Using key {7aaf1ab6-3338-4bbe-824d-412c9ce49ea3} as the default key.
2024-11-18 00:59:24.686 +03:00 [DBG] Key ring with default key {7aaf1ab6-3338-4bbe-824d-412c9ce49ea3} was loaded during application startup.
2024-11-18 00:59:24.831 +03:00 [DBG] Using development certificate: CN=localhost (Thumbprint: 9E758B43FC1DB07235D03E669781821F9B436A79)
2024-11-18 00:59:24.915 +03:00 [INF] Now listening on: https://localhost:7117
2024-11-18 00:59:24.936 +03:00 [INF] Now listening on: http://localhost:5211
2024-11-18 00:59:24.958 +03:00 [DBG] Loaded hosting startup assembly WebApi1
2024-11-18 00:59:24.968 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-11-18 00:59:25.001 +03:00 [INF] Hosting environment: Development
2024-11-18 00:59:25.003 +03:00 [INF] Content root path: E:\Asp\WebApi1\
2024-11-18 00:59:25.011 +03:00 [DBG] Hosting started
2024-11-18 00:59:31.026 +03:00 [DBG] Connection id "0HN87ACEJCRQA" received FIN.
2024-11-18 00:59:31.039 +03:00 [DBG] Connection id "0HN87ACEJCRQA" accepted.
2024-11-18 00:59:31.041 +03:00 [DBG] Connection id "0HN87ACEJCRQA" started.
2024-11-18 00:59:31.044 +03:00 [DBG] Connection id "0HN87ACEJCRQB" accepted.
2024-11-18 00:59:31.051 +03:00 [DBG] Connection id "0HN87ACEJCRQB" started.
2024-11-18 00:59:31.073 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2024-11-18 00:59:31.147 +03:00 [DBG] Connection id "0HN87ACEJCRQA" stopped.
2024-11-18 00:59:31.204 +03:00 [DBG] Connection id "0HN87ACEJCRQA" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-11-18 00:59:31.253 +03:00 [DBG] Connection 0HN87ACEJCRQB established using the following protocol: "Tls12"
2024-11-18 00:59:31.478 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7117/api/authentication/authenticate application/json 114
2024-11-18 00:59:31.482 +03:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2024-11-18 00:59:31.519 +03:00 [DBG] POST requests are not supported
2024-11-18 00:59:31.600 +03:00 [DBG] 1 candidate(s) found for the request path '/api/authentication/authenticate'
2024-11-18 00:59:31.613 +03:00 [DBG] Endpoint 'WebApi1.Controllers.AuthenticationController.Authenticate (WebApi1)' with route pattern 'api/authentication/authenticate' is valid for the request path '/api/authentication/authenticate'
2024-11-18 00:59:31.619 +03:00 [DBG] Request matched endpoint 'WebApi1.Controllers.AuthenticationController.Authenticate (WebApi1)'
2024-11-18 00:59:31.689 +03:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-18 00:59:31.695 +03:00 [INF] Executing endpoint 'WebApi1.Controllers.AuthenticationController.Authenticate (WebApi1)'
2024-11-18 00:59:31.736 +03:00 [INF] Route matched with {action = "Authenticate", controller = "Authentication"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.ActionResult`1[System.String] Authenticate(AuthenticationRequestBody) on controller WebApi1.Controllers.AuthenticationController (WebApi1).
2024-11-18 00:59:31.744 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-18 00:59:31.747 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-18 00:59:31.750 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-11-18 00:59:31.753 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-18 00:59:31.762 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-11-18 00:59:31.766 +03:00 [DBG] Executing controller factory for controller WebApi1.Controllers.AuthenticationController (WebApi1)
2024-11-18 00:59:31.768 +03:00 [DBG] Executed controller factory for controller WebApi1.Controllers.AuthenticationController (WebApi1)
2024-11-18 00:59:31.777 +03:00 [DBG] Attempting to bind parameter 'authenticationRequestBody' of type 'WebApi1.Controllers.AuthenticationController+AuthenticationRequestBody' ...
2024-11-18 00:59:31.782 +03:00 [DBG] Attempting to bind parameter 'authenticationRequestBody' of type 'WebApi1.Controllers.AuthenticationController+AuthenticationRequestBody' using the name '' in request data ...
2024-11-18 00:59:31.785 +03:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonPatchInputFormatter' for content type 'application/json'.
2024-11-18 00:59:31.791 +03:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonInputFormatter' for content type 'application/json'.
2024-11-18 00:59:31.808 +03:00 [DBG] Connection id "0HN87ACEJCRQB", Request id "0HN87ACEJCRQB:00000002": started reading request body.
2024-11-18 00:59:31.811 +03:00 [DBG] Connection id "0HN87ACEJCRQB", Request id "0HN87ACEJCRQB:00000002": done reading request body.
2024-11-18 00:59:32.042 +03:00 [DBG] Done attempting to bind parameter 'authenticationRequestBody' of type 'WebApi1.Controllers.AuthenticationController+AuthenticationRequestBody'.
2024-11-18 00:59:32.044 +03:00 [DBG] Done attempting to bind parameter 'authenticationRequestBody' of type 'WebApi1.Controllers.AuthenticationController+AuthenticationRequestBody'.
2024-11-18 00:59:32.046 +03:00 [DBG] Attempting to validate the bound parameter 'authenticationRequestBody' of type 'WebApi1.Controllers.AuthenticationController+AuthenticationRequestBody' ...
2024-11-18 00:59:32.065 +03:00 [DBG] Done attempting to validate the bound parameter 'authenticationRequestBody' of type 'WebApi1.Controllers.AuthenticationController+AuthenticationRequestBody'.
2024-11-18 00:59:32.279 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-18 00:59:32.286 +03:00 [DBG] No information found on request to perform content negotiation.
2024-11-18 00:59:32.288 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-18 00:59:32.292 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-18 00:59:32.294 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter' and content type 'text/plain' to write the response.
2024-11-18 00:59:32.299 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.String'.
2024-11-18 00:59:32.324 +03:00 [INF] Executed action WebApi1.Controllers.AuthenticationController.Authenticate (WebApi1) in 545.0271ms
2024-11-18 00:59:32.327 +03:00 [INF] Executed endpoint 'WebApi1.Controllers.AuthenticationController.Authenticate (WebApi1)'
2024-11-18 00:59:32.330 +03:00 [DBG] Connection id "0HN87ACEJCRQB" completed keep alive response.
2024-11-18 00:59:32.348 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7117/api/authentication/authenticate application/json 114 - 200 - text/plain;+charset=utf-8 878.2974ms
2024-11-18 00:59:45.270 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7117/api/cities - -
2024-11-18 00:59:45.292 +03:00 [DBG] The request path  does not match the path filter
2024-11-18 00:59:45.299 +03:00 [DBG] 1 candidate(s) found for the request path '/api/cities'
2024-11-18 00:59:45.304 +03:00 [DBG] Endpoint 'WebApi1.Controllers.CitiesController.GetCities (WebApi1)' with route pattern 'api/cities' is valid for the request path '/api/cities'
2024-11-18 00:59:45.308 +03:00 [DBG] Request matched endpoint 'WebApi1.Controllers.CitiesController.GetCities (WebApi1)'
2024-11-18 00:59:45.429 +03:00 [DBG] Successfully validated the token.
2024-11-18 00:59:45.431 +03:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2024-11-18 00:59:45.437 +03:00 [DBG] Authorization was successful.
2024-11-18 00:59:45.442 +03:00 [INF] Executing endpoint 'WebApi1.Controllers.CitiesController.GetCities (WebApi1)'
2024-11-18 00:59:45.469 +03:00 [INF] Route matched with {action = "GetCities", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[WebApi1.Models.CityWithoutPointOfInterestDto]]] GetCities(System.String, System.String, Int32, Int32) on controller WebApi1.Controllers.CitiesController (WebApi1).
2024-11-18 00:59:45.476 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-18 00:59:45.478 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-18 00:59:45.480 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-11-18 00:59:45.483 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-18 00:59:45.485 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-11-18 00:59:45.494 +03:00 [DBG] Executing controller factory for controller WebApi1.Controllers.CitiesController (WebApi1)
2024-11-18 00:59:45.797 +03:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2024-11-18 00:59:46.152 +03:00 [DBG] Executed controller factory for controller WebApi1.Controllers.CitiesController (WebApi1)
2024-11-18 00:59:46.155 +03:00 [DBG] Attempting to bind parameter 'name' of type 'System.String' ...
2024-11-18 00:59:46.158 +03:00 [DBG] Attempting to bind parameter 'name' of type 'System.String' using the name '' in request data ...
2024-11-18 00:59:46.161 +03:00 [DBG] Could not find a value in the request with name '' for binding parameter 'name' of type 'System.String'.
2024-11-18 00:59:46.164 +03:00 [DBG] Done attempting to bind parameter 'name' of type 'System.String'.
2024-11-18 00:59:46.165 +03:00 [DBG] Done attempting to bind parameter 'name' of type 'System.String'.
2024-11-18 00:59:46.167 +03:00 [DBG] Attempting to validate the bound parameter 'name' of type 'System.String' ...
2024-11-18 00:59:46.169 +03:00 [DBG] Done attempting to validate the bound parameter 'name' of type 'System.String'.
2024-11-18 00:59:46.174 +03:00 [DBG] Attempting to bind parameter 'searchQuery' of type 'System.String' ...
2024-11-18 00:59:46.176 +03:00 [DBG] Attempting to bind parameter 'searchQuery' of type 'System.String' using the name '' in request data ...
2024-11-18 00:59:46.180 +03:00 [DBG] Could not find a value in the request with name '' for binding parameter 'searchQuery' of type 'System.String'.
2024-11-18 00:59:46.183 +03:00 [DBG] Done attempting to bind parameter 'searchQuery' of type 'System.String'.
2024-11-18 00:59:46.184 +03:00 [DBG] Done attempting to bind parameter 'searchQuery' of type 'System.String'.
2024-11-18 00:59:46.187 +03:00 [DBG] Attempting to validate the bound parameter 'searchQuery' of type 'System.String' ...
2024-11-18 00:59:46.191 +03:00 [DBG] Done attempting to validate the bound parameter 'searchQuery' of type 'System.String'.
2024-11-18 00:59:46.193 +03:00 [DBG] Attempting to bind parameter 'pageNumber' of type 'System.Int32' ...
2024-11-18 00:59:46.195 +03:00 [DBG] Attempting to bind parameter 'pageNumber' of type 'System.Int32' using the name '' in request data ...
2024-11-18 00:59:46.197 +03:00 [DBG] Could not find a value in the request with name '' for binding parameter 'pageNumber' of type 'System.Int32'.
2024-11-18 00:59:46.199 +03:00 [DBG] Done attempting to bind parameter 'pageNumber' of type 'System.Int32'.
2024-11-18 00:59:46.200 +03:00 [DBG] Done attempting to bind parameter 'pageNumber' of type 'System.Int32'.
2024-11-18 00:59:46.202 +03:00 [DBG] Attempting to validate the bound parameter 'pageNumber' of type 'System.Int32' ...
2024-11-18 00:59:46.208 +03:00 [DBG] Done attempting to validate the bound parameter 'pageNumber' of type 'System.Int32'.
2024-11-18 00:59:46.211 +03:00 [DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' ...
2024-11-18 00:59:46.213 +03:00 [DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' using the name '' in request data ...
2024-11-18 00:59:46.215 +03:00 [DBG] Could not find a value in the request with name '' for binding parameter 'pageSize' of type 'System.Int32'.
2024-11-18 00:59:46.217 +03:00 [DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
2024-11-18 00:59:46.218 +03:00 [DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
2024-11-18 00:59:46.223 +03:00 [DBG] Attempting to validate the bound parameter 'pageSize' of type 'System.Int32' ...
2024-11-18 00:59:46.226 +03:00 [DBG] Done attempting to validate the bound parameter 'pageSize' of type 'System.Int32'.
2024-11-18 00:59:47.362 +03:00 [INF] Entity Framework Core 6.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.0' with options: None
2024-11-18 00:59:47.430 +03:00 [DBG] Compiling query expression: 
'DbSet<City>()
    .Count()'
2024-11-18 00:59:47.674 +03:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<int>(
    asyncEnumerable: new SingleQueryingEnumerable<int>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT COUNT(*)
            FROM Cities AS c), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, int>, 
        WebApi1.DbContexts.CityInfoContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2024-11-18 00:59:47.735 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-18 00:59:47.793 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (50ms).
2024-11-18 00:59:47.802 +03:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2024-11-18 00:59:47.827 +03:00 [DBG] Opened connection to database 'main' on server 'E:\Asp\WebApi1\CityInfo.db'.
2024-11-18 00:59:47.845 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "Cities" AS "c"
2024-11-18 00:59:47.907 +03:00 [INF] Executed DbCommand (51ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "Cities" AS "c"
2024-11-18 00:59:47.918 +03:00 [DBG] A data reader was disposed.
2024-11-18 00:59:47.928 +03:00 [DBG] Closing connection to database 'main' on server 'E:\Asp\WebApi1\CityInfo.db'.
2024-11-18 00:59:47.936 +03:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db'.
2024-11-18 00:59:47.954 +03:00 [DBG] Compiling query expression: 
'DbSet<City>()
    .OrderBy(c => c.Name)
    .Skip(__p_0)
    .Take(__p_1)'
2024-11-18 00:59:48.096 +03:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<City>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: City.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: City.Description (string) MaxLength(200), 1], [Property: City.Name (string) Required MaxLength(50), 2] }
        SELECT c.Id, c.Description, c.Name
        FROM Cities AS c
        ORDER BY c.Name ASC
        OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, City>, 
    WebApi1.DbContexts.CityInfoContext, 
    False, 
    False, 
    True
)'
2024-11-18 00:59:48.206 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-18 00:59:48.208 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2024-11-18 00:59:48.211 +03:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2024-11-18 00:59:48.214 +03:00 [DBG] Opened connection to database 'main' on server 'E:\Asp\WebApi1\CityInfo.db'.
2024-11-18 00:59:48.223 +03:00 [DBG] Executing DbCommand [Parameters=[@__p_1='?' (DbType = Int32), @__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Name"
FROM "Cities" AS "c"
ORDER BY "c"."Name"
LIMIT @__p_1 OFFSET @__p_0
2024-11-18 00:59:48.233 +03:00 [INF] Executed DbCommand (17ms) [Parameters=[@__p_1='?' (DbType = Int32), @__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Name"
FROM "Cities" AS "c"
ORDER BY "c"."Name"
LIMIT @__p_1 OFFSET @__p_0
2024-11-18 00:59:48.267 +03:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-11-18 00:59:48.311 +03:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-11-18 00:59:48.314 +03:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-11-18 00:59:48.316 +03:00 [DBG] A data reader was disposed.
2024-11-18 00:59:48.317 +03:00 [DBG] Closing connection to database 'main' on server 'E:\Asp\WebApi1\CityInfo.db'.
2024-11-18 00:59:48.319 +03:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db'.
2024-11-18 00:59:48.359 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-18 00:59:48.363 +03:00 [DBG] No information found on request to perform content negotiation.
2024-11-18 00:59:48.364 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-18 00:59:48.365 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-18 00:59:48.367 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-18 00:59:48.370 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[WebApi1.Models.CityWithoutPointOfInterestDto, WebApi1, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-18 00:59:48.458 +03:00 [INF] Executed action WebApi1.Controllers.CitiesController.GetCities (WebApi1) in 2964.1352ms
2024-11-18 00:59:48.461 +03:00 [INF] Executed endpoint 'WebApi1.Controllers.CitiesController.GetCities (WebApi1)'
2024-11-18 00:59:48.462 +03:00 [DBG] Connection id "0HN87ACEJCRQB" completed keep alive response.
2024-11-18 00:59:48.466 +03:00 [DBG] 'CityInfoContext' disposed.
2024-11-18 00:59:48.475 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7117/api/cities - - - 200 254 application/json;+charset=utf-8 3204.6479ms
2024-11-18 00:59:54.083 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7117/api/cities/3/pointsofinterest - -
2024-11-18 00:59:54.085 +03:00 [DBG] The request path  does not match the path filter
2024-11-18 00:59:54.089 +03:00 [DBG] 1 candidate(s) found for the request path '/api/cities/3/pointsofinterest'
2024-11-18 00:59:54.094 +03:00 [DBG] Endpoint 'WebApi1.Controllers.PointsOfInterestController.GetPointsOfInterest (WebApi1)' with route pattern 'api/cities/{cityId}/pointsofinterest' is valid for the request path '/api/cities/3/pointsofinterest'
2024-11-18 00:59:54.097 +03:00 [DBG] Request matched endpoint 'WebApi1.Controllers.PointsOfInterestController.GetPointsOfInterest (WebApi1)'
2024-11-18 00:59:54.101 +03:00 [DBG] Successfully validated the token.
2024-11-18 00:59:54.103 +03:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2024-11-18 00:59:54.110 +03:00 [DBG] Authorization was successful.
2024-11-18 00:59:54.112 +03:00 [INF] Executing endpoint 'WebApi1.Controllers.PointsOfInterestController.GetPointsOfInterest (WebApi1)'
2024-11-18 00:59:54.126 +03:00 [INF] Route matched with {action = "GetPointsOfInterest", controller = "PointsOfInterest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[WebApi1.Models.PointOfInterestDto]]] GetPointsOfInterest(Int32) on controller WebApi1.Controllers.PointsOfInterestController (WebApi1).
2024-11-18 00:59:54.130 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-18 00:59:54.132 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-18 00:59:54.134 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-11-18 00:59:54.142 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-18 00:59:54.146 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-11-18 00:59:54.148 +03:00 [DBG] Executing controller factory for controller WebApi1.Controllers.PointsOfInterestController (WebApi1)
2024-11-18 00:59:54.166 +03:00 [DBG] Executed controller factory for controller WebApi1.Controllers.PointsOfInterestController (WebApi1)
2024-11-18 00:59:54.169 +03:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2024-11-18 00:59:54.178 +03:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2024-11-18 00:59:54.180 +03:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2024-11-18 00:59:54.181 +03:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2024-11-18 00:59:54.183 +03:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2024-11-18 00:59:54.186 +03:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2024-11-18 00:59:54.202 +03:00 [INF] Entity Framework Core 6.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.0' with options: None
2024-11-18 00:59:54.215 +03:00 [DBG] Compiling query expression: 
'DbSet<City>()
    .Any(c => c.Id == __cityId_0 && c.Name == __cityName_1)'
2024-11-18 00:59:54.273 +03:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<bool>(
    asyncEnumerable: new SingleQueryingEnumerable<bool>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT EXISTS (
                SELECT 1
                FROM Cities AS c
                WHERE (c.Id == @__cityId_0) && (c.Name == @__cityName_1))), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, bool>, 
        WebApi1.DbContexts.CityInfoContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2024-11-18 00:59:54.300 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-18 00:59:54.302 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2024-11-18 00:59:54.307 +03:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2024-11-18 00:59:54.309 +03:00 [DBG] Opened connection to database 'main' on server 'E:\Asp\WebApi1\CityInfo.db'.
2024-11-18 00:59:54.312 +03:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32), @__cityName_1='?' (Size = 8)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE ("c"."Id" = @__cityId_0) AND ("c"."Name" = @__cityName_1))
2024-11-18 00:59:54.318 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[@__cityId_0='?' (DbType = Int32), @__cityName_1='?' (Size = 8)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE ("c"."Id" = @__cityId_0) AND ("c"."Name" = @__cityName_1))
2024-11-18 00:59:54.326 +03:00 [DBG] A data reader was disposed.
2024-11-18 00:59:54.328 +03:00 [DBG] Closing connection to database 'main' on server 'E:\Asp\WebApi1\CityInfo.db'.
2024-11-18 00:59:54.330 +03:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db'.
2024-11-18 00:59:54.334 +03:00 [INF] Executing ForbidResult with authentication schemes ([]).
2024-11-18 00:59:54.344 +03:00 [INF] AuthenticationScheme: Bearer was forbidden.
2024-11-18 00:59:54.346 +03:00 [INF] Executed action WebApi1.Controllers.PointsOfInterestController.GetPointsOfInterest (WebApi1) in 197.7633ms
2024-11-18 00:59:54.349 +03:00 [INF] Executed endpoint 'WebApi1.Controllers.PointsOfInterestController.GetPointsOfInterest (WebApi1)'
2024-11-18 00:59:54.350 +03:00 [DBG] Connection id "0HN87ACEJCRQB" completed keep alive response.
2024-11-18 00:59:54.352 +03:00 [DBG] 'CityInfoContext' disposed.
2024-11-18 00:59:54.361 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7117/api/cities/3/pointsofinterest - - - 403 0 - 278.5645ms
2024-11-18 00:59:57.295 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7117/api/cities/3/pointsofinterest - -
2024-11-18 00:59:57.299 +03:00 [DBG] The request path  does not match the path filter
2024-11-18 00:59:57.300 +03:00 [DBG] 1 candidate(s) found for the request path '/api/cities/3/pointsofinterest'
2024-11-18 00:59:57.302 +03:00 [DBG] Endpoint 'WebApi1.Controllers.PointsOfInterestController.GetPointsOfInterest (WebApi1)' with route pattern 'api/cities/{cityId}/pointsofinterest' is valid for the request path '/api/cities/3/pointsofinterest'
2024-11-18 00:59:57.307 +03:00 [DBG] Request matched endpoint 'WebApi1.Controllers.PointsOfInterestController.GetPointsOfInterest (WebApi1)'
2024-11-18 00:59:57.310 +03:00 [DBG] Successfully validated the token.
2024-11-18 00:59:57.311 +03:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2024-11-18 00:59:57.314 +03:00 [DBG] Authorization was successful.
2024-11-18 00:59:57.316 +03:00 [INF] Executing endpoint 'WebApi1.Controllers.PointsOfInterestController.GetPointsOfInterest (WebApi1)'
2024-11-18 00:59:57.317 +03:00 [INF] Route matched with {action = "GetPointsOfInterest", controller = "PointsOfInterest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[WebApi1.Models.PointOfInterestDto]]] GetPointsOfInterest(Int32) on controller WebApi1.Controllers.PointsOfInterestController (WebApi1).
2024-11-18 00:59:57.327 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-18 00:59:57.329 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-18 00:59:57.331 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-11-18 00:59:57.333 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-18 00:59:57.339 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-11-18 00:59:57.343 +03:00 [DBG] Executing controller factory for controller WebApi1.Controllers.PointsOfInterestController (WebApi1)
2024-11-18 00:59:57.348 +03:00 [DBG] Executed controller factory for controller WebApi1.Controllers.PointsOfInterestController (WebApi1)
2024-11-18 00:59:57.350 +03:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2024-11-18 00:59:57.352 +03:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2024-11-18 00:59:57.359 +03:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2024-11-18 00:59:57.362 +03:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2024-11-18 00:59:57.363 +03:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2024-11-18 00:59:57.365 +03:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2024-11-18 00:59:57.461 +03:00 [INF] Entity Framework Core 6.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.0' with options: None
2024-11-18 00:59:57.468 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-18 00:59:57.471 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2024-11-18 00:59:57.474 +03:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2024-11-18 00:59:57.475 +03:00 [DBG] Opened connection to database 'main' on server 'E:\Asp\WebApi1\CityInfo.db'.
2024-11-18 00:59:57.477 +03:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32), @__cityName_1='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE ("c"."Id" = @__cityId_0) AND ("c"."Name" = @__cityName_1))
2024-11-18 00:59:57.480 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__cityId_0='?' (DbType = Int32), @__cityName_1='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE ("c"."Id" = @__cityId_0) AND ("c"."Name" = @__cityName_1))
2024-11-18 00:59:57.483 +03:00 [DBG] A data reader was disposed.
2024-11-18 00:59:57.484 +03:00 [DBG] Closing connection to database 'main' on server 'E:\Asp\WebApi1\CityInfo.db'.
2024-11-18 00:59:57.486 +03:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db'.
2024-11-18 00:59:57.489 +03:00 [INF] Executing ForbidResult with authentication schemes ([]).
2024-11-18 00:59:57.492 +03:00 [INF] AuthenticationScheme: Bearer was forbidden.
2024-11-18 00:59:57.494 +03:00 [INF] Executed action WebApi1.Controllers.PointsOfInterestController.GetPointsOfInterest (WebApi1) in 151.6757ms
2024-11-18 00:59:57.497 +03:00 [INF] Executed endpoint 'WebApi1.Controllers.PointsOfInterestController.GetPointsOfInterest (WebApi1)'
2024-11-18 00:59:57.498 +03:00 [DBG] Connection id "0HN87ACEJCRQB" completed keep alive response.
2024-11-18 00:59:57.500 +03:00 [DBG] 'CityInfoContext' disposed.
2024-11-18 00:59:57.504 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7117/api/cities/3/pointsofinterest - - - 403 0 - 209.2083ms
2024-11-18 01:00:00.309 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7117/api/cities/1/pointsofinterest - -
2024-11-18 01:00:00.310 +03:00 [DBG] The request path  does not match the path filter
2024-11-18 01:00:00.311 +03:00 [DBG] 1 candidate(s) found for the request path '/api/cities/1/pointsofinterest'
2024-11-18 01:00:00.313 +03:00 [DBG] Endpoint 'WebApi1.Controllers.PointsOfInterestController.GetPointsOfInterest (WebApi1)' with route pattern 'api/cities/{cityId}/pointsofinterest' is valid for the request path '/api/cities/1/pointsofinterest'
2024-11-18 01:00:00.316 +03:00 [DBG] Request matched endpoint 'WebApi1.Controllers.PointsOfInterestController.GetPointsOfInterest (WebApi1)'
2024-11-18 01:00:00.318 +03:00 [DBG] Successfully validated the token.
2024-11-18 01:00:00.320 +03:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2024-11-18 01:00:00.325 +03:00 [DBG] Authorization was successful.
2024-11-18 01:00:00.326 +03:00 [INF] Executing endpoint 'WebApi1.Controllers.PointsOfInterestController.GetPointsOfInterest (WebApi1)'
2024-11-18 01:00:00.328 +03:00 [INF] Route matched with {action = "GetPointsOfInterest", controller = "PointsOfInterest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[WebApi1.Models.PointOfInterestDto]]] GetPointsOfInterest(Int32) on controller WebApi1.Controllers.PointsOfInterestController (WebApi1).
2024-11-18 01:00:00.348 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-18 01:00:00.349 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-18 01:00:00.352 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-11-18 01:00:00.358 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-18 01:00:00.361 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-11-18 01:00:00.363 +03:00 [DBG] Executing controller factory for controller WebApi1.Controllers.PointsOfInterestController (WebApi1)
2024-11-18 01:00:00.366 +03:00 [DBG] Executed controller factory for controller WebApi1.Controllers.PointsOfInterestController (WebApi1)
2024-11-18 01:00:00.367 +03:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2024-11-18 01:00:00.369 +03:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2024-11-18 01:00:00.374 +03:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2024-11-18 01:00:00.376 +03:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2024-11-18 01:00:00.378 +03:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2024-11-18 01:00:00.380 +03:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2024-11-18 01:00:00.383 +03:00 [INF] Entity Framework Core 6.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.0' with options: None
2024-11-18 01:00:00.386 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-18 01:00:00.391 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (5ms).
2024-11-18 01:00:00.394 +03:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2024-11-18 01:00:00.397 +03:00 [DBG] Opened connection to database 'main' on server 'E:\Asp\WebApi1\CityInfo.db'.
2024-11-18 01:00:00.399 +03:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32), @__cityName_1='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE ("c"."Id" = @__cityId_0) AND ("c"."Name" = @__cityName_1))
2024-11-18 01:00:00.402 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@__cityId_0='?' (DbType = Int32), @__cityName_1='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE ("c"."Id" = @__cityId_0) AND ("c"."Name" = @__cityName_1))
2024-11-18 01:00:00.409 +03:00 [DBG] A data reader was disposed.
2024-11-18 01:00:00.410 +03:00 [DBG] Closing connection to database 'main' on server 'E:\Asp\WebApi1\CityInfo.db'.
2024-11-18 01:00:00.412 +03:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db'.
2024-11-18 01:00:00.414 +03:00 [INF] Executing ForbidResult with authentication schemes ([]).
2024-11-18 01:00:00.416 +03:00 [INF] AuthenticationScheme: Bearer was forbidden.
2024-11-18 01:00:00.417 +03:00 [INF] Executed action WebApi1.Controllers.PointsOfInterestController.GetPointsOfInterest (WebApi1) in 53.9218ms
2024-11-18 01:00:00.418 +03:00 [INF] Executed endpoint 'WebApi1.Controllers.PointsOfInterestController.GetPointsOfInterest (WebApi1)'
2024-11-18 01:00:00.422 +03:00 [DBG] Connection id "0HN87ACEJCRQB" completed keep alive response.
2024-11-18 01:00:00.428 +03:00 [DBG] 'CityInfoContext' disposed.
2024-11-18 01:00:00.431 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7117/api/cities/1/pointsofinterest - - - 403 0 - 122.3733ms
2024-11-18 01:00:05.431 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7117/api/cities/2/pointsofinterest - -
2024-11-18 01:00:05.433 +03:00 [DBG] The request path  does not match the path filter
2024-11-18 01:00:05.434 +03:00 [DBG] 1 candidate(s) found for the request path '/api/cities/2/pointsofinterest'
2024-11-18 01:00:05.436 +03:00 [DBG] Endpoint 'WebApi1.Controllers.PointsOfInterestController.GetPointsOfInterest (WebApi1)' with route pattern 'api/cities/{cityId}/pointsofinterest' is valid for the request path '/api/cities/2/pointsofinterest'
2024-11-18 01:00:05.443 +03:00 [DBG] Request matched endpoint 'WebApi1.Controllers.PointsOfInterestController.GetPointsOfInterest (WebApi1)'
2024-11-18 01:00:05.446 +03:00 [DBG] Successfully validated the token.
2024-11-18 01:00:05.447 +03:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2024-11-18 01:00:05.449 +03:00 [DBG] Authorization was successful.
2024-11-18 01:00:05.451 +03:00 [INF] Executing endpoint 'WebApi1.Controllers.PointsOfInterestController.GetPointsOfInterest (WebApi1)'
2024-11-18 01:00:05.460 +03:00 [INF] Route matched with {action = "GetPointsOfInterest", controller = "PointsOfInterest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[WebApi1.Models.PointOfInterestDto]]] GetPointsOfInterest(Int32) on controller WebApi1.Controllers.PointsOfInterestController (WebApi1).
2024-11-18 01:00:05.470 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-18 01:00:05.478 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-18 01:00:05.481 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-11-18 01:00:05.484 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-18 01:00:05.487 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-11-18 01:00:05.493 +03:00 [DBG] Executing controller factory for controller WebApi1.Controllers.PointsOfInterestController (WebApi1)
2024-11-18 01:00:05.498 +03:00 [DBG] Executed controller factory for controller WebApi1.Controllers.PointsOfInterestController (WebApi1)
2024-11-18 01:00:05.501 +03:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2024-11-18 01:00:05.509 +03:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2024-11-18 01:00:05.517 +03:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2024-11-18 01:00:05.522 +03:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2024-11-18 01:00:05.525 +03:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2024-11-18 01:00:05.528 +03:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2024-11-18 01:00:05.531 +03:00 [INF] Entity Framework Core 6.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.0' with options: None
2024-11-18 01:00:05.545 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-18 01:00:05.547 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2024-11-18 01:00:05.550 +03:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2024-11-18 01:00:05.557 +03:00 [DBG] Opened connection to database 'main' on server 'E:\Asp\WebApi1\CityInfo.db'.
2024-11-18 01:00:05.568 +03:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32), @__cityName_1='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE ("c"."Id" = @__cityId_0) AND ("c"."Name" = @__cityName_1))
2024-11-18 01:00:05.575 +03:00 [INF] Executed DbCommand (8ms) [Parameters=[@__cityId_0='?' (DbType = Int32), @__cityName_1='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE ("c"."Id" = @__cityId_0) AND ("c"."Name" = @__cityName_1))
2024-11-18 01:00:05.580 +03:00 [DBG] A data reader was disposed.
2024-11-18 01:00:05.582 +03:00 [DBG] Closing connection to database 'main' on server 'E:\Asp\WebApi1\CityInfo.db'.
2024-11-18 01:00:05.584 +03:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db'.
2024-11-18 01:00:05.590 +03:00 [DBG] Compiling query expression: 
'DbSet<City>()
    .Any(c => c.Id == __cityId_0)'
2024-11-18 01:00:05.599 +03:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<bool>(
    asyncEnumerable: new SingleQueryingEnumerable<bool>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT EXISTS (
                SELECT 1
                FROM Cities AS c
                WHERE c.Id == @__cityId_0)), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, bool>, 
        WebApi1.DbContexts.CityInfoContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2024-11-18 01:00:05.608 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-18 01:00:05.609 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2024-11-18 01:00:05.611 +03:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2024-11-18 01:00:05.615 +03:00 [DBG] Opened connection to database 'main' on server 'E:\Asp\WebApi1\CityInfo.db'.
2024-11-18 01:00:05.617 +03:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0)
2024-11-18 01:00:05.629 +03:00 [INF] Executed DbCommand (12ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0)
2024-11-18 01:00:05.641 +03:00 [DBG] A data reader was disposed.
2024-11-18 01:00:05.643 +03:00 [DBG] Closing connection to database 'main' on server 'E:\Asp\WebApi1\CityInfo.db'.
2024-11-18 01:00:05.646 +03:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db'.
2024-11-18 01:00:05.651 +03:00 [DBG] Compiling query expression: 
'DbSet<PointOfInterest>()
    .Where(p => p.cityId == __cityId_0)'
2024-11-18 01:00:05.664 +03:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<PointOfInterest>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: PointOfInterest.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: PointOfInterest.Description (string) Required MaxLength(200), 1], [Property: PointOfInterest.Name (string) Required MaxLength(50), 2], [Property: PointOfInterest.cityId (int) Required FK Index, 3] }
        SELECT p.Id, p.Description, p.Name, p.cityId
        FROM PointOfInterest AS p
        WHERE p.cityId == @__cityId_0), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, PointOfInterest>, 
    WebApi1.DbContexts.CityInfoContext, 
    False, 
    False, 
    True
)'
2024-11-18 01:00:05.675 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-18 01:00:05.677 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2024-11-18 01:00:05.679 +03:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2024-11-18 01:00:05.681 +03:00 [DBG] Opened connection to database 'main' on server 'E:\Asp\WebApi1\CityInfo.db'.
2024-11-18 01:00:05.684 +03:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Id", "p"."Description", "p"."Name", "p"."cityId"
FROM "PointOfInterest" AS "p"
WHERE "p"."cityId" = @__cityId_0
2024-11-18 01:00:05.698 +03:00 [INF] Executed DbCommand (14ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Id", "p"."Description", "p"."Name", "p"."cityId"
FROM "PointOfInterest" AS "p"
WHERE "p"."cityId" = @__cityId_0
2024-11-18 01:00:05.715 +03:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-11-18 01:00:05.730 +03:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-11-18 01:00:05.732 +03:00 [DBG] A data reader was disposed.
2024-11-18 01:00:05.733 +03:00 [DBG] Closing connection to database 'main' on server 'E:\Asp\WebApi1\CityInfo.db'.
2024-11-18 01:00:05.735 +03:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db'.
2024-11-18 01:00:05.748 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-18 01:00:05.754 +03:00 [DBG] No information found on request to perform content negotiation.
2024-11-18 01:00:05.762 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-18 01:00:05.765 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-18 01:00:05.769 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-18 01:00:05.773 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[WebApi1.Models.PointOfInterestDto, WebApi1, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-18 01:00:05.786 +03:00 [INF] Executed action WebApi1.Controllers.PointsOfInterestController.GetPointsOfInterest (WebApi1) in 293.5954ms
2024-11-18 01:00:05.795 +03:00 [INF] Executed endpoint 'WebApi1.Controllers.PointsOfInterestController.GetPointsOfInterest (WebApi1)'
2024-11-18 01:00:05.797 +03:00 [DBG] Connection id "0HN87ACEJCRQB" completed keep alive response.
2024-11-18 01:00:05.798 +03:00 [DBG] 'CityInfoContext' disposed.
2024-11-18 01:00:05.800 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7117/api/cities/2/pointsofinterest - - - 200 169 application/json;+charset=utf-8 369.2996ms
2024-11-18 01:00:35.093 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7117/api/cities/4/pointsofinterest - -
2024-11-18 01:00:35.095 +03:00 [DBG] The request path  does not match the path filter
2024-11-18 01:00:35.096 +03:00 [DBG] 1 candidate(s) found for the request path '/api/cities/4/pointsofinterest'
2024-11-18 01:00:35.098 +03:00 [DBG] Endpoint 'WebApi1.Controllers.PointsOfInterestController.GetPointsOfInterest (WebApi1)' with route pattern 'api/cities/{cityId}/pointsofinterest' is valid for the request path '/api/cities/4/pointsofinterest'
2024-11-18 01:00:35.102 +03:00 [DBG] Request matched endpoint 'WebApi1.Controllers.PointsOfInterestController.GetPointsOfInterest (WebApi1)'
2024-11-18 01:00:35.107 +03:00 [DBG] Successfully validated the token.
2024-11-18 01:00:35.109 +03:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2024-11-18 01:00:35.110 +03:00 [DBG] Authorization was successful.
2024-11-18 01:00:35.113 +03:00 [INF] Executing endpoint 'WebApi1.Controllers.PointsOfInterestController.GetPointsOfInterest (WebApi1)'
2024-11-18 01:00:35.115 +03:00 [INF] Route matched with {action = "GetPointsOfInterest", controller = "PointsOfInterest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[WebApi1.Models.PointOfInterestDto]]] GetPointsOfInterest(Int32) on controller WebApi1.Controllers.PointsOfInterestController (WebApi1).
2024-11-18 01:00:35.126 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-18 01:00:35.131 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-18 01:00:35.133 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-11-18 01:00:35.140 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-18 01:00:35.142 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-11-18 01:00:35.146 +03:00 [DBG] Executing controller factory for controller WebApi1.Controllers.PointsOfInterestController (WebApi1)
2024-11-18 01:00:35.147 +03:00 [DBG] Executed controller factory for controller WebApi1.Controllers.PointsOfInterestController (WebApi1)
2024-11-18 01:00:35.149 +03:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2024-11-18 01:00:35.151 +03:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2024-11-18 01:00:35.158 +03:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2024-11-18 01:00:35.161 +03:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2024-11-18 01:00:35.163 +03:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2024-11-18 01:00:35.164 +03:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2024-11-18 01:00:35.167 +03:00 [INF] Entity Framework Core 6.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.0' with options: None
2024-11-18 01:00:35.175 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-18 01:00:35.177 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2024-11-18 01:00:35.179 +03:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2024-11-18 01:00:35.182 +03:00 [DBG] Opened connection to database 'main' on server 'E:\Asp\WebApi1\CityInfo.db'.
2024-11-18 01:00:35.184 +03:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32), @__cityName_1='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE ("c"."Id" = @__cityId_0) AND ("c"."Name" = @__cityName_1))
2024-11-18 01:00:35.192 +03:00 [INF] Executed DbCommand (9ms) [Parameters=[@__cityId_0='?' (DbType = Int32), @__cityName_1='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE ("c"."Id" = @__cityId_0) AND ("c"."Name" = @__cityName_1))
2024-11-18 01:00:35.196 +03:00 [DBG] A data reader was disposed.
2024-11-18 01:00:35.197 +03:00 [DBG] Closing connection to database 'main' on server 'E:\Asp\WebApi1\CityInfo.db'.
2024-11-18 01:00:35.199 +03:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db'.
2024-11-18 01:00:35.201 +03:00 [INF] Executing ForbidResult with authentication schemes ([]).
2024-11-18 01:00:35.205 +03:00 [INF] AuthenticationScheme: Bearer was forbidden.
2024-11-18 01:00:35.206 +03:00 [INF] Executed action WebApi1.Controllers.PointsOfInterestController.GetPointsOfInterest (WebApi1) in 60.9795ms
2024-11-18 01:00:35.208 +03:00 [INF] Executed endpoint 'WebApi1.Controllers.PointsOfInterestController.GetPointsOfInterest (WebApi1)'
2024-11-18 01:00:35.210 +03:00 [DBG] Connection id "0HN87ACEJCRQB" completed keep alive response.
2024-11-18 01:00:35.214 +03:00 [DBG] 'CityInfoContext' disposed.
2024-11-18 01:00:35.228 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7117/api/cities/4/pointsofinterest - - - 403 0 - 134.6173ms
2024-11-18 01:00:50.365 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7117/api/cities/10/pointsofinterest - -
2024-11-18 01:00:50.367 +03:00 [DBG] The request path  does not match the path filter
2024-11-18 01:00:50.368 +03:00 [DBG] 1 candidate(s) found for the request path '/api/cities/10/pointsofinterest'
2024-11-18 01:00:50.370 +03:00 [DBG] Endpoint 'WebApi1.Controllers.PointsOfInterestController.GetPointsOfInterest (WebApi1)' with route pattern 'api/cities/{cityId}/pointsofinterest' is valid for the request path '/api/cities/10/pointsofinterest'
2024-11-18 01:00:50.373 +03:00 [DBG] Request matched endpoint 'WebApi1.Controllers.PointsOfInterestController.GetPointsOfInterest (WebApi1)'
2024-11-18 01:00:50.375 +03:00 [DBG] Successfully validated the token.
2024-11-18 01:00:50.376 +03:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2024-11-18 01:00:50.378 +03:00 [DBG] Authorization was successful.
2024-11-18 01:00:50.379 +03:00 [INF] Executing endpoint 'WebApi1.Controllers.PointsOfInterestController.GetPointsOfInterest (WebApi1)'
2024-11-18 01:00:50.381 +03:00 [INF] Route matched with {action = "GetPointsOfInterest", controller = "PointsOfInterest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[WebApi1.Models.PointOfInterestDto]]] GetPointsOfInterest(Int32) on controller WebApi1.Controllers.PointsOfInterestController (WebApi1).
2024-11-18 01:00:50.386 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-18 01:00:50.388 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-18 01:00:50.394 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-11-18 01:00:50.397 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-18 01:00:50.399 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-11-18 01:00:50.404 +03:00 [DBG] Executing controller factory for controller WebApi1.Controllers.PointsOfInterestController (WebApi1)
2024-11-18 01:00:50.407 +03:00 [DBG] Executed controller factory for controller WebApi1.Controllers.PointsOfInterestController (WebApi1)
2024-11-18 01:00:50.410 +03:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2024-11-18 01:00:50.412 +03:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2024-11-18 01:00:50.414 +03:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2024-11-18 01:00:50.416 +03:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2024-11-18 01:00:50.418 +03:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2024-11-18 01:00:50.424 +03:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2024-11-18 01:00:50.427 +03:00 [INF] Entity Framework Core 6.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.0' with options: None
2024-11-18 01:00:50.430 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-18 01:00:50.431 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2024-11-18 01:00:50.433 +03:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2024-11-18 01:00:50.436 +03:00 [DBG] Opened connection to database 'main' on server 'E:\Asp\WebApi1\CityInfo.db'.
2024-11-18 01:00:50.439 +03:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32), @__cityName_1='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE ("c"."Id" = @__cityId_0) AND ("c"."Name" = @__cityName_1))
2024-11-18 01:00:50.443 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@__cityId_0='?' (DbType = Int32), @__cityName_1='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE ("c"."Id" = @__cityId_0) AND ("c"."Name" = @__cityName_1))
2024-11-18 01:00:50.446 +03:00 [DBG] A data reader was disposed.
2024-11-18 01:00:50.448 +03:00 [DBG] Closing connection to database 'main' on server 'E:\Asp\WebApi1\CityInfo.db'.
2024-11-18 01:00:50.449 +03:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db'.
2024-11-18 01:00:50.453 +03:00 [INF] Executing ForbidResult with authentication schemes ([]).
2024-11-18 01:00:50.456 +03:00 [INF] AuthenticationScheme: Bearer was forbidden.
2024-11-18 01:00:50.460 +03:00 [INF] Executed action WebApi1.Controllers.PointsOfInterestController.GetPointsOfInterest (WebApi1) in 55.1821ms
2024-11-18 01:00:50.463 +03:00 [INF] Executed endpoint 'WebApi1.Controllers.PointsOfInterestController.GetPointsOfInterest (WebApi1)'
2024-11-18 01:00:50.465 +03:00 [DBG] Connection id "0HN87ACEJCRQB" completed keep alive response.
2024-11-18 01:00:50.474 +03:00 [DBG] 'CityInfoContext' disposed.
2024-11-18 01:00:50.478 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7117/api/cities/10/pointsofinterest - - - 403 0 - 112.6761ms
2024-11-18 01:00:54.745 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7117/api/cities/2/pointsofinterest - -
2024-11-18 01:00:54.747 +03:00 [DBG] The request path  does not match the path filter
2024-11-18 01:00:54.748 +03:00 [DBG] 1 candidate(s) found for the request path '/api/cities/2/pointsofinterest'
2024-11-18 01:00:54.750 +03:00 [DBG] Endpoint 'WebApi1.Controllers.PointsOfInterestController.GetPointsOfInterest (WebApi1)' with route pattern 'api/cities/{cityId}/pointsofinterest' is valid for the request path '/api/cities/2/pointsofinterest'
2024-11-18 01:00:54.756 +03:00 [DBG] Request matched endpoint 'WebApi1.Controllers.PointsOfInterestController.GetPointsOfInterest (WebApi1)'
2024-11-18 01:00:54.758 +03:00 [DBG] Successfully validated the token.
2024-11-18 01:00:54.760 +03:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2024-11-18 01:00:54.762 +03:00 [DBG] Authorization was successful.
2024-11-18 01:00:54.763 +03:00 [INF] Executing endpoint 'WebApi1.Controllers.PointsOfInterestController.GetPointsOfInterest (WebApi1)'
2024-11-18 01:00:54.764 +03:00 [INF] Route matched with {action = "GetPointsOfInterest", controller = "PointsOfInterest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[WebApi1.Models.PointOfInterestDto]]] GetPointsOfInterest(Int32) on controller WebApi1.Controllers.PointsOfInterestController (WebApi1).
2024-11-18 01:00:54.778 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-18 01:00:54.780 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-18 01:00:54.782 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-11-18 01:00:54.790 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-18 01:00:54.792 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-11-18 01:00:54.795 +03:00 [DBG] Executing controller factory for controller WebApi1.Controllers.PointsOfInterestController (WebApi1)
2024-11-18 01:00:54.796 +03:00 [DBG] Executed controller factory for controller WebApi1.Controllers.PointsOfInterestController (WebApi1)
2024-11-18 01:00:54.798 +03:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2024-11-18 01:00:54.806 +03:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2024-11-18 01:00:54.812 +03:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2024-11-18 01:00:54.813 +03:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2024-11-18 01:00:54.815 +03:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2024-11-18 01:00:54.817 +03:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2024-11-18 01:00:54.824 +03:00 [INF] Entity Framework Core 6.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.0' with options: None
2024-11-18 01:00:54.828 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-18 01:00:54.831 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2024-11-18 01:00:54.837 +03:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2024-11-18 01:00:54.840 +03:00 [DBG] Opened connection to database 'main' on server 'E:\Asp\WebApi1\CityInfo.db'.
2024-11-18 01:00:54.845 +03:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32), @__cityName_1='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE ("c"."Id" = @__cityId_0) AND ("c"."Name" = @__cityName_1))
2024-11-18 01:00:54.849 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@__cityId_0='?' (DbType = Int32), @__cityName_1='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE ("c"."Id" = @__cityId_0) AND ("c"."Name" = @__cityName_1))
2024-11-18 01:00:54.865 +03:00 [DBG] A data reader was disposed.
2024-11-18 01:00:54.870 +03:00 [DBG] Closing connection to database 'main' on server 'E:\Asp\WebApi1\CityInfo.db'.
2024-11-18 01:00:54.873 +03:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db'.
2024-11-18 01:00:54.877 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-18 01:00:54.879 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2024-11-18 01:00:54.882 +03:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2024-11-18 01:00:54.887 +03:00 [DBG] Opened connection to database 'main' on server 'E:\Asp\WebApi1\CityInfo.db'.
2024-11-18 01:00:54.889 +03:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0)
2024-11-18 01:00:54.892 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0)
2024-11-18 01:00:54.896 +03:00 [DBG] A data reader was disposed.
2024-11-18 01:00:54.897 +03:00 [DBG] Closing connection to database 'main' on server 'E:\Asp\WebApi1\CityInfo.db'.
2024-11-18 01:00:54.908 +03:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db'.
2024-11-18 01:00:54.910 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-18 01:00:54.911 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2024-11-18 01:00:54.913 +03:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2024-11-18 01:00:54.915 +03:00 [DBG] Opened connection to database 'main' on server 'E:\Asp\WebApi1\CityInfo.db'.
2024-11-18 01:00:54.920 +03:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Id", "p"."Description", "p"."Name", "p"."cityId"
FROM "PointOfInterest" AS "p"
WHERE "p"."cityId" = @__cityId_0
2024-11-18 01:00:54.925 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Id", "p"."Description", "p"."Name", "p"."cityId"
FROM "PointOfInterest" AS "p"
WHERE "p"."cityId" = @__cityId_0
2024-11-18 01:00:54.928 +03:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-11-18 01:00:54.930 +03:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-11-18 01:00:54.933 +03:00 [DBG] A data reader was disposed.
2024-11-18 01:00:54.937 +03:00 [DBG] Closing connection to database 'main' on server 'E:\Asp\WebApi1\CityInfo.db'.
2024-11-18 01:00:54.939 +03:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db'.
2024-11-18 01:00:54.941 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-18 01:00:54.945 +03:00 [DBG] No information found on request to perform content negotiation.
2024-11-18 01:00:54.946 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-18 01:00:54.948 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-18 01:00:54.950 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-18 01:00:54.955 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[WebApi1.Models.PointOfInterestDto, WebApi1, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-18 01:00:54.958 +03:00 [INF] Executed action WebApi1.Controllers.PointsOfInterestController.GetPointsOfInterest (WebApi1) in 162.9845ms
2024-11-18 01:00:54.965 +03:00 [INF] Executed endpoint 'WebApi1.Controllers.PointsOfInterestController.GetPointsOfInterest (WebApi1)'
2024-11-18 01:00:54.971 +03:00 [DBG] Connection id "0HN87ACEJCRQB" completed keep alive response.
2024-11-18 01:00:54.994 +03:00 [DBG] 'CityInfoContext' disposed.
2024-11-18 01:00:54.996 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7117/api/cities/2/pointsofinterest - - - 200 169 application/json;+charset=utf-8 250.8697ms
2024-11-18 01:03:06.071 +03:00 [DBG] Connection id "0HN87ACEJCRQB" disconnecting.
2024-11-18 01:03:06.074 +03:00 [DBG] Connection id "0HN87ACEJCRQB" stopped.
2024-11-18 01:03:06.076 +03:00 [DBG] Connection id "0HN87ACEJCRQB" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-11-18 01:10:03.930 +03:00 [INF] Application is shutting down...
2024-11-18 01:10:03.932 +03:00 [DBG] Hosting stopping
2024-11-18 01:10:03.941 +03:00 [DBG] Hosting stopped
2024-11-18 01:10:39.166 +03:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2024-11-18 01:10:39.352 +03:00 [DBG] Hosting starting
2024-11-18 01:10:39.393 +03:00 [INF] User profile is available. Using 'C:\Users\DaRK1AnGE1-\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-11-18 01:10:39.402 +03:00 [DBG] Reading data from file 'C:\Users\DaRK1AnGE1-\AppData\Local\ASP.NET\DataProtection-Keys\key-7aaf1ab6-3338-4bbe-824d-412c9ce49ea3.xml'.
2024-11-18 01:10:39.426 +03:00 [DBG] Found key {7aaf1ab6-3338-4bbe-824d-412c9ce49ea3}.
2024-11-18 01:10:39.468 +03:00 [DBG] Considering key {7aaf1ab6-3338-4bbe-824d-412c9ce49ea3} with expiration date 2025-02-15 20:08:59Z as default key.
2024-11-18 01:10:39.475 +03:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-11-18 01:10:39.488 +03:00 [DBG] Decrypting secret element using Windows DPAPI.
2024-11-18 01:10:39.493 +03:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-11-18 01:10:39.501 +03:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2024-11-18 01:10:39.513 +03:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2024-11-18 01:10:39.520 +03:00 [DBG] Using key {7aaf1ab6-3338-4bbe-824d-412c9ce49ea3} as the default key.
2024-11-18 01:10:39.522 +03:00 [DBG] Key ring with default key {7aaf1ab6-3338-4bbe-824d-412c9ce49ea3} was loaded during application startup.
2024-11-18 01:10:39.624 +03:00 [DBG] Using development certificate: CN=localhost (Thumbprint: 9E758B43FC1DB07235D03E669781821F9B436A79)
2024-11-18 01:10:39.679 +03:00 [INF] Now listening on: https://localhost:7117
2024-11-18 01:10:39.681 +03:00 [INF] Now listening on: http://localhost:5211
2024-11-18 01:10:39.683 +03:00 [DBG] Loaded hosting startup assembly WebApi1
2024-11-18 01:10:39.685 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-11-18 01:10:39.688 +03:00 [INF] Hosting environment: Development
2024-11-18 01:10:39.689 +03:00 [INF] Content root path: E:\Asp\WebApi1\
2024-11-18 01:10:39.691 +03:00 [DBG] Hosting started
2024-11-18 01:10:46.562 +03:00 [DBG] Connection id "0HN87AINTPSMK" received FIN.
2024-11-18 01:10:46.571 +03:00 [DBG] Connection id "0HN87AINTPSMK" accepted.
2024-11-18 01:10:46.573 +03:00 [DBG] Connection id "0HN87AINTPSMK" started.
2024-11-18 01:10:46.577 +03:00 [DBG] Connection id "0HN87AINTPSML" accepted.
2024-11-18 01:10:46.579 +03:00 [DBG] Connection id "0HN87AINTPSML" started.
2024-11-18 01:10:46.598 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2024-11-18 01:10:46.647 +03:00 [DBG] Connection id "0HN87AINTPSMK" stopped.
2024-11-18 01:10:46.654 +03:00 [DBG] Connection id "0HN87AINTPSMK" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-11-18 01:10:46.702 +03:00 [DBG] Connection 0HN87AINTPSML established using the following protocol: "Tls12"
2024-11-18 01:10:46.763 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7117/api/authentication/authenticate application/json 114
2024-11-18 01:10:46.766 +03:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2024-11-18 01:10:46.790 +03:00 [DBG] POST requests are not supported
2024-11-18 01:10:46.846 +03:00 [DBG] 1 candidate(s) found for the request path '/api/authentication/authenticate'
2024-11-18 01:10:46.855 +03:00 [DBG] Endpoint 'WebApi1.Controllers.AuthenticationController.Authenticate (WebApi1)' with route pattern 'api/authentication/authenticate' is valid for the request path '/api/authentication/authenticate'
2024-11-18 01:10:46.862 +03:00 [DBG] Request matched endpoint 'WebApi1.Controllers.AuthenticationController.Authenticate (WebApi1)'
2024-11-18 01:10:46.914 +03:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-18 01:10:46.918 +03:00 [INF] Executing endpoint 'WebApi1.Controllers.AuthenticationController.Authenticate (WebApi1)'
2024-11-18 01:10:46.955 +03:00 [INF] Route matched with {action = "Authenticate", controller = "Authentication"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.ActionResult`1[System.String] Authenticate(AuthenticationRequestBody) on controller WebApi1.Controllers.AuthenticationController (WebApi1).
2024-11-18 01:10:46.963 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-18 01:10:46.965 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-18 01:10:46.968 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-11-18 01:10:46.971 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-18 01:10:46.974 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-11-18 01:10:46.981 +03:00 [DBG] Executing controller factory for controller WebApi1.Controllers.AuthenticationController (WebApi1)
2024-11-18 01:10:46.983 +03:00 [DBG] Executed controller factory for controller WebApi1.Controllers.AuthenticationController (WebApi1)
2024-11-18 01:10:46.989 +03:00 [DBG] Attempting to bind parameter 'authenticationRequestBody' of type 'WebApi1.Controllers.AuthenticationController+AuthenticationRequestBody' ...
2024-11-18 01:10:46.996 +03:00 [DBG] Attempting to bind parameter 'authenticationRequestBody' of type 'WebApi1.Controllers.AuthenticationController+AuthenticationRequestBody' using the name '' in request data ...
2024-11-18 01:10:47.000 +03:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonPatchInputFormatter' for content type 'application/json'.
2024-11-18 01:10:47.002 +03:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonInputFormatter' for content type 'application/json'.
2024-11-18 01:10:47.016 +03:00 [DBG] Connection id "0HN87AINTPSML", Request id "0HN87AINTPSML:00000002": started reading request body.
2024-11-18 01:10:47.018 +03:00 [DBG] Connection id "0HN87AINTPSML", Request id "0HN87AINTPSML:00000002": done reading request body.
2024-11-18 01:10:47.202 +03:00 [DBG] Done attempting to bind parameter 'authenticationRequestBody' of type 'WebApi1.Controllers.AuthenticationController+AuthenticationRequestBody'.
2024-11-18 01:10:47.204 +03:00 [DBG] Done attempting to bind parameter 'authenticationRequestBody' of type 'WebApi1.Controllers.AuthenticationController+AuthenticationRequestBody'.
2024-11-18 01:10:47.206 +03:00 [DBG] Attempting to validate the bound parameter 'authenticationRequestBody' of type 'WebApi1.Controllers.AuthenticationController+AuthenticationRequestBody' ...
2024-11-18 01:10:47.220 +03:00 [DBG] Done attempting to validate the bound parameter 'authenticationRequestBody' of type 'WebApi1.Controllers.AuthenticationController+AuthenticationRequestBody'.
2024-11-18 01:10:47.524 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-18 01:10:47.530 +03:00 [DBG] No information found on request to perform content negotiation.
2024-11-18 01:10:47.532 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-18 01:10:47.533 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-18 01:10:47.535 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter' and content type 'text/plain' to write the response.
2024-11-18 01:10:47.538 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.String'.
2024-11-18 01:10:47.557 +03:00 [INF] Executed action WebApi1.Controllers.AuthenticationController.Authenticate (WebApi1) in 565.2432ms
2024-11-18 01:10:47.563 +03:00 [INF] Executed endpoint 'WebApi1.Controllers.AuthenticationController.Authenticate (WebApi1)'
2024-11-18 01:10:47.565 +03:00 [DBG] Connection id "0HN87AINTPSML" completed keep alive response.
2024-11-18 01:10:47.570 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7117/api/authentication/authenticate application/json 114 - 200 - text/plain;+charset=utf-8 815.7163ms
2024-11-18 01:10:57.701 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7117/api/cities/2/pointsofinterest - -
2024-11-18 01:10:57.722 +03:00 [DBG] The request path  does not match the path filter
2024-11-18 01:10:57.731 +03:00 [DBG] 1 candidate(s) found for the request path '/api/cities/2/pointsofinterest'
2024-11-18 01:10:57.734 +03:00 [DBG] Endpoint 'WebApi1.Controllers.PointsOfInterestController.GetPointsOfInterest (WebApi1)' with route pattern 'api/cities/{cityId}/pointsofinterest' is valid for the request path '/api/cities/2/pointsofinterest'
2024-11-18 01:10:57.737 +03:00 [DBG] Request matched endpoint 'WebApi1.Controllers.PointsOfInterestController.GetPointsOfInterest (WebApi1)'
2024-11-18 01:10:57.852 +03:00 [DBG] Successfully validated the token.
2024-11-18 01:10:57.854 +03:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2024-11-18 01:10:57.863 +03:00 [INF] Authorization failed. These requirements were not met:
ClaimsAuthorizationRequirement:Claim.Type=city and Claim.Value is one of the following values: (Antwerp)
2024-11-18 01:10:57.867 +03:00 [INF] AuthenticationScheme: Bearer was forbidden.
2024-11-18 01:10:57.868 +03:00 [DBG] Connection id "0HN87AINTPSML" completed keep alive response.
2024-11-18 01:10:57.871 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7117/api/cities/2/pointsofinterest - - - 403 0 - 169.6998ms
2024-11-18 01:11:01.885 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7117/api/cities/1/pointsofinterest - -
2024-11-18 01:11:01.887 +03:00 [DBG] The request path  does not match the path filter
2024-11-18 01:11:01.889 +03:00 [DBG] 1 candidate(s) found for the request path '/api/cities/1/pointsofinterest'
2024-11-18 01:11:01.891 +03:00 [DBG] Endpoint 'WebApi1.Controllers.PointsOfInterestController.GetPointsOfInterest (WebApi1)' with route pattern 'api/cities/{cityId}/pointsofinterest' is valid for the request path '/api/cities/1/pointsofinterest'
2024-11-18 01:11:01.894 +03:00 [DBG] Request matched endpoint 'WebApi1.Controllers.PointsOfInterestController.GetPointsOfInterest (WebApi1)'
2024-11-18 01:11:01.899 +03:00 [DBG] Successfully validated the token.
2024-11-18 01:11:01.901 +03:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2024-11-18 01:11:01.903 +03:00 [INF] Authorization failed. These requirements were not met:
ClaimsAuthorizationRequirement:Claim.Type=city and Claim.Value is one of the following values: (Antwerp)
2024-11-18 01:11:01.905 +03:00 [INF] AuthenticationScheme: Bearer was forbidden.
2024-11-18 01:11:01.915 +03:00 [DBG] Connection id "0HN87AINTPSML" completed keep alive response.
2024-11-18 01:11:01.917 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7117/api/cities/1/pointsofinterest - - - 403 0 - 31.6491ms
2024-11-18 01:11:11.250 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7117/api/cities/3/pointsofinterest application/json 117
2024-11-18 01:11:11.251 +03:00 [DBG] POST requests are not supported
2024-11-18 01:11:11.253 +03:00 [DBG] 1 candidate(s) found for the request path '/api/cities/3/pointsofinterest'
2024-11-18 01:11:11.254 +03:00 [DBG] Endpoint 'WebApi1.Controllers.PointsOfInterestController.CreatePointOfInterest (WebApi1)' with route pattern 'api/cities/{cityId}/pointsofinterest' is valid for the request path '/api/cities/3/pointsofinterest'
2024-11-18 01:11:11.258 +03:00 [DBG] Request matched endpoint 'WebApi1.Controllers.PointsOfInterestController.CreatePointOfInterest (WebApi1)'
2024-11-18 01:11:11.260 +03:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-18 01:11:11.263 +03:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
ClaimsAuthorizationRequirement:Claim.Type=city and Claim.Value is one of the following values: (Antwerp)
2024-11-18 01:11:11.270 +03:00 [INF] AuthenticationScheme: Bearer was challenged.
2024-11-18 01:11:11.272 +03:00 [DBG] Connection id "0HN87AINTPSML" completed keep alive response.
2024-11-18 01:11:11.281 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7117/api/cities/3/pointsofinterest application/json 117 - 401 0 - 31.2533ms
2024-11-18 01:11:11.283 +03:00 [DBG] Connection id "0HN87AINTPSML", Request id "0HN87AINTPSML:00000005": started reading request body.
2024-11-18 01:11:11.286 +03:00 [DBG] Connection id "0HN87AINTPSML", Request id "0HN87AINTPSML:00000005": done reading request body.
2024-11-18 01:11:19.582 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7117/api/cities/3/pointsofinterest application/json 117
2024-11-18 01:11:19.584 +03:00 [DBG] POST requests are not supported
2024-11-18 01:11:19.585 +03:00 [DBG] 1 candidate(s) found for the request path '/api/cities/3/pointsofinterest'
2024-11-18 01:11:19.586 +03:00 [DBG] Endpoint 'WebApi1.Controllers.PointsOfInterestController.CreatePointOfInterest (WebApi1)' with route pattern 'api/cities/{cityId}/pointsofinterest' is valid for the request path '/api/cities/3/pointsofinterest'
2024-11-18 01:11:19.591 +03:00 [DBG] Request matched endpoint 'WebApi1.Controllers.PointsOfInterestController.CreatePointOfInterest (WebApi1)'
2024-11-18 01:11:19.594 +03:00 [DBG] Successfully validated the token.
2024-11-18 01:11:19.595 +03:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2024-11-18 01:11:19.597 +03:00 [INF] Authorization failed. These requirements were not met:
ClaimsAuthorizationRequirement:Claim.Type=city and Claim.Value is one of the following values: (Antwerp)
2024-11-18 01:11:19.600 +03:00 [INF] AuthenticationScheme: Bearer was forbidden.
2024-11-18 01:11:19.602 +03:00 [DBG] Connection id "0HN87AINTPSML" completed keep alive response.
2024-11-18 01:11:19.608 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7117/api/cities/3/pointsofinterest application/json 117 - 403 0 - 25.5755ms
2024-11-18 01:11:19.630 +03:00 [DBG] Connection id "0HN87AINTPSML", Request id "0HN87AINTPSML:00000006": started reading request body.
2024-11-18 01:11:19.633 +03:00 [DBG] Connection id "0HN87AINTPSML", Request id "0HN87AINTPSML:00000006": done reading request body.
2024-11-18 01:11:26.410 +03:00 [INF] Application is shutting down...
2024-11-18 01:11:26.411 +03:00 [DBG] Hosting stopping
2024-11-18 01:11:26.420 +03:00 [DBG] Connection id "0HN87AINTPSML" disconnecting.
2024-11-18 01:11:26.425 +03:00 [DBG] Connection id "0HN87AINTPSML" stopped.
2024-11-18 01:11:26.428 +03:00 [DBG] Connection id "0HN87AINTPSML" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-11-18 01:11:26.433 +03:00 [DBG] Hosting stopped
2024-11-18 01:11:44.171 +03:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2024-11-18 01:11:44.393 +03:00 [DBG] Hosting starting
2024-11-18 01:11:44.423 +03:00 [INF] User profile is available. Using 'C:\Users\DaRK1AnGE1-\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-11-18 01:11:44.433 +03:00 [DBG] Reading data from file 'C:\Users\DaRK1AnGE1-\AppData\Local\ASP.NET\DataProtection-Keys\key-7aaf1ab6-3338-4bbe-824d-412c9ce49ea3.xml'.
2024-11-18 01:11:44.461 +03:00 [DBG] Found key {7aaf1ab6-3338-4bbe-824d-412c9ce49ea3}.
2024-11-18 01:11:44.493 +03:00 [DBG] Considering key {7aaf1ab6-3338-4bbe-824d-412c9ce49ea3} with expiration date 2025-02-15 20:08:59Z as default key.
2024-11-18 01:11:44.501 +03:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-11-18 01:11:44.515 +03:00 [DBG] Decrypting secret element using Windows DPAPI.
2024-11-18 01:11:44.520 +03:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-11-18 01:11:44.538 +03:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2024-11-18 01:11:44.547 +03:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2024-11-18 01:11:44.560 +03:00 [DBG] Using key {7aaf1ab6-3338-4bbe-824d-412c9ce49ea3} as the default key.
2024-11-18 01:11:44.565 +03:00 [DBG] Key ring with default key {7aaf1ab6-3338-4bbe-824d-412c9ce49ea3} was loaded during application startup.
2024-11-18 01:11:44.669 +03:00 [DBG] Using development certificate: CN=localhost (Thumbprint: 9E758B43FC1DB07235D03E669781821F9B436A79)
2024-11-18 01:11:44.758 +03:00 [INF] Now listening on: https://localhost:7117
2024-11-18 01:11:44.763 +03:00 [INF] Now listening on: http://localhost:5211
2024-11-18 01:11:44.767 +03:00 [DBG] Loaded hosting startup assembly WebApi1
2024-11-18 01:11:44.772 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-11-18 01:11:44.778 +03:00 [INF] Hosting environment: Development
2024-11-18 01:11:44.779 +03:00 [INF] Content root path: E:\Asp\WebApi1\
2024-11-18 01:11:44.780 +03:00 [DBG] Hosting started
2024-11-18 01:11:51.595 +03:00 [DBG] Connection id "0HN87AJBA0EH6" received FIN.
2024-11-18 01:11:51.609 +03:00 [DBG] Connection id "0HN87AJBA0EH6" accepted.
2024-11-18 01:11:51.613 +03:00 [DBG] Connection id "0HN87AJBA0EH6" started.
2024-11-18 01:11:51.614 +03:00 [DBG] Connection id "0HN87AJBA0EH7" accepted.
2024-11-18 01:11:51.618 +03:00 [DBG] Connection id "0HN87AJBA0EH7" started.
2024-11-18 01:11:51.648 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2024-11-18 01:11:51.709 +03:00 [DBG] Connection id "0HN87AJBA0EH6" stopped.
2024-11-18 01:11:51.734 +03:00 [DBG] Connection id "0HN87AJBA0EH6" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-11-18 01:11:51.754 +03:00 [DBG] Connection 0HN87AJBA0EH7 established using the following protocol: "Tls12"
2024-11-18 01:11:51.841 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7117/api/authentication/authenticate application/json 114
2024-11-18 01:11:51.845 +03:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2024-11-18 01:11:51.881 +03:00 [DBG] POST requests are not supported
2024-11-18 01:11:52.099 +03:00 [DBG] 1 candidate(s) found for the request path '/api/authentication/authenticate'
2024-11-18 01:11:52.114 +03:00 [DBG] Endpoint 'WebApi1.Controllers.AuthenticationController.Authenticate (WebApi1)' with route pattern 'api/authentication/authenticate' is valid for the request path '/api/authentication/authenticate'
2024-11-18 01:11:52.161 +03:00 [DBG] Request matched endpoint 'WebApi1.Controllers.AuthenticationController.Authenticate (WebApi1)'
2024-11-18 01:11:52.226 +03:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-18 01:11:52.231 +03:00 [INF] Executing endpoint 'WebApi1.Controllers.AuthenticationController.Authenticate (WebApi1)'
2024-11-18 01:11:52.284 +03:00 [INF] Route matched with {action = "Authenticate", controller = "Authentication"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.ActionResult`1[System.String] Authenticate(AuthenticationRequestBody) on controller WebApi1.Controllers.AuthenticationController (WebApi1).
2024-11-18 01:11:52.294 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-18 01:11:52.297 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-18 01:11:52.299 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-11-18 01:11:52.306 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-18 01:11:52.308 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-11-18 01:11:52.314 +03:00 [DBG] Executing controller factory for controller WebApi1.Controllers.AuthenticationController (WebApi1)
2024-11-18 01:11:52.317 +03:00 [DBG] Executed controller factory for controller WebApi1.Controllers.AuthenticationController (WebApi1)
2024-11-18 01:11:52.332 +03:00 [DBG] Attempting to bind parameter 'authenticationRequestBody' of type 'WebApi1.Controllers.AuthenticationController+AuthenticationRequestBody' ...
2024-11-18 01:11:52.339 +03:00 [DBG] Attempting to bind parameter 'authenticationRequestBody' of type 'WebApi1.Controllers.AuthenticationController+AuthenticationRequestBody' using the name '' in request data ...
2024-11-18 01:11:52.350 +03:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonPatchInputFormatter' for content type 'application/json'.
2024-11-18 01:11:52.353 +03:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonInputFormatter' for content type 'application/json'.
2024-11-18 01:11:52.370 +03:00 [DBG] Connection id "0HN87AJBA0EH7", Request id "0HN87AJBA0EH7:00000002": started reading request body.
2024-11-18 01:11:52.378 +03:00 [DBG] Connection id "0HN87AJBA0EH7", Request id "0HN87AJBA0EH7:00000002": done reading request body.
2024-11-18 01:11:52.605 +03:00 [DBG] Done attempting to bind parameter 'authenticationRequestBody' of type 'WebApi1.Controllers.AuthenticationController+AuthenticationRequestBody'.
2024-11-18 01:11:52.608 +03:00 [DBG] Done attempting to bind parameter 'authenticationRequestBody' of type 'WebApi1.Controllers.AuthenticationController+AuthenticationRequestBody'.
2024-11-18 01:11:52.611 +03:00 [DBG] Attempting to validate the bound parameter 'authenticationRequestBody' of type 'WebApi1.Controllers.AuthenticationController+AuthenticationRequestBody' ...
2024-11-18 01:11:52.636 +03:00 [DBG] Done attempting to validate the bound parameter 'authenticationRequestBody' of type 'WebApi1.Controllers.AuthenticationController+AuthenticationRequestBody'.
2024-11-18 01:11:52.833 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-18 01:11:52.840 +03:00 [DBG] No information found on request to perform content negotiation.
2024-11-18 01:11:52.841 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-18 01:11:52.843 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-18 01:11:52.846 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter' and content type 'text/plain' to write the response.
2024-11-18 01:11:52.849 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.String'.
2024-11-18 01:11:52.868 +03:00 [INF] Executed action WebApi1.Controllers.AuthenticationController.Authenticate (WebApi1) in 543.5094ms
2024-11-18 01:11:52.873 +03:00 [INF] Executed endpoint 'WebApi1.Controllers.AuthenticationController.Authenticate (WebApi1)'
2024-11-18 01:11:52.875 +03:00 [DBG] Connection id "0HN87AJBA0EH7" completed keep alive response.
2024-11-18 01:11:52.879 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7117/api/authentication/authenticate application/json 114 - 200 - text/plain;+charset=utf-8 1045.9893ms
2024-11-18 01:12:03.182 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7117/api/cities/3/pointsofinterest application/json 117
2024-11-18 01:12:03.184 +03:00 [DBG] POST requests are not supported
2024-11-18 01:12:03.188 +03:00 [DBG] 1 candidate(s) found for the request path '/api/cities/3/pointsofinterest'
2024-11-18 01:12:03.190 +03:00 [DBG] Endpoint 'WebApi1.Controllers.PointsOfInterestController.CreatePointOfInterest (WebApi1)' with route pattern 'api/cities/{cityId}/pointsofinterest' is valid for the request path '/api/cities/3/pointsofinterest'
2024-11-18 01:12:03.193 +03:00 [DBG] Request matched endpoint 'WebApi1.Controllers.PointsOfInterestController.CreatePointOfInterest (WebApi1)'
2024-11-18 01:12:03.318 +03:00 [DBG] Successfully validated the token.
2024-11-18 01:12:03.322 +03:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2024-11-18 01:12:03.330 +03:00 [DBG] Authorization was successful.
2024-11-18 01:12:03.331 +03:00 [INF] Executing endpoint 'WebApi1.Controllers.PointsOfInterestController.CreatePointOfInterest (WebApi1)'
2024-11-18 01:12:03.356 +03:00 [INF] Route matched with {action = "CreatePointOfInterest", controller = "PointsOfInterest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[WebApi1.Models.PointOfInterestDto]] CreatePointOfInterest(Int32, WebApi1.Models.PointOfInterestForCreationDto) on controller WebApi1.Controllers.PointsOfInterestController (WebApi1).
2024-11-18 01:12:03.360 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-18 01:12:03.362 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-18 01:12:03.364 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-11-18 01:12:03.368 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-18 01:12:03.377 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-11-18 01:12:03.379 +03:00 [DBG] Executing controller factory for controller WebApi1.Controllers.PointsOfInterestController (WebApi1)
2024-11-18 01:12:03.549 +03:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2024-11-18 01:12:03.917 +03:00 [DBG] Executed controller factory for controller WebApi1.Controllers.PointsOfInterestController (WebApi1)
2024-11-18 01:12:03.920 +03:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2024-11-18 01:12:03.925 +03:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2024-11-18 01:12:03.930 +03:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2024-11-18 01:12:03.933 +03:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2024-11-18 01:12:03.939 +03:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2024-11-18 01:12:03.946 +03:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2024-11-18 01:12:03.950 +03:00 [DBG] Attempting to bind parameter 'pointOfInterest' of type 'WebApi1.Models.PointOfInterestForCreationDto' ...
2024-11-18 01:12:03.964 +03:00 [DBG] Attempting to bind parameter 'pointOfInterest' of type 'WebApi1.Models.PointOfInterestForCreationDto' using the name '' in request data ...
2024-11-18 01:12:03.975 +03:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonPatchInputFormatter' for content type 'application/json'.
2024-11-18 01:12:04.250 +03:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonInputFormatter' for content type 'application/json'.
2024-11-18 01:12:04.257 +03:00 [DBG] Connection id "0HN87AJBA0EH7", Request id "0HN87AJBA0EH7:00000003": started reading request body.
2024-11-18 01:12:04.261 +03:00 [DBG] Connection id "0HN87AJBA0EH7", Request id "0HN87AJBA0EH7:00000003": done reading request body.
2024-11-18 01:12:04.267 +03:00 [DBG] Done attempting to bind parameter 'pointOfInterest' of type 'WebApi1.Models.PointOfInterestForCreationDto'.
2024-11-18 01:12:04.274 +03:00 [DBG] Done attempting to bind parameter 'pointOfInterest' of type 'WebApi1.Models.PointOfInterestForCreationDto'.
2024-11-18 01:12:04.279 +03:00 [DBG] Attempting to validate the bound parameter 'pointOfInterest' of type 'WebApi1.Models.PointOfInterestForCreationDto' ...
2024-11-18 01:12:04.340 +03:00 [DBG] Done attempting to validate the bound parameter 'pointOfInterest' of type 'WebApi1.Models.PointOfInterestForCreationDto'.
2024-11-18 01:12:05.456 +03:00 [INF] Entity Framework Core 6.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.0' with options: None
2024-11-18 01:12:05.528 +03:00 [DBG] Compiling query expression: 
'DbSet<City>()
    .Any(c => c.Id == __cityId_0)'
2024-11-18 01:12:05.795 +03:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<bool>(
    asyncEnumerable: new SingleQueryingEnumerable<bool>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT EXISTS (
                SELECT 1
                FROM Cities AS c
                WHERE c.Id == @__cityId_0)), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, bool>, 
        WebApi1.DbContexts.CityInfoContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2024-11-18 01:12:05.863 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-18 01:12:05.921 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (50ms).
2024-11-18 01:12:05.933 +03:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2024-11-18 01:12:05.963 +03:00 [DBG] Opened connection to database 'main' on server 'E:\Asp\WebApi1\CityInfo.db'.
2024-11-18 01:12:05.987 +03:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0)
2024-11-18 01:12:06.039 +03:00 [INF] Executed DbCommand (61ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0)
2024-11-18 01:12:06.051 +03:00 [DBG] A data reader was disposed.
2024-11-18 01:12:06.061 +03:00 [DBG] Closing connection to database 'main' on server 'E:\Asp\WebApi1\CityInfo.db'.
2024-11-18 01:12:06.070 +03:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db'.
2024-11-18 01:12:06.106 +03:00 [DBG] Compiling query expression: 
'DbSet<City>()
    .Where(c => c.Id == __cityId_0)
    .FirstOrDefault()'
2024-11-18 01:12:06.176 +03:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<City>(
    asyncEnumerable: new SingleQueryingEnumerable<City>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: City.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: City.Description (string) MaxLength(200), 1], [Property: City.Name (string) Required MaxLength(50), 2] }
            SELECT TOP(1) c.Id, c.Description, c.Name
            FROM Cities AS c
            WHERE c.Id == @__cityId_0), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, City>, 
        WebApi1.DbContexts.CityInfoContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2024-11-18 01:12:06.192 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-18 01:12:06.194 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2024-11-18 01:12:06.196 +03:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2024-11-18 01:12:06.197 +03:00 [DBG] Opened connection to database 'main' on server 'E:\Asp\WebApi1\CityInfo.db'.
2024-11-18 01:12:06.200 +03:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Name"
FROM "Cities" AS "c"
WHERE "c"."Id" = @__cityId_0
LIMIT 1
2024-11-18 01:12:06.207 +03:00 [INF] Executed DbCommand (7ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Name"
FROM "Cities" AS "c"
WHERE "c"."Id" = @__cityId_0
LIMIT 1
2024-11-18 01:12:06.240 +03:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-11-18 01:12:06.311 +03:00 [DBG] A data reader was disposed.
2024-11-18 01:12:06.313 +03:00 [DBG] Closing connection to database 'main' on server 'E:\Asp\WebApi1\CityInfo.db'.
2024-11-18 01:12:06.315 +03:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db'.
2024-11-18 01:12:06.325 +03:00 [DBG] SaveChanges starting for 'CityInfoContext'.
2024-11-18 01:12:06.375 +03:00 [DBG] DetectChanges starting for 'CityInfoContext'.
2024-11-18 01:12:06.431 +03:00 [DBG] 1 entities were added and 0 entities were removed from navigation 'City.PointsOfInterest'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-11-18 01:12:06.540 +03:00 [DBG] 'CityInfoContext' generated a temporary value for the property 'Id.PointOfInterest'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-11-18 01:12:06.610 +03:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-11-18 01:12:06.625 +03:00 [DBG] DetectChanges completed for 'CityInfoContext'.
2024-11-18 01:12:06.689 +03:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2024-11-18 01:12:06.713 +03:00 [DBG] Opened connection to database 'main' on server 'E:\Asp\WebApi1\CityInfo.db'.
2024-11-18 01:12:06.720 +03:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2024-11-18 01:12:07.036 +03:00 [DBG] Began transaction with isolation level 'Serializable'.
2024-11-18 01:12:07.202 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-18 01:12:07.206 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (4ms).
2024-11-18 01:12:07.209 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (Size = 62), @p1='?' (Size = 13), @p2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "PointOfInterest" ("Description", "Name", "cityId")
VALUES (@p0, @p1, @p2);
SELECT "Id"
FROM "PointOfInterest"
WHERE changes() = 1 AND "rowid" = last_insert_rowid();
2024-11-18 01:12:07.287 +03:00 [INF] Executed DbCommand (78ms) [Parameters=[@p0='?' (Size = 62), @p1='?' (Size = 13), @p2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "PointOfInterest" ("Description", "Name", "cityId")
VALUES (@p0, @p1, @p2);
SELECT "Id"
FROM "PointOfInterest"
WHERE changes() = 1 AND "rowid" = last_insert_rowid();
2024-11-18 01:12:07.367 +03:00 [DBG] The foreign key property 'PointOfInterest.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2024-11-18 01:12:07.382 +03:00 [DBG] A data reader was disposed.
2024-11-18 01:12:07.388 +03:00 [DBG] Committing transaction.
2024-11-18 01:12:07.608 +03:00 [DBG] Committed transaction.
2024-11-18 01:12:07.612 +03:00 [DBG] Closing connection to database 'main' on server 'E:\Asp\WebApi1\CityInfo.db'.
2024-11-18 01:12:07.614 +03:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db'.
2024-11-18 01:12:07.618 +03:00 [DBG] Disposing transaction.
2024-11-18 01:12:07.637 +03:00 [DBG] An entity of type 'PointOfInterest' tracked by 'CityInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-11-18 01:12:07.642 +03:00 [DBG] SaveChanges completed for 'CityInfoContext' with 1 entities written to the database.
2024-11-18 01:12:07.670 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-18 01:12:07.675 +03:00 [DBG] No information found on request to perform content negotiation.
2024-11-18 01:12:07.677 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-18 01:12:07.680 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-18 01:12:07.681 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-18 01:12:07.684 +03:00 [INF] Executing CreatedAtRouteResult, writing value of type 'WebApi1.Models.PointOfInterestDto'.
2024-11-18 01:12:07.733 +03:00 [DBG] Found the endpoints ["WebApi1.Controllers.PointsOfInterestController.GetPointOfInterest (WebApi1)"] for address Microsoft.AspNetCore.Routing.RouteValuesAddress
2024-11-18 01:12:07.762 +03:00 [DBG] Successfully processed template api/cities/{cityId}/pointsofinterest/{pointofinterestid} for WebApi1.Controllers.PointsOfInterestController.GetPointOfInterest (WebApi1) resulting in /api/cities/3/pointsofinterest/9 and 
2024-11-18 01:12:07.779 +03:00 [DBG] Link generation succeeded for endpoints ["WebApi1.Controllers.PointsOfInterestController.GetPointOfInterest (WebApi1)"] with result /api/cities/3/pointsofinterest/9
2024-11-18 01:12:07.860 +03:00 [INF] Executed action WebApi1.Controllers.PointsOfInterestController.CreatePointOfInterest (WebApi1) in 4480.644ms
2024-11-18 01:12:07.862 +03:00 [INF] Executed endpoint 'WebApi1.Controllers.PointsOfInterestController.CreatePointOfInterest (WebApi1)'
2024-11-18 01:12:07.864 +03:00 [DBG] Connection id "0HN87AJBA0EH7" completed keep alive response.
2024-11-18 01:12:07.868 +03:00 [DBG] 'CityInfoContext' disposed.
2024-11-18 01:12:07.876 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7117/api/cities/3/pointsofinterest application/json 117 - 201 111 application/json;+charset=utf-8 4693.6973ms
2024-11-18 01:12:12.079 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7117/api/cities/2/pointsofinterest application/json 117
2024-11-18 01:12:12.081 +03:00 [DBG] POST requests are not supported
2024-11-18 01:12:12.082 +03:00 [DBG] 1 candidate(s) found for the request path '/api/cities/2/pointsofinterest'
2024-11-18 01:12:12.084 +03:00 [DBG] Endpoint 'WebApi1.Controllers.PointsOfInterestController.CreatePointOfInterest (WebApi1)' with route pattern 'api/cities/{cityId}/pointsofinterest' is valid for the request path '/api/cities/2/pointsofinterest'
2024-11-18 01:12:12.088 +03:00 [DBG] Request matched endpoint 'WebApi1.Controllers.PointsOfInterestController.CreatePointOfInterest (WebApi1)'
2024-11-18 01:12:12.095 +03:00 [DBG] Successfully validated the token.
2024-11-18 01:12:12.096 +03:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2024-11-18 01:12:12.099 +03:00 [DBG] Authorization was successful.
2024-11-18 01:12:12.100 +03:00 [INF] Executing endpoint 'WebApi1.Controllers.PointsOfInterestController.CreatePointOfInterest (WebApi1)'
2024-11-18 01:12:12.105 +03:00 [INF] Route matched with {action = "CreatePointOfInterest", controller = "PointsOfInterest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[WebApi1.Models.PointOfInterestDto]] CreatePointOfInterest(Int32, WebApi1.Models.PointOfInterestForCreationDto) on controller WebApi1.Controllers.PointsOfInterestController (WebApi1).
2024-11-18 01:12:12.110 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-18 01:12:12.113 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-18 01:12:12.116 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-11-18 01:12:12.120 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-18 01:12:12.123 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-11-18 01:12:12.128 +03:00 [DBG] Executing controller factory for controller WebApi1.Controllers.PointsOfInterestController (WebApi1)
2024-11-18 01:12:12.144 +03:00 [DBG] Executed controller factory for controller WebApi1.Controllers.PointsOfInterestController (WebApi1)
2024-11-18 01:12:12.147 +03:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2024-11-18 01:12:12.149 +03:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2024-11-18 01:12:12.155 +03:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2024-11-18 01:12:12.161 +03:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2024-11-18 01:12:12.164 +03:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2024-11-18 01:12:12.166 +03:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2024-11-18 01:12:12.170 +03:00 [DBG] Attempting to bind parameter 'pointOfInterest' of type 'WebApi1.Models.PointOfInterestForCreationDto' ...
2024-11-18 01:12:12.174 +03:00 [DBG] Attempting to bind parameter 'pointOfInterest' of type 'WebApi1.Models.PointOfInterestForCreationDto' using the name '' in request data ...
2024-11-18 01:12:12.176 +03:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonPatchInputFormatter' for content type 'application/json'.
2024-11-18 01:12:12.177 +03:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonInputFormatter' for content type 'application/json'.
2024-11-18 01:12:12.180 +03:00 [DBG] Connection id "0HN87AJBA0EH7", Request id "0HN87AJBA0EH7:00000004": started reading request body.
2024-11-18 01:12:12.192 +03:00 [DBG] Connection id "0HN87AJBA0EH7", Request id "0HN87AJBA0EH7:00000004": done reading request body.
2024-11-18 01:12:12.194 +03:00 [DBG] Done attempting to bind parameter 'pointOfInterest' of type 'WebApi1.Models.PointOfInterestForCreationDto'.
2024-11-18 01:12:12.196 +03:00 [DBG] Done attempting to bind parameter 'pointOfInterest' of type 'WebApi1.Models.PointOfInterestForCreationDto'.
2024-11-18 01:12:12.200 +03:00 [DBG] Attempting to validate the bound parameter 'pointOfInterest' of type 'WebApi1.Models.PointOfInterestForCreationDto' ...
2024-11-18 01:12:12.205 +03:00 [DBG] Done attempting to validate the bound parameter 'pointOfInterest' of type 'WebApi1.Models.PointOfInterestForCreationDto'.
2024-11-18 01:12:12.213 +03:00 [INF] Entity Framework Core 6.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.0' with options: None
2024-11-18 01:12:12.227 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-18 01:12:12.230 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2024-11-18 01:12:12.233 +03:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2024-11-18 01:12:12.236 +03:00 [DBG] Opened connection to database 'main' on server 'E:\Asp\WebApi1\CityInfo.db'.
2024-11-18 01:12:12.239 +03:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0)
2024-11-18 01:12:12.243 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0)
2024-11-18 01:12:12.248 +03:00 [DBG] A data reader was disposed.
2024-11-18 01:12:12.249 +03:00 [DBG] Closing connection to database 'main' on server 'E:\Asp\WebApi1\CityInfo.db'.
2024-11-18 01:12:12.253 +03:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db'.
2024-11-18 01:12:12.258 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-18 01:12:12.260 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2024-11-18 01:12:12.262 +03:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2024-11-18 01:12:12.264 +03:00 [DBG] Opened connection to database 'main' on server 'E:\Asp\WebApi1\CityInfo.db'.
2024-11-18 01:12:12.266 +03:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Name"
FROM "Cities" AS "c"
WHERE "c"."Id" = @__cityId_0
LIMIT 1
2024-11-18 01:12:12.271 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Name"
FROM "Cities" AS "c"
WHERE "c"."Id" = @__cityId_0
LIMIT 1
2024-11-18 01:12:12.277 +03:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-11-18 01:12:12.281 +03:00 [DBG] A data reader was disposed.
2024-11-18 01:12:12.282 +03:00 [DBG] Closing connection to database 'main' on server 'E:\Asp\WebApi1\CityInfo.db'.
2024-11-18 01:12:12.284 +03:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db'.
2024-11-18 01:12:12.287 +03:00 [DBG] SaveChanges starting for 'CityInfoContext'.
2024-11-18 01:12:12.290 +03:00 [DBG] DetectChanges starting for 'CityInfoContext'.
2024-11-18 01:12:12.292 +03:00 [DBG] 1 entities were added and 0 entities were removed from navigation 'City.PointsOfInterest'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-11-18 01:12:12.297 +03:00 [DBG] 'CityInfoContext' generated a temporary value for the property 'Id.PointOfInterest'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-11-18 01:12:12.300 +03:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-11-18 01:12:12.304 +03:00 [DBG] DetectChanges completed for 'CityInfoContext'.
2024-11-18 01:12:12.307 +03:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2024-11-18 01:12:12.309 +03:00 [DBG] Opened connection to database 'main' on server 'E:\Asp\WebApi1\CityInfo.db'.
2024-11-18 01:12:12.310 +03:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2024-11-18 01:12:12.313 +03:00 [DBG] Began transaction with isolation level 'Serializable'.
2024-11-18 01:12:12.315 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-18 01:12:12.317 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2024-11-18 01:12:12.322 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (Size = 62), @p1='?' (Size = 13), @p2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "PointOfInterest" ("Description", "Name", "cityId")
VALUES (@p0, @p1, @p2);
SELECT "Id"
FROM "PointOfInterest"
WHERE changes() = 1 AND "rowid" = last_insert_rowid();
2024-11-18 01:12:12.327 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@p0='?' (Size = 62), @p1='?' (Size = 13), @p2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "PointOfInterest" ("Description", "Name", "cityId")
VALUES (@p0, @p1, @p2);
SELECT "Id"
FROM "PointOfInterest"
WHERE changes() = 1 AND "rowid" = last_insert_rowid();
2024-11-18 01:12:12.333 +03:00 [DBG] The foreign key property 'PointOfInterest.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2024-11-18 01:12:12.336 +03:00 [DBG] A data reader was disposed.
2024-11-18 01:12:12.339 +03:00 [DBG] Committing transaction.
2024-11-18 01:12:12.378 +03:00 [DBG] Committed transaction.
2024-11-18 01:12:12.380 +03:00 [DBG] Closing connection to database 'main' on server 'E:\Asp\WebApi1\CityInfo.db'.
2024-11-18 01:12:12.382 +03:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db'.
2024-11-18 01:12:12.384 +03:00 [DBG] Disposing transaction.
2024-11-18 01:12:12.388 +03:00 [DBG] An entity of type 'PointOfInterest' tracked by 'CityInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-11-18 01:12:12.391 +03:00 [DBG] SaveChanges completed for 'CityInfoContext' with 1 entities written to the database.
2024-11-18 01:12:12.393 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-18 01:12:12.400 +03:00 [DBG] No information found on request to perform content negotiation.
2024-11-18 01:12:12.402 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-18 01:12:12.406 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-18 01:12:12.408 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-18 01:12:12.410 +03:00 [INF] Executing CreatedAtRouteResult, writing value of type 'WebApi1.Models.PointOfInterestDto'.
2024-11-18 01:12:12.412 +03:00 [DBG] Found the endpoints ["WebApi1.Controllers.PointsOfInterestController.GetPointOfInterest (WebApi1)"] for address Microsoft.AspNetCore.Routing.RouteValuesAddress
2024-11-18 01:12:12.414 +03:00 [DBG] Successfully processed template api/cities/{cityId}/pointsofinterest/{pointofinterestid} for WebApi1.Controllers.PointsOfInterestController.GetPointOfInterest (WebApi1) resulting in /api/cities/2/pointsofinterest/10 and 
2024-11-18 01:12:12.417 +03:00 [DBG] Link generation succeeded for endpoints ["WebApi1.Controllers.PointsOfInterestController.GetPointOfInterest (WebApi1)"] with result /api/cities/2/pointsofinterest/10
2024-11-18 01:12:12.449 +03:00 [INF] Executed action WebApi1.Controllers.PointsOfInterestController.CreatePointOfInterest (WebApi1) in 321.7643ms
2024-11-18 01:12:12.467 +03:00 [INF] Executed endpoint 'WebApi1.Controllers.PointsOfInterestController.CreatePointOfInterest (WebApi1)'
2024-11-18 01:12:12.469 +03:00 [DBG] Connection id "0HN87AJBA0EH7" completed keep alive response.
2024-11-18 01:12:12.480 +03:00 [DBG] 'CityInfoContext' disposed.
2024-11-18 01:12:12.483 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7117/api/cities/2/pointsofinterest application/json 117 - 201 112 application/json;+charset=utf-8 404.0533ms
2024-11-18 01:12:17.841 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7117/api/cities/1/pointsofinterest application/json 117
2024-11-18 01:12:17.842 +03:00 [DBG] POST requests are not supported
2024-11-18 01:12:17.844 +03:00 [DBG] 1 candidate(s) found for the request path '/api/cities/1/pointsofinterest'
2024-11-18 01:12:17.845 +03:00 [DBG] Endpoint 'WebApi1.Controllers.PointsOfInterestController.CreatePointOfInterest (WebApi1)' with route pattern 'api/cities/{cityId}/pointsofinterest' is valid for the request path '/api/cities/1/pointsofinterest'
2024-11-18 01:12:17.847 +03:00 [DBG] Request matched endpoint 'WebApi1.Controllers.PointsOfInterestController.CreatePointOfInterest (WebApi1)'
2024-11-18 01:12:17.850 +03:00 [DBG] Successfully validated the token.
2024-11-18 01:12:17.856 +03:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2024-11-18 01:12:17.859 +03:00 [DBG] Authorization was successful.
2024-11-18 01:12:17.861 +03:00 [INF] Executing endpoint 'WebApi1.Controllers.PointsOfInterestController.CreatePointOfInterest (WebApi1)'
2024-11-18 01:12:17.862 +03:00 [INF] Route matched with {action = "CreatePointOfInterest", controller = "PointsOfInterest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[WebApi1.Models.PointOfInterestDto]] CreatePointOfInterest(Int32, WebApi1.Models.PointOfInterestForCreationDto) on controller WebApi1.Controllers.PointsOfInterestController (WebApi1).
2024-11-18 01:12:17.874 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-18 01:12:17.876 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-18 01:12:17.878 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-11-18 01:12:17.881 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-18 01:12:17.883 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-11-18 01:12:17.886 +03:00 [DBG] Executing controller factory for controller WebApi1.Controllers.PointsOfInterestController (WebApi1)
2024-11-18 01:12:17.896 +03:00 [DBG] Executed controller factory for controller WebApi1.Controllers.PointsOfInterestController (WebApi1)
2024-11-18 01:12:17.899 +03:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2024-11-18 01:12:17.902 +03:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2024-11-18 01:12:17.908 +03:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2024-11-18 01:12:17.912 +03:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2024-11-18 01:12:17.914 +03:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2024-11-18 01:12:17.916 +03:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2024-11-18 01:12:17.918 +03:00 [DBG] Attempting to bind parameter 'pointOfInterest' of type 'WebApi1.Models.PointOfInterestForCreationDto' ...
2024-11-18 01:12:17.924 +03:00 [DBG] Attempting to bind parameter 'pointOfInterest' of type 'WebApi1.Models.PointOfInterestForCreationDto' using the name '' in request data ...
2024-11-18 01:12:17.927 +03:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonPatchInputFormatter' for content type 'application/json'.
2024-11-18 01:12:17.930 +03:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonInputFormatter' for content type 'application/json'.
2024-11-18 01:12:17.934 +03:00 [DBG] Connection id "0HN87AJBA0EH7", Request id "0HN87AJBA0EH7:00000005": started reading request body.
2024-11-18 01:12:17.939 +03:00 [DBG] Connection id "0HN87AJBA0EH7", Request id "0HN87AJBA0EH7:00000005": done reading request body.
2024-11-18 01:12:17.942 +03:00 [DBG] Done attempting to bind parameter 'pointOfInterest' of type 'WebApi1.Models.PointOfInterestForCreationDto'.
2024-11-18 01:12:17.945 +03:00 [DBG] Done attempting to bind parameter 'pointOfInterest' of type 'WebApi1.Models.PointOfInterestForCreationDto'.
2024-11-18 01:12:17.946 +03:00 [DBG] Attempting to validate the bound parameter 'pointOfInterest' of type 'WebApi1.Models.PointOfInterestForCreationDto' ...
2024-11-18 01:12:17.949 +03:00 [DBG] Done attempting to validate the bound parameter 'pointOfInterest' of type 'WebApi1.Models.PointOfInterestForCreationDto'.
2024-11-18 01:12:18.067 +03:00 [INF] Entity Framework Core 6.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.0' with options: None
2024-11-18 01:12:18.078 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-18 01:12:18.092 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (13ms).
2024-11-18 01:12:18.096 +03:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2024-11-18 01:12:18.099 +03:00 [DBG] Opened connection to database 'main' on server 'E:\Asp\WebApi1\CityInfo.db'.
2024-11-18 01:12:18.102 +03:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0)
2024-11-18 01:12:18.111 +03:00 [INF] Executed DbCommand (9ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0)
2024-11-18 01:12:18.115 +03:00 [DBG] A data reader was disposed.
2024-11-18 01:12:18.117 +03:00 [DBG] Closing connection to database 'main' on server 'E:\Asp\WebApi1\CityInfo.db'.
2024-11-18 01:12:18.123 +03:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db'.
2024-11-18 01:12:18.126 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-18 01:12:18.127 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2024-11-18 01:12:18.129 +03:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2024-11-18 01:12:18.132 +03:00 [DBG] Opened connection to database 'main' on server 'E:\Asp\WebApi1\CityInfo.db'.
2024-11-18 01:12:18.133 +03:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Name"
FROM "Cities" AS "c"
WHERE "c"."Id" = @__cityId_0
LIMIT 1
2024-11-18 01:12:18.142 +03:00 [INF] Executed DbCommand (9ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Name"
FROM "Cities" AS "c"
WHERE "c"."Id" = @__cityId_0
LIMIT 1
2024-11-18 01:12:18.146 +03:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-11-18 01:12:18.148 +03:00 [DBG] A data reader was disposed.
2024-11-18 01:12:18.149 +03:00 [DBG] Closing connection to database 'main' on server 'E:\Asp\WebApi1\CityInfo.db'.
2024-11-18 01:12:18.151 +03:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db'.
2024-11-18 01:12:18.162 +03:00 [DBG] SaveChanges starting for 'CityInfoContext'.
2024-11-18 01:12:18.164 +03:00 [DBG] DetectChanges starting for 'CityInfoContext'.
2024-11-18 01:12:18.166 +03:00 [DBG] 1 entities were added and 0 entities were removed from navigation 'City.PointsOfInterest'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-11-18 01:12:18.168 +03:00 [DBG] 'CityInfoContext' generated a temporary value for the property 'Id.PointOfInterest'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-11-18 01:12:18.177 +03:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-11-18 01:12:18.179 +03:00 [DBG] DetectChanges completed for 'CityInfoContext'.
2024-11-18 01:12:18.180 +03:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2024-11-18 01:12:18.182 +03:00 [DBG] Opened connection to database 'main' on server 'E:\Asp\WebApi1\CityInfo.db'.
2024-11-18 01:12:18.188 +03:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2024-11-18 01:12:18.190 +03:00 [DBG] Began transaction with isolation level 'Serializable'.
2024-11-18 01:12:18.192 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-18 01:12:18.193 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2024-11-18 01:12:18.195 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (Size = 62), @p1='?' (Size = 13), @p2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "PointOfInterest" ("Description", "Name", "cityId")
VALUES (@p0, @p1, @p2);
SELECT "Id"
FROM "PointOfInterest"
WHERE changes() = 1 AND "rowid" = last_insert_rowid();
2024-11-18 01:12:18.200 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@p0='?' (Size = 62), @p1='?' (Size = 13), @p2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "PointOfInterest" ("Description", "Name", "cityId")
VALUES (@p0, @p1, @p2);
SELECT "Id"
FROM "PointOfInterest"
WHERE changes() = 1 AND "rowid" = last_insert_rowid();
2024-11-18 01:12:18.209 +03:00 [DBG] The foreign key property 'PointOfInterest.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2024-11-18 01:12:18.211 +03:00 [DBG] A data reader was disposed.
2024-11-18 01:12:18.212 +03:00 [DBG] Committing transaction.
2024-11-18 01:12:18.256 +03:00 [DBG] Committed transaction.
2024-11-18 01:12:18.257 +03:00 [DBG] Closing connection to database 'main' on server 'E:\Asp\WebApi1\CityInfo.db'.
2024-11-18 01:12:18.259 +03:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db'.
2024-11-18 01:12:18.261 +03:00 [DBG] Disposing transaction.
2024-11-18 01:12:18.263 +03:00 [DBG] An entity of type 'PointOfInterest' tracked by 'CityInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-11-18 01:12:18.265 +03:00 [DBG] SaveChanges completed for 'CityInfoContext' with 1 entities written to the database.
2024-11-18 01:12:18.267 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-18 01:12:18.274 +03:00 [DBG] No information found on request to perform content negotiation.
2024-11-18 01:12:18.275 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-18 01:12:18.277 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-18 01:12:18.278 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-18 01:12:18.280 +03:00 [INF] Executing CreatedAtRouteResult, writing value of type 'WebApi1.Models.PointOfInterestDto'.
2024-11-18 01:12:18.282 +03:00 [DBG] Found the endpoints ["WebApi1.Controllers.PointsOfInterestController.GetPointOfInterest (WebApi1)"] for address Microsoft.AspNetCore.Routing.RouteValuesAddress
2024-11-18 01:12:18.288 +03:00 [DBG] Successfully processed template api/cities/{cityId}/pointsofinterest/{pointofinterestid} for WebApi1.Controllers.PointsOfInterestController.GetPointOfInterest (WebApi1) resulting in /api/cities/1/pointsofinterest/11 and 
2024-11-18 01:12:18.293 +03:00 [DBG] Link generation succeeded for endpoints ["WebApi1.Controllers.PointsOfInterestController.GetPointOfInterest (WebApi1)"] with result /api/cities/1/pointsofinterest/11
2024-11-18 01:12:18.297 +03:00 [INF] Executed action WebApi1.Controllers.PointsOfInterestController.CreatePointOfInterest (WebApi1) in 410.8201ms
2024-11-18 01:12:18.302 +03:00 [INF] Executed endpoint 'WebApi1.Controllers.PointsOfInterestController.CreatePointOfInterest (WebApi1)'
2024-11-18 01:12:18.305 +03:00 [DBG] Connection id "0HN87AJBA0EH7" completed keep alive response.
2024-11-18 01:12:18.307 +03:00 [DBG] 'CityInfoContext' disposed.
2024-11-18 01:12:18.309 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7117/api/cities/1/pointsofinterest application/json 117 - 201 112 application/json;+charset=utf-8 467.9134ms
2024-11-18 01:12:46.440 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7117/api/cities/1/pointsofinterest - -
2024-11-18 01:12:46.449 +03:00 [DBG] The request path  does not match the path filter
2024-11-18 01:12:46.451 +03:00 [DBG] 1 candidate(s) found for the request path '/api/cities/1/pointsofinterest'
2024-11-18 01:12:46.454 +03:00 [DBG] Endpoint 'WebApi1.Controllers.PointsOfInterestController.GetPointsOfInterest (WebApi1)' with route pattern 'api/cities/{cityId}/pointsofinterest' is valid for the request path '/api/cities/1/pointsofinterest'
2024-11-18 01:12:46.456 +03:00 [DBG] Request matched endpoint 'WebApi1.Controllers.PointsOfInterestController.GetPointsOfInterest (WebApi1)'
2024-11-18 01:12:46.460 +03:00 [DBG] Successfully validated the token.
2024-11-18 01:12:46.461 +03:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2024-11-18 01:12:46.462 +03:00 [DBG] Authorization was successful.
2024-11-18 01:12:46.463 +03:00 [INF] Executing endpoint 'WebApi1.Controllers.PointsOfInterestController.GetPointsOfInterest (WebApi1)'
2024-11-18 01:12:46.479 +03:00 [INF] Route matched with {action = "GetPointsOfInterest", controller = "PointsOfInterest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[WebApi1.Models.PointOfInterestDto]]] GetPointsOfInterest(Int32) on controller WebApi1.Controllers.PointsOfInterestController (WebApi1).
2024-11-18 01:12:46.483 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-18 01:12:46.488 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-18 01:12:46.498 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-11-18 01:12:46.508 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-18 01:12:46.510 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-11-18 01:12:46.512 +03:00 [DBG] Executing controller factory for controller WebApi1.Controllers.PointsOfInterestController (WebApi1)
2024-11-18 01:12:46.514 +03:00 [DBG] Executed controller factory for controller WebApi1.Controllers.PointsOfInterestController (WebApi1)
2024-11-18 01:12:46.516 +03:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2024-11-18 01:12:46.517 +03:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2024-11-18 01:12:46.523 +03:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2024-11-18 01:12:46.525 +03:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2024-11-18 01:12:46.527 +03:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2024-11-18 01:12:46.529 +03:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2024-11-18 01:12:46.534 +03:00 [INF] Entity Framework Core 6.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.0' with options: None
2024-11-18 01:12:46.543 +03:00 [DBG] Compiling query expression: 
'DbSet<City>()
    .Any(c => c.Id == __cityId_0 && c.Name == __cityName_1)'
2024-11-18 01:12:46.549 +03:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<bool>(
    asyncEnumerable: new SingleQueryingEnumerable<bool>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT EXISTS (
                SELECT 1
                FROM Cities AS c
                WHERE (c.Id == @__cityId_0) && (c.Name == @__cityName_1))), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, bool>, 
        WebApi1.DbContexts.CityInfoContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2024-11-18 01:12:46.558 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-18 01:12:46.559 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2024-11-18 01:12:46.561 +03:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2024-11-18 01:12:46.563 +03:00 [DBG] Opened connection to database 'main' on server 'E:\Asp\WebApi1\CityInfo.db'.
2024-11-18 01:12:46.565 +03:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32), @__cityName_1='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE ("c"."Id" = @__cityId_0) AND ("c"."Name" = @__cityName_1))
2024-11-18 01:12:46.572 +03:00 [INF] Executed DbCommand (7ms) [Parameters=[@__cityId_0='?' (DbType = Int32), @__cityName_1='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE ("c"."Id" = @__cityId_0) AND ("c"."Name" = @__cityName_1))
2024-11-18 01:12:46.578 +03:00 [DBG] A data reader was disposed.
2024-11-18 01:12:46.579 +03:00 [DBG] Closing connection to database 'main' on server 'E:\Asp\WebApi1\CityInfo.db'.
2024-11-18 01:12:46.581 +03:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db'.
2024-11-18 01:12:46.588 +03:00 [INF] Executing ForbidResult with authentication schemes ([]).
2024-11-18 01:12:46.591 +03:00 [INF] AuthenticationScheme: Bearer was forbidden.
2024-11-18 01:12:46.593 +03:00 [INF] Executed action WebApi1.Controllers.PointsOfInterestController.GetPointsOfInterest (WebApi1) in 80.4605ms
2024-11-18 01:12:46.595 +03:00 [INF] Executed endpoint 'WebApi1.Controllers.PointsOfInterestController.GetPointsOfInterest (WebApi1)'
2024-11-18 01:12:46.597 +03:00 [DBG] Connection id "0HN87AJBA0EH7" completed keep alive response.
2024-11-18 01:12:46.599 +03:00 [DBG] 'CityInfoContext' disposed.
2024-11-18 01:12:46.607 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7117/api/cities/1/pointsofinterest - - - 403 0 - 167.2941ms
2024-11-18 01:12:50.882 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7117/api/cities - -
2024-11-18 01:12:50.884 +03:00 [DBG] The request path  does not match the path filter
2024-11-18 01:12:50.886 +03:00 [DBG] 1 candidate(s) found for the request path '/api/cities'
2024-11-18 01:12:50.888 +03:00 [DBG] Endpoint 'WebApi1.Controllers.CitiesController.GetCities (WebApi1)' with route pattern 'api/cities' is valid for the request path '/api/cities'
2024-11-18 01:12:50.891 +03:00 [DBG] Request matched endpoint 'WebApi1.Controllers.CitiesController.GetCities (WebApi1)'
2024-11-18 01:12:50.893 +03:00 [DBG] Successfully validated the token.
2024-11-18 01:12:50.895 +03:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2024-11-18 01:12:50.897 +03:00 [DBG] Authorization was successful.
2024-11-18 01:12:50.899 +03:00 [INF] Executing endpoint 'WebApi1.Controllers.CitiesController.GetCities (WebApi1)'
2024-11-18 01:12:50.915 +03:00 [INF] Route matched with {action = "GetCities", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[WebApi1.Models.CityWithoutPointOfInterestDto]]] GetCities(System.String, System.String, Int32, Int32) on controller WebApi1.Controllers.CitiesController (WebApi1).
2024-11-18 01:12:50.920 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-18 01:12:50.923 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-18 01:12:50.927 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-11-18 01:12:50.930 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-18 01:12:50.932 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-11-18 01:12:50.941 +03:00 [DBG] Executing controller factory for controller WebApi1.Controllers.CitiesController (WebApi1)
2024-11-18 01:12:50.943 +03:00 [DBG] Executed controller factory for controller WebApi1.Controllers.CitiesController (WebApi1)
2024-11-18 01:12:50.945 +03:00 [DBG] Attempting to bind parameter 'name' of type 'System.String' ...
2024-11-18 01:12:50.947 +03:00 [DBG] Attempting to bind parameter 'name' of type 'System.String' using the name '' in request data ...
2024-11-18 01:12:50.949 +03:00 [DBG] Could not find a value in the request with name '' for binding parameter 'name' of type 'System.String'.
2024-11-18 01:12:50.961 +03:00 [DBG] Done attempting to bind parameter 'name' of type 'System.String'.
2024-11-18 01:12:50.964 +03:00 [DBG] Done attempting to bind parameter 'name' of type 'System.String'.
2024-11-18 01:12:50.970 +03:00 [DBG] Attempting to validate the bound parameter 'name' of type 'System.String' ...
2024-11-18 01:12:50.974 +03:00 [DBG] Done attempting to validate the bound parameter 'name' of type 'System.String'.
2024-11-18 01:12:50.976 +03:00 [DBG] Attempting to bind parameter 'searchQuery' of type 'System.String' ...
2024-11-18 01:12:50.978 +03:00 [DBG] Attempting to bind parameter 'searchQuery' of type 'System.String' using the name '' in request data ...
2024-11-18 01:12:50.980 +03:00 [DBG] Could not find a value in the request with name '' for binding parameter 'searchQuery' of type 'System.String'.
2024-11-18 01:12:50.982 +03:00 [DBG] Done attempting to bind parameter 'searchQuery' of type 'System.String'.
2024-11-18 01:12:50.985 +03:00 [DBG] Done attempting to bind parameter 'searchQuery' of type 'System.String'.
2024-11-18 01:12:50.990 +03:00 [DBG] Attempting to validate the bound parameter 'searchQuery' of type 'System.String' ...
2024-11-18 01:12:50.995 +03:00 [DBG] Done attempting to validate the bound parameter 'searchQuery' of type 'System.String'.
2024-11-18 01:12:50.998 +03:00 [DBG] Attempting to bind parameter 'pageNumber' of type 'System.Int32' ...
2024-11-18 01:12:51.000 +03:00 [DBG] Attempting to bind parameter 'pageNumber' of type 'System.Int32' using the name '' in request data ...
2024-11-18 01:12:51.003 +03:00 [DBG] Could not find a value in the request with name '' for binding parameter 'pageNumber' of type 'System.Int32'.
2024-11-18 01:12:51.009 +03:00 [DBG] Done attempting to bind parameter 'pageNumber' of type 'System.Int32'.
2024-11-18 01:12:51.011 +03:00 [DBG] Done attempting to bind parameter 'pageNumber' of type 'System.Int32'.
2024-11-18 01:12:51.012 +03:00 [DBG] Attempting to validate the bound parameter 'pageNumber' of type 'System.Int32' ...
2024-11-18 01:12:51.014 +03:00 [DBG] Done attempting to validate the bound parameter 'pageNumber' of type 'System.Int32'.
2024-11-18 01:12:51.017 +03:00 [DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' ...
2024-11-18 01:12:51.025 +03:00 [DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' using the name '' in request data ...
2024-11-18 01:12:51.027 +03:00 [DBG] Could not find a value in the request with name '' for binding parameter 'pageSize' of type 'System.Int32'.
2024-11-18 01:12:51.029 +03:00 [DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
2024-11-18 01:12:51.031 +03:00 [DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
2024-11-18 01:12:51.033 +03:00 [DBG] Attempting to validate the bound parameter 'pageSize' of type 'System.Int32' ...
2024-11-18 01:12:51.038 +03:00 [DBG] Done attempting to validate the bound parameter 'pageSize' of type 'System.Int32'.
2024-11-18 01:12:51.047 +03:00 [INF] Entity Framework Core 6.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.0' with options: None
2024-11-18 01:12:51.057 +03:00 [DBG] Compiling query expression: 
'DbSet<City>()
    .Count()'
2024-11-18 01:12:51.078 +03:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<int>(
    asyncEnumerable: new SingleQueryingEnumerable<int>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT COUNT(*)
            FROM Cities AS c), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, int>, 
        WebApi1.DbContexts.CityInfoContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2024-11-18 01:12:51.110 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-18 01:12:51.113 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2024-11-18 01:12:51.114 +03:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2024-11-18 01:12:51.116 +03:00 [DBG] Opened connection to database 'main' on server 'E:\Asp\WebApi1\CityInfo.db'.
2024-11-18 01:12:51.122 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "Cities" AS "c"
2024-11-18 01:12:51.125 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "Cities" AS "c"
2024-11-18 01:12:51.129 +03:00 [DBG] A data reader was disposed.
2024-11-18 01:12:51.130 +03:00 [DBG] Closing connection to database 'main' on server 'E:\Asp\WebApi1\CityInfo.db'.
2024-11-18 01:12:51.132 +03:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db'.
2024-11-18 01:12:51.149 +03:00 [DBG] Compiling query expression: 
'DbSet<City>()
    .OrderBy(c => c.Name)
    .Skip(__p_0)
    .Take(__p_1)'
2024-11-18 01:12:51.165 +03:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<City>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: City.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: City.Description (string) MaxLength(200), 1], [Property: City.Name (string) Required MaxLength(50), 2] }
        SELECT c.Id, c.Description, c.Name
        FROM Cities AS c
        ORDER BY c.Name ASC
        OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, City>, 
    WebApi1.DbContexts.CityInfoContext, 
    False, 
    False, 
    True
)'
2024-11-18 01:12:51.173 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-18 01:12:51.175 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2024-11-18 01:12:51.177 +03:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2024-11-18 01:12:51.179 +03:00 [DBG] Opened connection to database 'main' on server 'E:\Asp\WebApi1\CityInfo.db'.
2024-11-18 01:12:51.181 +03:00 [DBG] Executing DbCommand [Parameters=[@__p_1='?' (DbType = Int32), @__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Name"
FROM "Cities" AS "c"
ORDER BY "c"."Name"
LIMIT @__p_1 OFFSET @__p_0
2024-11-18 01:12:51.189 +03:00 [INF] Executed DbCommand (9ms) [Parameters=[@__p_1='?' (DbType = Int32), @__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Name"
FROM "Cities" AS "c"
ORDER BY "c"."Name"
LIMIT @__p_1 OFFSET @__p_0
2024-11-18 01:12:51.194 +03:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-11-18 01:12:51.196 +03:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-11-18 01:12:51.199 +03:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-11-18 01:12:51.202 +03:00 [DBG] A data reader was disposed.
2024-11-18 01:12:51.205 +03:00 [DBG] Closing connection to database 'main' on server 'E:\Asp\WebApi1\CityInfo.db'.
2024-11-18 01:12:51.211 +03:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db'.
2024-11-18 01:12:51.247 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-18 01:12:51.258 +03:00 [DBG] No information found on request to perform content negotiation.
2024-11-18 01:12:51.259 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-18 01:12:51.261 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-18 01:12:51.262 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-18 01:12:51.265 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[WebApi1.Models.CityWithoutPointOfInterestDto, WebApi1, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-18 01:12:51.290 +03:00 [INF] Executed action WebApi1.Controllers.CitiesController.GetCities (WebApi1) in 349.2035ms
2024-11-18 01:12:51.314 +03:00 [INF] Executed endpoint 'WebApi1.Controllers.CitiesController.GetCities (WebApi1)'
2024-11-18 01:12:51.316 +03:00 [DBG] Connection id "0HN87AJBA0EH7" completed keep alive response.
2024-11-18 01:12:51.328 +03:00 [DBG] 'CityInfoContext' disposed.
2024-11-18 01:12:51.331 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7117/api/cities - - - 200 254 application/json;+charset=utf-8 449.0485ms
2024-11-18 01:13:03.746 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7117/api/cities/1/pointsofinterest application/json 117
2024-11-18 01:13:03.748 +03:00 [DBG] POST requests are not supported
2024-11-18 01:13:03.749 +03:00 [DBG] 1 candidate(s) found for the request path '/api/cities/1/pointsofinterest'
2024-11-18 01:13:03.751 +03:00 [DBG] Endpoint 'WebApi1.Controllers.PointsOfInterestController.CreatePointOfInterest (WebApi1)' with route pattern 'api/cities/{cityId}/pointsofinterest' is valid for the request path '/api/cities/1/pointsofinterest'
2024-11-18 01:13:03.755 +03:00 [DBG] Request matched endpoint 'WebApi1.Controllers.PointsOfInterestController.CreatePointOfInterest (WebApi1)'
2024-11-18 01:13:03.758 +03:00 [DBG] Successfully validated the token.
2024-11-18 01:13:03.759 +03:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2024-11-18 01:13:03.761 +03:00 [DBG] Authorization was successful.
2024-11-18 01:13:03.763 +03:00 [INF] Executing endpoint 'WebApi1.Controllers.PointsOfInterestController.CreatePointOfInterest (WebApi1)'
2024-11-18 01:13:03.764 +03:00 [INF] Route matched with {action = "CreatePointOfInterest", controller = "PointsOfInterest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[WebApi1.Models.PointOfInterestDto]] CreatePointOfInterest(Int32, WebApi1.Models.PointOfInterestForCreationDto) on controller WebApi1.Controllers.PointsOfInterestController (WebApi1).
2024-11-18 01:13:03.771 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-18 01:13:03.776 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-18 01:13:03.778 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-11-18 01:13:03.781 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-18 01:13:03.784 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-11-18 01:13:03.787 +03:00 [DBG] Executing controller factory for controller WebApi1.Controllers.PointsOfInterestController (WebApi1)
2024-11-18 01:13:03.790 +03:00 [DBG] Executed controller factory for controller WebApi1.Controllers.PointsOfInterestController (WebApi1)
2024-11-18 01:13:03.793 +03:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2024-11-18 01:13:03.795 +03:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2024-11-18 01:13:03.797 +03:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2024-11-18 01:13:03.799 +03:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2024-11-18 01:13:03.804 +03:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2024-11-18 01:13:03.808 +03:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2024-11-18 01:13:03.809 +03:00 [DBG] Attempting to bind parameter 'pointOfInterest' of type 'WebApi1.Models.PointOfInterestForCreationDto' ...
2024-11-18 01:13:03.811 +03:00 [DBG] Attempting to bind parameter 'pointOfInterest' of type 'WebApi1.Models.PointOfInterestForCreationDto' using the name '' in request data ...
2024-11-18 01:13:03.813 +03:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonPatchInputFormatter' for content type 'application/json'.
2024-11-18 01:13:03.815 +03:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonInputFormatter' for content type 'application/json'.
2024-11-18 01:13:03.820 +03:00 [DBG] Connection id "0HN87AJBA0EH7", Request id "0HN87AJBA0EH7:00000008": started reading request body.
2024-11-18 01:13:03.823 +03:00 [DBG] Connection id "0HN87AJBA0EH7", Request id "0HN87AJBA0EH7:00000008": done reading request body.
2024-11-18 01:13:03.826 +03:00 [DBG] Done attempting to bind parameter 'pointOfInterest' of type 'WebApi1.Models.PointOfInterestForCreationDto'.
2024-11-18 01:13:03.828 +03:00 [DBG] Done attempting to bind parameter 'pointOfInterest' of type 'WebApi1.Models.PointOfInterestForCreationDto'.
2024-11-18 01:13:03.830 +03:00 [DBG] Attempting to validate the bound parameter 'pointOfInterest' of type 'WebApi1.Models.PointOfInterestForCreationDto' ...
2024-11-18 01:13:03.832 +03:00 [DBG] Done attempting to validate the bound parameter 'pointOfInterest' of type 'WebApi1.Models.PointOfInterestForCreationDto'.
2024-11-18 01:13:03.840 +03:00 [INF] Entity Framework Core 6.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.0' with options: None
2024-11-18 01:13:03.843 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-18 01:13:03.845 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2024-11-18 01:13:03.846 +03:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2024-11-18 01:13:03.848 +03:00 [DBG] Opened connection to database 'main' on server 'E:\Asp\WebApi1\CityInfo.db'.
2024-11-18 01:13:03.852 +03:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0)
2024-11-18 01:13:03.856 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0)
2024-11-18 01:13:03.860 +03:00 [DBG] A data reader was disposed.
2024-11-18 01:13:03.861 +03:00 [DBG] Closing connection to database 'main' on server 'E:\Asp\WebApi1\CityInfo.db'.
2024-11-18 01:13:03.862 +03:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db'.
2024-11-18 01:13:03.865 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-18 01:13:03.866 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2024-11-18 01:13:03.872 +03:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2024-11-18 01:13:03.875 +03:00 [DBG] Opened connection to database 'main' on server 'E:\Asp\WebApi1\CityInfo.db'.
2024-11-18 01:13:03.877 +03:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Name"
FROM "Cities" AS "c"
WHERE "c"."Id" = @__cityId_0
LIMIT 1
2024-11-18 01:13:03.880 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Name"
FROM "Cities" AS "c"
WHERE "c"."Id" = @__cityId_0
LIMIT 1
2024-11-18 01:13:03.888 +03:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-11-18 01:13:03.890 +03:00 [DBG] A data reader was disposed.
2024-11-18 01:13:03.892 +03:00 [DBG] Closing connection to database 'main' on server 'E:\Asp\WebApi1\CityInfo.db'.
2024-11-18 01:13:03.894 +03:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db'.
2024-11-18 01:13:03.895 +03:00 [DBG] SaveChanges starting for 'CityInfoContext'.
2024-11-18 01:13:03.896 +03:00 [DBG] DetectChanges starting for 'CityInfoContext'.
2024-11-18 01:13:03.898 +03:00 [DBG] 1 entities were added and 0 entities were removed from navigation 'City.PointsOfInterest'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-11-18 01:13:03.906 +03:00 [DBG] 'CityInfoContext' generated a temporary value for the property 'Id.PointOfInterest'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-11-18 01:13:03.909 +03:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-11-18 01:13:03.911 +03:00 [DBG] DetectChanges completed for 'CityInfoContext'.
2024-11-18 01:13:03.913 +03:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2024-11-18 01:13:03.915 +03:00 [DBG] Opened connection to database 'main' on server 'E:\Asp\WebApi1\CityInfo.db'.
2024-11-18 01:13:03.922 +03:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2024-11-18 01:13:03.924 +03:00 [DBG] Began transaction with isolation level 'Serializable'.
2024-11-18 01:13:03.926 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-18 01:13:03.928 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2024-11-18 01:13:03.930 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (Size = 62), @p1='?' (Size = 13), @p2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "PointOfInterest" ("Description", "Name", "cityId")
VALUES (@p0, @p1, @p2);
SELECT "Id"
FROM "PointOfInterest"
WHERE changes() = 1 AND "rowid" = last_insert_rowid();
2024-11-18 01:13:03.947 +03:00 [INF] Executed DbCommand (17ms) [Parameters=[@p0='?' (Size = 62), @p1='?' (Size = 13), @p2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "PointOfInterest" ("Description", "Name", "cityId")
VALUES (@p0, @p1, @p2);
SELECT "Id"
FROM "PointOfInterest"
WHERE changes() = 1 AND "rowid" = last_insert_rowid();
2024-11-18 01:13:03.955 +03:00 [DBG] The foreign key property 'PointOfInterest.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2024-11-18 01:13:03.958 +03:00 [DBG] A data reader was disposed.
2024-11-18 01:13:03.959 +03:00 [DBG] Committing transaction.
2024-11-18 01:13:04.010 +03:00 [DBG] Committed transaction.
2024-11-18 01:13:04.011 +03:00 [DBG] Closing connection to database 'main' on server 'E:\Asp\WebApi1\CityInfo.db'.
2024-11-18 01:13:04.013 +03:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db'.
2024-11-18 01:13:04.015 +03:00 [DBG] Disposing transaction.
2024-11-18 01:13:04.021 +03:00 [DBG] An entity of type 'PointOfInterest' tracked by 'CityInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-11-18 01:13:04.027 +03:00 [DBG] SaveChanges completed for 'CityInfoContext' with 1 entities written to the database.
2024-11-18 01:13:04.030 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-18 01:13:04.034 +03:00 [DBG] No information found on request to perform content negotiation.
2024-11-18 01:13:04.038 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-18 01:13:04.040 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-18 01:13:04.041 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-18 01:13:04.043 +03:00 [INF] Executing CreatedAtRouteResult, writing value of type 'WebApi1.Models.PointOfInterestDto'.
2024-11-18 01:13:04.046 +03:00 [DBG] Found the endpoints ["WebApi1.Controllers.PointsOfInterestController.GetPointOfInterest (WebApi1)"] for address Microsoft.AspNetCore.Routing.RouteValuesAddress
2024-11-18 01:13:04.048 +03:00 [DBG] Successfully processed template api/cities/{cityId}/pointsofinterest/{pointofinterestid} for WebApi1.Controllers.PointsOfInterestController.GetPointOfInterest (WebApi1) resulting in /api/cities/1/pointsofinterest/12 and 
2024-11-18 01:13:04.059 +03:00 [DBG] Link generation succeeded for endpoints ["WebApi1.Controllers.PointsOfInterestController.GetPointOfInterest (WebApi1)"] with result /api/cities/1/pointsofinterest/12
2024-11-18 01:13:04.063 +03:00 [INF] Executed action WebApi1.Controllers.PointsOfInterestController.CreatePointOfInterest (WebApi1) in 275.6836ms
2024-11-18 01:13:04.071 +03:00 [INF] Executed endpoint 'WebApi1.Controllers.PointsOfInterestController.CreatePointOfInterest (WebApi1)'
2024-11-18 01:13:04.079 +03:00 [DBG] Connection id "0HN87AJBA0EH7" completed keep alive response.
2024-11-18 01:13:04.088 +03:00 [DBG] 'CityInfoContext' disposed.
2024-11-18 01:13:04.090 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7117/api/cities/1/pointsofinterest application/json 117 - 201 112 application/json;+charset=utf-8 343.8195ms
2024-11-18 01:13:49.794 +03:00 [INF] Application is shutting down...
2024-11-18 01:13:49.796 +03:00 [DBG] Hosting stopping
2024-11-18 01:13:49.805 +03:00 [DBG] Connection id "0HN87AJBA0EH7" disconnecting.
2024-11-18 01:13:49.809 +03:00 [DBG] Connection id "0HN87AJBA0EH7" stopped.
2024-11-18 01:13:49.811 +03:00 [DBG] Connection id "0HN87AJBA0EH7" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-11-18 01:13:49.818 +03:00 [DBG] Hosting stopped
2024-11-18 01:13:58.725 +03:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2024-11-18 01:13:58.943 +03:00 [DBG] Hosting starting
2024-11-18 01:13:58.977 +03:00 [INF] User profile is available. Using 'C:\Users\DaRK1AnGE1-\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-11-18 01:13:58.987 +03:00 [DBG] Reading data from file 'C:\Users\DaRK1AnGE1-\AppData\Local\ASP.NET\DataProtection-Keys\key-7aaf1ab6-3338-4bbe-824d-412c9ce49ea3.xml'.
2024-11-18 01:13:59.019 +03:00 [DBG] Found key {7aaf1ab6-3338-4bbe-824d-412c9ce49ea3}.
2024-11-18 01:13:59.045 +03:00 [DBG] Considering key {7aaf1ab6-3338-4bbe-824d-412c9ce49ea3} with expiration date 2025-02-15 20:08:59Z as default key.
2024-11-18 01:13:59.060 +03:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-11-18 01:13:59.077 +03:00 [DBG] Decrypting secret element using Windows DPAPI.
2024-11-18 01:13:59.082 +03:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-11-18 01:13:59.101 +03:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2024-11-18 01:13:59.109 +03:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2024-11-18 01:13:59.126 +03:00 [DBG] Using key {7aaf1ab6-3338-4bbe-824d-412c9ce49ea3} as the default key.
2024-11-18 01:13:59.128 +03:00 [DBG] Key ring with default key {7aaf1ab6-3338-4bbe-824d-412c9ce49ea3} was loaded during application startup.
2024-11-18 01:13:59.253 +03:00 [DBG] Using development certificate: CN=localhost (Thumbprint: 9E758B43FC1DB07235D03E669781821F9B436A79)
2024-11-18 01:13:59.321 +03:00 [INF] Now listening on: https://localhost:7117
2024-11-18 01:13:59.326 +03:00 [INF] Now listening on: http://localhost:5211
2024-11-18 01:13:59.334 +03:00 [DBG] Loaded hosting startup assembly WebApi1
2024-11-18 01:13:59.337 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-11-18 01:13:59.339 +03:00 [INF] Hosting environment: Development
2024-11-18 01:13:59.343 +03:00 [INF] Content root path: E:\Asp\WebApi1\
2024-11-18 01:13:59.347 +03:00 [DBG] Hosting started
2024-11-18 01:14:08.614 +03:00 [DBG] Connection id "0HN87AKK4N762" received FIN.
2024-11-18 01:14:08.625 +03:00 [DBG] Connection id "0HN87AKK4N762" accepted.
2024-11-18 01:14:08.627 +03:00 [DBG] Connection id "0HN87AKK4N762" started.
2024-11-18 01:14:08.631 +03:00 [DBG] Connection id "0HN87AKK4N763" accepted.
2024-11-18 01:14:08.635 +03:00 [DBG] Connection id "0HN87AKK4N763" started.
2024-11-18 01:14:08.705 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2024-11-18 01:14:08.894 +03:00 [DBG] Connection 0HN87AKK4N763 established using the following protocol: "Tls12"
2024-11-18 01:14:08.985 +03:00 [DBG] Connection id "0HN87AKK4N762" stopped.
2024-11-18 01:14:09.008 +03:00 [DBG] Connection id "0HN87AKK4N762" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-11-18 01:14:09.054 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7117/api/authentication/authenticate application/json 114
2024-11-18 01:14:09.061 +03:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2024-11-18 01:14:09.109 +03:00 [DBG] POST requests are not supported
2024-11-18 01:14:09.193 +03:00 [DBG] 1 candidate(s) found for the request path '/api/authentication/authenticate'
2024-11-18 01:14:09.208 +03:00 [DBG] Endpoint 'WebApi1.Controllers.AuthenticationController.Authenticate (WebApi1)' with route pattern 'api/authentication/authenticate' is valid for the request path '/api/authentication/authenticate'
2024-11-18 01:14:09.213 +03:00 [DBG] Request matched endpoint 'WebApi1.Controllers.AuthenticationController.Authenticate (WebApi1)'
2024-11-18 01:14:09.290 +03:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-18 01:14:09.294 +03:00 [INF] Executing endpoint 'WebApi1.Controllers.AuthenticationController.Authenticate (WebApi1)'
2024-11-18 01:14:09.343 +03:00 [INF] Route matched with {action = "Authenticate", controller = "Authentication"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.ActionResult`1[System.String] Authenticate(AuthenticationRequestBody) on controller WebApi1.Controllers.AuthenticationController (WebApi1).
2024-11-18 01:14:09.352 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-18 01:14:09.354 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-18 01:14:09.357 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-11-18 01:14:09.361 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-18 01:14:09.370 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-11-18 01:14:09.374 +03:00 [DBG] Executing controller factory for controller WebApi1.Controllers.AuthenticationController (WebApi1)
2024-11-18 01:14:09.377 +03:00 [DBG] Executed controller factory for controller WebApi1.Controllers.AuthenticationController (WebApi1)
2024-11-18 01:14:09.387 +03:00 [DBG] Attempting to bind parameter 'authenticationRequestBody' of type 'WebApi1.Controllers.AuthenticationController+AuthenticationRequestBody' ...
2024-11-18 01:14:09.392 +03:00 [DBG] Attempting to bind parameter 'authenticationRequestBody' of type 'WebApi1.Controllers.AuthenticationController+AuthenticationRequestBody' using the name '' in request data ...
2024-11-18 01:14:09.398 +03:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonPatchInputFormatter' for content type 'application/json'.
2024-11-18 01:14:09.407 +03:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonInputFormatter' for content type 'application/json'.
2024-11-18 01:14:09.420 +03:00 [DBG] Connection id "0HN87AKK4N763", Request id "0HN87AKK4N763:00000002": started reading request body.
2024-11-18 01:14:09.423 +03:00 [DBG] Connection id "0HN87AKK4N763", Request id "0HN87AKK4N763:00000002": done reading request body.
2024-11-18 01:14:09.652 +03:00 [DBG] Done attempting to bind parameter 'authenticationRequestBody' of type 'WebApi1.Controllers.AuthenticationController+AuthenticationRequestBody'.
2024-11-18 01:14:09.654 +03:00 [DBG] Done attempting to bind parameter 'authenticationRequestBody' of type 'WebApi1.Controllers.AuthenticationController+AuthenticationRequestBody'.
2024-11-18 01:14:09.656 +03:00 [DBG] Attempting to validate the bound parameter 'authenticationRequestBody' of type 'WebApi1.Controllers.AuthenticationController+AuthenticationRequestBody' ...
2024-11-18 01:14:09.674 +03:00 [DBG] Done attempting to validate the bound parameter 'authenticationRequestBody' of type 'WebApi1.Controllers.AuthenticationController+AuthenticationRequestBody'.
2024-11-18 01:14:09.866 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-18 01:14:09.872 +03:00 [DBG] No information found on request to perform content negotiation.
2024-11-18 01:14:09.874 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-18 01:14:09.876 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-18 01:14:09.878 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter' and content type 'text/plain' to write the response.
2024-11-18 01:14:09.884 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.String'.
2024-11-18 01:14:09.906 +03:00 [INF] Executed action WebApi1.Controllers.AuthenticationController.Authenticate (WebApi1) in 518.5363ms
2024-11-18 01:14:09.910 +03:00 [INF] Executed endpoint 'WebApi1.Controllers.AuthenticationController.Authenticate (WebApi1)'
2024-11-18 01:14:09.912 +03:00 [DBG] Connection id "0HN87AKK4N763" completed keep alive response.
2024-11-18 01:14:09.936 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7117/api/authentication/authenticate application/json 114 - 200 - text/plain;+charset=utf-8 897.0666ms
2024-11-18 01:14:21.505 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7117/api/cities/1/pointsofinterest application/json 117
2024-11-18 01:14:21.507 +03:00 [DBG] POST requests are not supported
2024-11-18 01:14:21.511 +03:00 [DBG] 1 candidate(s) found for the request path '/api/cities/1/pointsofinterest'
2024-11-18 01:14:21.512 +03:00 [DBG] Endpoint 'WebApi1.Controllers.PointsOfInterestController.CreatePointOfInterest (WebApi1)' with route pattern 'api/cities/{cityId}/pointsofinterest' is valid for the request path '/api/cities/1/pointsofinterest'
2024-11-18 01:14:21.521 +03:00 [DBG] Request matched endpoint 'WebApi1.Controllers.PointsOfInterestController.CreatePointOfInterest (WebApi1)'
2024-11-18 01:14:21.644 +03:00 [DBG] Successfully validated the token.
2024-11-18 01:14:21.646 +03:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2024-11-18 01:14:21.654 +03:00 [DBG] Authorization was successful.
2024-11-18 01:14:21.656 +03:00 [INF] Executing endpoint 'WebApi1.Controllers.PointsOfInterestController.CreatePointOfInterest (WebApi1)'
2024-11-18 01:14:21.687 +03:00 [INF] Route matched with {action = "CreatePointOfInterest", controller = "PointsOfInterest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[WebApi1.Models.PointOfInterestDto]] CreatePointOfInterest(Int32, WebApi1.Models.PointOfInterestForCreationDto) on controller WebApi1.Controllers.PointsOfInterestController (WebApi1).
2024-11-18 01:14:21.690 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-18 01:14:21.691 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-18 01:14:21.694 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-11-18 01:14:21.700 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-18 01:14:21.702 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-11-18 01:14:21.705 +03:00 [DBG] Executing controller factory for controller WebApi1.Controllers.PointsOfInterestController (WebApi1)
2024-11-18 01:14:21.876 +03:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2024-11-18 01:14:22.224 +03:00 [DBG] Executed controller factory for controller WebApi1.Controllers.PointsOfInterestController (WebApi1)
2024-11-18 01:14:22.226 +03:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2024-11-18 01:14:22.228 +03:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2024-11-18 01:14:22.233 +03:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2024-11-18 01:14:22.235 +03:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2024-11-18 01:14:22.237 +03:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2024-11-18 01:14:22.239 +03:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2024-11-18 01:14:22.241 +03:00 [DBG] Attempting to bind parameter 'pointOfInterest' of type 'WebApi1.Models.PointOfInterestForCreationDto' ...
2024-11-18 01:14:22.243 +03:00 [DBG] Attempting to bind parameter 'pointOfInterest' of type 'WebApi1.Models.PointOfInterestForCreationDto' using the name '' in request data ...
2024-11-18 01:14:22.247 +03:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonPatchInputFormatter' for content type 'application/json'.
2024-11-18 01:14:22.251 +03:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonInputFormatter' for content type 'application/json'.
2024-11-18 01:14:22.255 +03:00 [DBG] Connection id "0HN87AKK4N763", Request id "0HN87AKK4N763:00000003": started reading request body.
2024-11-18 01:14:22.257 +03:00 [DBG] Connection id "0HN87AKK4N763", Request id "0HN87AKK4N763:00000003": done reading request body.
2024-11-18 01:14:22.262 +03:00 [DBG] Done attempting to bind parameter 'pointOfInterest' of type 'WebApi1.Models.PointOfInterestForCreationDto'.
2024-11-18 01:14:22.267 +03:00 [DBG] Done attempting to bind parameter 'pointOfInterest' of type 'WebApi1.Models.PointOfInterestForCreationDto'.
2024-11-18 01:14:22.269 +03:00 [DBG] Attempting to validate the bound parameter 'pointOfInterest' of type 'WebApi1.Models.PointOfInterestForCreationDto' ...
2024-11-18 01:14:22.272 +03:00 [DBG] Done attempting to validate the bound parameter 'pointOfInterest' of type 'WebApi1.Models.PointOfInterestForCreationDto'.
2024-11-18 01:14:23.399 +03:00 [INF] Entity Framework Core 6.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.0' with options: None
2024-11-18 01:14:23.476 +03:00 [DBG] Compiling query expression: 
'DbSet<City>()
    .Any(c => c.Id == __cityId_0)'
2024-11-18 01:14:23.754 +03:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<bool>(
    asyncEnumerable: new SingleQueryingEnumerable<bool>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT EXISTS (
                SELECT 1
                FROM Cities AS c
                WHERE c.Id == @__cityId_0)), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, bool>, 
        WebApi1.DbContexts.CityInfoContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2024-11-18 01:14:23.825 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-18 01:14:23.888 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (54ms).
2024-11-18 01:14:23.901 +03:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2024-11-18 01:14:23.928 +03:00 [DBG] Opened connection to database 'main' on server 'E:\Asp\WebApi1\CityInfo.db'.
2024-11-18 01:14:23.955 +03:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0)
2024-11-18 01:14:24.098 +03:00 [INF] Executed DbCommand (146ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0)
2024-11-18 01:14:24.188 +03:00 [DBG] A data reader was disposed.
2024-11-18 01:14:24.195 +03:00 [DBG] Closing connection to database 'main' on server 'E:\Asp\WebApi1\CityInfo.db'.
2024-11-18 01:14:24.207 +03:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db'.
2024-11-18 01:14:24.243 +03:00 [DBG] Compiling query expression: 
'DbSet<City>()
    .Where(c => c.Id == __cityId_0)
    .FirstOrDefault()'
2024-11-18 01:14:24.302 +03:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<City>(
    asyncEnumerable: new SingleQueryingEnumerable<City>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: City.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: City.Description (string) MaxLength(200), 1], [Property: City.Name (string) Required MaxLength(50), 2] }
            SELECT TOP(1) c.Id, c.Description, c.Name
            FROM Cities AS c
            WHERE c.Id == @__cityId_0), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, City>, 
        WebApi1.DbContexts.CityInfoContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2024-11-18 01:14:24.323 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-18 01:14:24.326 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2024-11-18 01:14:24.328 +03:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2024-11-18 01:14:24.330 +03:00 [DBG] Opened connection to database 'main' on server 'E:\Asp\WebApi1\CityInfo.db'.
2024-11-18 01:14:24.334 +03:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Name"
FROM "Cities" AS "c"
WHERE "c"."Id" = @__cityId_0
LIMIT 1
2024-11-18 01:14:24.338 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Name"
FROM "Cities" AS "c"
WHERE "c"."Id" = @__cityId_0
LIMIT 1
2024-11-18 01:14:24.370 +03:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-11-18 01:14:24.412 +03:00 [DBG] A data reader was disposed.
2024-11-18 01:14:24.416 +03:00 [DBG] Closing connection to database 'main' on server 'E:\Asp\WebApi1\CityInfo.db'.
2024-11-18 01:14:24.418 +03:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db'.
2024-11-18 01:14:24.425 +03:00 [DBG] SaveChanges starting for 'CityInfoContext'.
2024-11-18 01:14:24.430 +03:00 [DBG] DetectChanges starting for 'CityInfoContext'.
2024-11-18 01:14:24.467 +03:00 [DBG] 1 entities were added and 0 entities were removed from navigation 'City.PointsOfInterest'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-11-18 01:14:24.518 +03:00 [DBG] 'CityInfoContext' generated a temporary value for the property 'Id.PointOfInterest'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-11-18 01:14:24.558 +03:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-11-18 01:14:24.564 +03:00 [DBG] DetectChanges completed for 'CityInfoContext'.
2024-11-18 01:14:24.596 +03:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2024-11-18 01:14:24.600 +03:00 [DBG] Opened connection to database 'main' on server 'E:\Asp\WebApi1\CityInfo.db'.
2024-11-18 01:14:24.604 +03:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2024-11-18 01:14:24.611 +03:00 [DBG] Began transaction with isolation level 'Serializable'.
2024-11-18 01:14:24.709 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-18 01:14:24.711 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2024-11-18 01:14:24.713 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (Size = 62), @p1='?' (Size = 13), @p2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "PointOfInterest" ("Description", "Name", "cityId")
VALUES (@p0, @p1, @p2);
SELECT "Id"
FROM "PointOfInterest"
WHERE changes() = 1 AND "rowid" = last_insert_rowid();
2024-11-18 01:14:24.721 +03:00 [INF] Executed DbCommand (8ms) [Parameters=[@p0='?' (Size = 62), @p1='?' (Size = 13), @p2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "PointOfInterest" ("Description", "Name", "cityId")
VALUES (@p0, @p1, @p2);
SELECT "Id"
FROM "PointOfInterest"
WHERE changes() = 1 AND "rowid" = last_insert_rowid();
2024-11-18 01:14:24.760 +03:00 [DBG] The foreign key property 'PointOfInterest.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2024-11-18 01:14:24.775 +03:00 [DBG] A data reader was disposed.
2024-11-18 01:14:24.781 +03:00 [DBG] Committing transaction.
2024-11-18 01:14:24.842 +03:00 [DBG] Committed transaction.
2024-11-18 01:14:24.846 +03:00 [DBG] Closing connection to database 'main' on server 'E:\Asp\WebApi1\CityInfo.db'.
2024-11-18 01:14:24.850 +03:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db'.
2024-11-18 01:14:24.854 +03:00 [DBG] Disposing transaction.
2024-11-18 01:14:24.875 +03:00 [DBG] An entity of type 'PointOfInterest' tracked by 'CityInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-11-18 01:14:24.882 +03:00 [DBG] SaveChanges completed for 'CityInfoContext' with 1 entities written to the database.
2024-11-18 01:14:24.891 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-18 01:14:24.896 +03:00 [DBG] No information found on request to perform content negotiation.
2024-11-18 01:14:24.899 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-18 01:14:24.902 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-18 01:14:24.903 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-18 01:14:24.905 +03:00 [INF] Executing CreatedAtRouteResult, writing value of type 'WebApi1.Models.PointOfInterestDto'.
2024-11-18 01:14:24.937 +03:00 [DBG] Found the endpoints ["WebApi1.Controllers.PointsOfInterestController.GetPointOfInterest (WebApi1)"] for address Microsoft.AspNetCore.Routing.RouteValuesAddress
2024-11-18 01:14:24.952 +03:00 [DBG] Successfully processed template api/cities/{cityId}/pointsofinterest/{pointofinterestid} for WebApi1.Controllers.PointsOfInterestController.GetPointOfInterest (WebApi1) resulting in /api/cities/1/pointsofinterest/13 and 
2024-11-18 01:14:24.956 +03:00 [DBG] Link generation succeeded for endpoints ["WebApi1.Controllers.PointsOfInterestController.GetPointOfInterest (WebApi1)"] with result /api/cities/1/pointsofinterest/13
2024-11-18 01:14:25.033 +03:00 [INF] Executed action WebApi1.Controllers.PointsOfInterestController.CreatePointOfInterest (WebApi1) in 3328.2669ms
2024-11-18 01:14:25.037 +03:00 [INF] Executed endpoint 'WebApi1.Controllers.PointsOfInterestController.CreatePointOfInterest (WebApi1)'
2024-11-18 01:14:25.038 +03:00 [DBG] Connection id "0HN87AKK4N763" completed keep alive response.
2024-11-18 01:14:25.042 +03:00 [DBG] 'CityInfoContext' disposed.
2024-11-18 01:14:25.045 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7117/api/cities/1/pointsofinterest application/json 117 - 201 112 application/json;+charset=utf-8 3540.4224ms
2024-11-18 01:14:31.186 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7117/api/cities/2/pointsofinterest application/json 117
2024-11-18 01:14:31.189 +03:00 [DBG] POST requests are not supported
2024-11-18 01:14:31.191 +03:00 [DBG] 1 candidate(s) found for the request path '/api/cities/2/pointsofinterest'
2024-11-18 01:14:31.193 +03:00 [DBG] Endpoint 'WebApi1.Controllers.PointsOfInterestController.CreatePointOfInterest (WebApi1)' with route pattern 'api/cities/{cityId}/pointsofinterest' is valid for the request path '/api/cities/2/pointsofinterest'
2024-11-18 01:14:31.199 +03:00 [DBG] Request matched endpoint 'WebApi1.Controllers.PointsOfInterestController.CreatePointOfInterest (WebApi1)'
2024-11-18 01:14:31.205 +03:00 [DBG] Successfully validated the token.
2024-11-18 01:14:31.206 +03:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2024-11-18 01:14:31.209 +03:00 [DBG] Authorization was successful.
2024-11-18 01:14:31.211 +03:00 [INF] Executing endpoint 'WebApi1.Controllers.PointsOfInterestController.CreatePointOfInterest (WebApi1)'
2024-11-18 01:14:31.218 +03:00 [INF] Route matched with {action = "CreatePointOfInterest", controller = "PointsOfInterest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[WebApi1.Models.PointOfInterestDto]] CreatePointOfInterest(Int32, WebApi1.Models.PointOfInterestForCreationDto) on controller WebApi1.Controllers.PointsOfInterestController (WebApi1).
2024-11-18 01:14:31.225 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-18 01:14:31.228 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-18 01:14:31.233 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-11-18 01:14:31.236 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-18 01:14:31.239 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-11-18 01:14:31.242 +03:00 [DBG] Executing controller factory for controller WebApi1.Controllers.PointsOfInterestController (WebApi1)
2024-11-18 01:14:31.258 +03:00 [DBG] Executed controller factory for controller WebApi1.Controllers.PointsOfInterestController (WebApi1)
2024-11-18 01:14:31.261 +03:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2024-11-18 01:14:31.265 +03:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2024-11-18 01:14:31.267 +03:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2024-11-18 01:14:31.269 +03:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2024-11-18 01:14:31.271 +03:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2024-11-18 01:14:31.274 +03:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2024-11-18 01:14:31.277 +03:00 [DBG] Attempting to bind parameter 'pointOfInterest' of type 'WebApi1.Models.PointOfInterestForCreationDto' ...
2024-11-18 01:14:31.283 +03:00 [DBG] Attempting to bind parameter 'pointOfInterest' of type 'WebApi1.Models.PointOfInterestForCreationDto' using the name '' in request data ...
2024-11-18 01:14:31.285 +03:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonPatchInputFormatter' for content type 'application/json'.
2024-11-18 01:14:31.287 +03:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonInputFormatter' for content type 'application/json'.
2024-11-18 01:14:31.289 +03:00 [DBG] Connection id "0HN87AKK4N763", Request id "0HN87AKK4N763:00000004": started reading request body.
2024-11-18 01:14:31.290 +03:00 [DBG] Connection id "0HN87AKK4N763", Request id "0HN87AKK4N763:00000004": done reading request body.
2024-11-18 01:14:31.295 +03:00 [DBG] Done attempting to bind parameter 'pointOfInterest' of type 'WebApi1.Models.PointOfInterestForCreationDto'.
2024-11-18 01:14:31.300 +03:00 [DBG] Done attempting to bind parameter 'pointOfInterest' of type 'WebApi1.Models.PointOfInterestForCreationDto'.
2024-11-18 01:14:31.302 +03:00 [DBG] Attempting to validate the bound parameter 'pointOfInterest' of type 'WebApi1.Models.PointOfInterestForCreationDto' ...
2024-11-18 01:14:31.304 +03:00 [DBG] Done attempting to validate the bound parameter 'pointOfInterest' of type 'WebApi1.Models.PointOfInterestForCreationDto'.
2024-11-18 01:14:31.308 +03:00 [INF] Entity Framework Core 6.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.0' with options: None
2024-11-18 01:14:31.324 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-18 01:14:31.326 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2024-11-18 01:14:31.328 +03:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2024-11-18 01:14:31.335 +03:00 [DBG] Opened connection to database 'main' on server 'E:\Asp\WebApi1\CityInfo.db'.
2024-11-18 01:14:31.338 +03:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0)
2024-11-18 01:14:31.543 +03:00 [INF] Executed DbCommand (204ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0)
2024-11-18 01:14:31.578 +03:00 [DBG] A data reader was disposed.
2024-11-18 01:14:31.581 +03:00 [DBG] Closing connection to database 'main' on server 'E:\Asp\WebApi1\CityInfo.db'.
2024-11-18 01:14:31.584 +03:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db'.
2024-11-18 01:14:31.586 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-18 01:14:31.589 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2024-11-18 01:14:31.593 +03:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2024-11-18 01:14:31.601 +03:00 [DBG] Opened connection to database 'main' on server 'E:\Asp\WebApi1\CityInfo.db'.
2024-11-18 01:14:31.603 +03:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Name"
FROM "Cities" AS "c"
WHERE "c"."Id" = @__cityId_0
LIMIT 1
2024-11-18 01:14:31.607 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Name"
FROM "Cities" AS "c"
WHERE "c"."Id" = @__cityId_0
LIMIT 1
2024-11-18 01:14:31.621 +03:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-11-18 01:14:31.624 +03:00 [DBG] A data reader was disposed.
2024-11-18 01:14:31.627 +03:00 [DBG] Closing connection to database 'main' on server 'E:\Asp\WebApi1\CityInfo.db'.
2024-11-18 01:14:31.632 +03:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db'.
2024-11-18 01:14:31.636 +03:00 [DBG] SaveChanges starting for 'CityInfoContext'.
2024-11-18 01:14:31.639 +03:00 [DBG] DetectChanges starting for 'CityInfoContext'.
2024-11-18 01:14:31.643 +03:00 [DBG] 1 entities were added and 0 entities were removed from navigation 'City.PointsOfInterest'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-11-18 01:14:31.649 +03:00 [DBG] 'CityInfoContext' generated a temporary value for the property 'Id.PointOfInterest'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-11-18 01:14:31.654 +03:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-11-18 01:14:31.659 +03:00 [DBG] DetectChanges completed for 'CityInfoContext'.
2024-11-18 01:14:31.661 +03:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2024-11-18 01:14:31.665 +03:00 [DBG] Opened connection to database 'main' on server 'E:\Asp\WebApi1\CityInfo.db'.
2024-11-18 01:14:31.667 +03:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2024-11-18 01:14:31.669 +03:00 [DBG] Began transaction with isolation level 'Serializable'.
2024-11-18 01:14:31.673 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-18 01:14:31.677 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2024-11-18 01:14:31.683 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (Size = 62), @p1='?' (Size = 13), @p2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "PointOfInterest" ("Description", "Name", "cityId")
VALUES (@p0, @p1, @p2);
SELECT "Id"
FROM "PointOfInterest"
WHERE changes() = 1 AND "rowid" = last_insert_rowid();
2024-11-18 01:14:31.687 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@p0='?' (Size = 62), @p1='?' (Size = 13), @p2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "PointOfInterest" ("Description", "Name", "cityId")
VALUES (@p0, @p1, @p2);
SELECT "Id"
FROM "PointOfInterest"
WHERE changes() = 1 AND "rowid" = last_insert_rowid();
2024-11-18 01:14:31.707 +03:00 [DBG] The foreign key property 'PointOfInterest.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2024-11-18 01:14:31.709 +03:00 [DBG] A data reader was disposed.
2024-11-18 01:14:31.711 +03:00 [DBG] Committing transaction.
2024-11-18 01:14:31.761 +03:00 [DBG] Committed transaction.
2024-11-18 01:14:31.765 +03:00 [DBG] Closing connection to database 'main' on server 'E:\Asp\WebApi1\CityInfo.db'.
2024-11-18 01:14:31.766 +03:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db'.
2024-11-18 01:14:31.768 +03:00 [DBG] Disposing transaction.
2024-11-18 01:14:31.770 +03:00 [DBG] An entity of type 'PointOfInterest' tracked by 'CityInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-11-18 01:14:31.772 +03:00 [DBG] SaveChanges completed for 'CityInfoContext' with 1 entities written to the database.
2024-11-18 01:14:31.774 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-18 01:14:31.778 +03:00 [DBG] No information found on request to perform content negotiation.
2024-11-18 01:14:31.781 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-18 01:14:31.783 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-18 01:14:31.785 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-18 01:14:31.787 +03:00 [INF] Executing CreatedAtRouteResult, writing value of type 'WebApi1.Models.PointOfInterestDto'.
2024-11-18 01:14:31.789 +03:00 [DBG] Found the endpoints ["WebApi1.Controllers.PointsOfInterestController.GetPointOfInterest (WebApi1)"] for address Microsoft.AspNetCore.Routing.RouteValuesAddress
2024-11-18 01:14:31.791 +03:00 [DBG] Successfully processed template api/cities/{cityId}/pointsofinterest/{pointofinterestid} for WebApi1.Controllers.PointsOfInterestController.GetPointOfInterest (WebApi1) resulting in /api/cities/2/pointsofinterest/14 and 
2024-11-18 01:14:31.793 +03:00 [DBG] Link generation succeeded for endpoints ["WebApi1.Controllers.PointsOfInterestController.GetPointOfInterest (WebApi1)"] with result /api/cities/2/pointsofinterest/14
2024-11-18 01:14:31.801 +03:00 [INF] Executed action WebApi1.Controllers.PointsOfInterestController.CreatePointOfInterest (WebApi1) in 559.8308ms
2024-11-18 01:14:31.806 +03:00 [INF] Executed endpoint 'WebApi1.Controllers.PointsOfInterestController.CreatePointOfInterest (WebApi1)'
2024-11-18 01:14:31.808 +03:00 [DBG] Connection id "0HN87AKK4N763" completed keep alive response.
2024-11-18 01:14:31.810 +03:00 [DBG] 'CityInfoContext' disposed.
2024-11-18 01:14:31.811 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7117/api/cities/2/pointsofinterest application/json 117 - 201 112 application/json;+charset=utf-8 625.2646ms
2024-11-18 01:15:05.379 +03:00 [INF] Application is shutting down...
2024-11-18 01:15:05.381 +03:00 [DBG] Hosting stopping
2024-11-18 01:15:05.390 +03:00 [DBG] Connection id "0HN87AKK4N763" disconnecting.
2024-11-18 01:15:05.394 +03:00 [DBG] Connection id "0HN87AKK4N763" stopped.
2024-11-18 01:15:05.396 +03:00 [DBG] Connection id "0HN87AKK4N763" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-11-18 01:15:05.402 +03:00 [DBG] Hosting stopped
2024-11-18 01:15:14.268 +03:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2024-11-18 01:15:14.466 +03:00 [DBG] Hosting starting
2024-11-18 01:15:14.581 +03:00 [INF] User profile is available. Using 'C:\Users\DaRK1AnGE1-\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-11-18 01:15:14.624 +03:00 [DBG] Reading data from file 'C:\Users\DaRK1AnGE1-\AppData\Local\ASP.NET\DataProtection-Keys\key-7aaf1ab6-3338-4bbe-824d-412c9ce49ea3.xml'.
2024-11-18 01:15:14.692 +03:00 [DBG] Found key {7aaf1ab6-3338-4bbe-824d-412c9ce49ea3}.
2024-11-18 01:15:14.822 +03:00 [DBG] Considering key {7aaf1ab6-3338-4bbe-824d-412c9ce49ea3} with expiration date 2025-02-15 20:08:59Z as default key.
2024-11-18 01:15:14.973 +03:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-11-18 01:15:14.995 +03:00 [DBG] Decrypting secret element using Windows DPAPI.
2024-11-18 01:15:15.000 +03:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-11-18 01:15:15.028 +03:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2024-11-18 01:15:15.040 +03:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2024-11-18 01:15:15.056 +03:00 [DBG] Using key {7aaf1ab6-3338-4bbe-824d-412c9ce49ea3} as the default key.
2024-11-18 01:15:15.061 +03:00 [DBG] Key ring with default key {7aaf1ab6-3338-4bbe-824d-412c9ce49ea3} was loaded during application startup.
2024-11-18 01:15:15.190 +03:00 [DBG] Using development certificate: CN=localhost (Thumbprint: 9E758B43FC1DB07235D03E669781821F9B436A79)
2024-11-18 01:15:15.239 +03:00 [INF] Now listening on: https://localhost:7117
2024-11-18 01:15:15.243 +03:00 [INF] Now listening on: http://localhost:5211
2024-11-18 01:15:15.251 +03:00 [DBG] Loaded hosting startup assembly WebApi1
2024-11-18 01:15:15.253 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-11-18 01:15:15.254 +03:00 [INF] Hosting environment: Development
2024-11-18 01:15:15.255 +03:00 [INF] Content root path: E:\Asp\WebApi1\
2024-11-18 01:15:15.256 +03:00 [DBG] Hosting started
2024-11-18 01:15:21.443 +03:00 [DBG] Connection id "0HN87AL9R8T63" received FIN.
2024-11-18 01:15:21.454 +03:00 [DBG] Connection id "0HN87AL9R8T63" accepted.
2024-11-18 01:15:21.457 +03:00 [DBG] Connection id "0HN87AL9R8T63" started.
2024-11-18 01:15:21.459 +03:00 [DBG] Connection id "0HN87AL9R8T64" accepted.
2024-11-18 01:15:21.468 +03:00 [DBG] Connection id "0HN87AL9R8T64" started.
2024-11-18 01:15:21.490 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2024-11-18 01:15:21.569 +03:00 [DBG] Connection id "0HN87AL9R8T63" stopped.
2024-11-18 01:15:21.574 +03:00 [DBG] Connection id "0HN87AL9R8T63" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-11-18 01:15:21.604 +03:00 [DBG] Connection 0HN87AL9R8T64 established using the following protocol: "Tls12"
2024-11-18 01:15:21.678 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7117/api/authentication/authenticate application/json 114
2024-11-18 01:15:21.682 +03:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2024-11-18 01:15:21.709 +03:00 [DBG] POST requests are not supported
2024-11-18 01:15:21.759 +03:00 [DBG] 1 candidate(s) found for the request path '/api/authentication/authenticate'
2024-11-18 01:15:21.774 +03:00 [DBG] Endpoint 'WebApi1.Controllers.AuthenticationController.Authenticate (WebApi1)' with route pattern 'api/authentication/authenticate' is valid for the request path '/api/authentication/authenticate'
2024-11-18 01:15:21.781 +03:00 [DBG] Request matched endpoint 'WebApi1.Controllers.AuthenticationController.Authenticate (WebApi1)'
2024-11-18 01:15:21.832 +03:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-18 01:15:21.837 +03:00 [INF] Executing endpoint 'WebApi1.Controllers.AuthenticationController.Authenticate (WebApi1)'
2024-11-18 01:15:21.874 +03:00 [INF] Route matched with {action = "Authenticate", controller = "Authentication"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.ActionResult`1[System.String] Authenticate(AuthenticationRequestBody) on controller WebApi1.Controllers.AuthenticationController (WebApi1).
2024-11-18 01:15:21.880 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-18 01:15:21.882 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-18 01:15:21.885 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-11-18 01:15:21.892 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-18 01:15:21.903 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-11-18 01:15:21.906 +03:00 [DBG] Executing controller factory for controller WebApi1.Controllers.AuthenticationController (WebApi1)
2024-11-18 01:15:21.908 +03:00 [DBG] Executed controller factory for controller WebApi1.Controllers.AuthenticationController (WebApi1)
2024-11-18 01:15:21.919 +03:00 [DBG] Attempting to bind parameter 'authenticationRequestBody' of type 'WebApi1.Controllers.AuthenticationController+AuthenticationRequestBody' ...
2024-11-18 01:15:21.923 +03:00 [DBG] Attempting to bind parameter 'authenticationRequestBody' of type 'WebApi1.Controllers.AuthenticationController+AuthenticationRequestBody' using the name '' in request data ...
2024-11-18 01:15:21.937 +03:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonPatchInputFormatter' for content type 'application/json'.
2024-11-18 01:15:21.939 +03:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonInputFormatter' for content type 'application/json'.
2024-11-18 01:15:21.958 +03:00 [DBG] Connection id "0HN87AL9R8T64", Request id "0HN87AL9R8T64:00000002": started reading request body.
2024-11-18 01:15:21.961 +03:00 [DBG] Connection id "0HN87AL9R8T64", Request id "0HN87AL9R8T64:00000002": done reading request body.
2024-11-18 01:15:22.168 +03:00 [DBG] Done attempting to bind parameter 'authenticationRequestBody' of type 'WebApi1.Controllers.AuthenticationController+AuthenticationRequestBody'.
2024-11-18 01:15:22.170 +03:00 [DBG] Done attempting to bind parameter 'authenticationRequestBody' of type 'WebApi1.Controllers.AuthenticationController+AuthenticationRequestBody'.
2024-11-18 01:15:22.172 +03:00 [DBG] Attempting to validate the bound parameter 'authenticationRequestBody' of type 'WebApi1.Controllers.AuthenticationController+AuthenticationRequestBody' ...
2024-11-18 01:15:22.189 +03:00 [DBG] Done attempting to validate the bound parameter 'authenticationRequestBody' of type 'WebApi1.Controllers.AuthenticationController+AuthenticationRequestBody'.
2024-11-18 01:15:22.372 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-18 01:15:22.379 +03:00 [DBG] No information found on request to perform content negotiation.
2024-11-18 01:15:22.380 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-18 01:15:22.383 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-18 01:15:22.385 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter' and content type 'text/plain' to write the response.
2024-11-18 01:15:22.388 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.String'.
2024-11-18 01:15:22.417 +03:00 [INF] Executed action WebApi1.Controllers.AuthenticationController.Authenticate (WebApi1) in 496.1817ms
2024-11-18 01:15:22.420 +03:00 [INF] Executed endpoint 'WebApi1.Controllers.AuthenticationController.Authenticate (WebApi1)'
2024-11-18 01:15:22.422 +03:00 [DBG] Connection id "0HN87AL9R8T64" completed keep alive response.
2024-11-18 01:15:22.434 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7117/api/authentication/authenticate application/json 114 - 200 - text/plain;+charset=utf-8 761.5719ms
2024-11-18 01:15:30.164 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7117/api/cities/2/pointsofinterest application/json 117
2024-11-18 01:15:30.166 +03:00 [DBG] POST requests are not supported
2024-11-18 01:15:30.171 +03:00 [DBG] 1 candidate(s) found for the request path '/api/cities/2/pointsofinterest'
2024-11-18 01:15:30.173 +03:00 [DBG] Endpoint 'WebApi1.Controllers.PointsOfInterestController.CreatePointOfInterest (WebApi1)' with route pattern 'api/cities/{cityId}/pointsofinterest' is valid for the request path '/api/cities/2/pointsofinterest'
2024-11-18 01:15:30.177 +03:00 [DBG] Request matched endpoint 'WebApi1.Controllers.PointsOfInterestController.CreatePointOfInterest (WebApi1)'
2024-11-18 01:15:30.182 +03:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-18 01:15:30.191 +03:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
ClaimsAuthorizationRequirement:Claim.Type=city and Claim.Value is one of the following values: (Antwerp)
2024-11-18 01:15:30.207 +03:00 [INF] AuthenticationScheme: Bearer was challenged.
2024-11-18 01:15:30.209 +03:00 [DBG] Connection id "0HN87AL9R8T64" completed keep alive response.
2024-11-18 01:15:30.214 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7117/api/cities/2/pointsofinterest application/json 117 - 401 0 - 49.1624ms
2024-11-18 01:15:30.220 +03:00 [DBG] Connection id "0HN87AL9R8T64", Request id "0HN87AL9R8T64:00000003": started reading request body.
2024-11-18 01:15:30.222 +03:00 [DBG] Connection id "0HN87AL9R8T64", Request id "0HN87AL9R8T64:00000003": done reading request body.
2024-11-18 01:15:34.617 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7117/api/cities/1/pointsofinterest application/json 117
2024-11-18 01:15:34.622 +03:00 [DBG] POST requests are not supported
2024-11-18 01:15:34.625 +03:00 [DBG] 1 candidate(s) found for the request path '/api/cities/1/pointsofinterest'
2024-11-18 01:15:34.628 +03:00 [DBG] Endpoint 'WebApi1.Controllers.PointsOfInterestController.CreatePointOfInterest (WebApi1)' with route pattern 'api/cities/{cityId}/pointsofinterest' is valid for the request path '/api/cities/1/pointsofinterest'
2024-11-18 01:15:34.632 +03:00 [DBG] Request matched endpoint 'WebApi1.Controllers.PointsOfInterestController.CreatePointOfInterest (WebApi1)'
2024-11-18 01:15:34.636 +03:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-18 01:15:34.638 +03:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
ClaimsAuthorizationRequirement:Claim.Type=city and Claim.Value is one of the following values: (Antwerp)
2024-11-18 01:15:34.642 +03:00 [INF] AuthenticationScheme: Bearer was challenged.
2024-11-18 01:15:34.651 +03:00 [DBG] Connection id "0HN87AL9R8T64" completed keep alive response.
2024-11-18 01:15:34.653 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7117/api/cities/1/pointsofinterest application/json 117 - 401 0 - 35.6844ms
2024-11-18 01:15:34.656 +03:00 [DBG] Connection id "0HN87AL9R8T64", Request id "0HN87AL9R8T64:00000004": started reading request body.
2024-11-18 01:15:34.658 +03:00 [DBG] Connection id "0HN87AL9R8T64", Request id "0HN87AL9R8T64:00000004": done reading request body.
2024-11-18 01:15:37.083 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7117/api/cities/1/pointsofinterest application/json 117
2024-11-18 01:15:37.084 +03:00 [DBG] POST requests are not supported
2024-11-18 01:15:37.086 +03:00 [DBG] 1 candidate(s) found for the request path '/api/cities/1/pointsofinterest'
2024-11-18 01:15:37.087 +03:00 [DBG] Endpoint 'WebApi1.Controllers.PointsOfInterestController.CreatePointOfInterest (WebApi1)' with route pattern 'api/cities/{cityId}/pointsofinterest' is valid for the request path '/api/cities/1/pointsofinterest'
2024-11-18 01:15:37.089 +03:00 [DBG] Request matched endpoint 'WebApi1.Controllers.PointsOfInterestController.CreatePointOfInterest (WebApi1)'
2024-11-18 01:15:37.208 +03:00 [DBG] Successfully validated the token.
2024-11-18 01:15:37.210 +03:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2024-11-18 01:15:37.214 +03:00 [DBG] Authorization was successful.
2024-11-18 01:15:37.216 +03:00 [INF] Executing endpoint 'WebApi1.Controllers.PointsOfInterestController.CreatePointOfInterest (WebApi1)'
2024-11-18 01:15:37.239 +03:00 [INF] Route matched with {action = "CreatePointOfInterest", controller = "PointsOfInterest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[WebApi1.Models.PointOfInterestDto]] CreatePointOfInterest(Int32, WebApi1.Models.PointOfInterestForCreationDto) on controller WebApi1.Controllers.PointsOfInterestController (WebApi1).
2024-11-18 01:15:37.242 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-18 01:15:37.246 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-18 01:15:37.249 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-11-18 01:15:37.252 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-18 01:15:37.253 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-11-18 01:15:37.256 +03:00 [DBG] Executing controller factory for controller WebApi1.Controllers.PointsOfInterestController (WebApi1)
2024-11-18 01:15:37.422 +03:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2024-11-18 01:15:37.770 +03:00 [DBG] Executed controller factory for controller WebApi1.Controllers.PointsOfInterestController (WebApi1)
2024-11-18 01:15:37.772 +03:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2024-11-18 01:15:37.774 +03:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2024-11-18 01:15:37.779 +03:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2024-11-18 01:15:37.781 +03:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2024-11-18 01:15:37.783 +03:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2024-11-18 01:15:37.785 +03:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2024-11-18 01:15:37.787 +03:00 [DBG] Attempting to bind parameter 'pointOfInterest' of type 'WebApi1.Models.PointOfInterestForCreationDto' ...
2024-11-18 01:15:37.789 +03:00 [DBG] Attempting to bind parameter 'pointOfInterest' of type 'WebApi1.Models.PointOfInterestForCreationDto' using the name '' in request data ...
2024-11-18 01:15:37.792 +03:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonPatchInputFormatter' for content type 'application/json'.
2024-11-18 01:15:37.796 +03:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonInputFormatter' for content type 'application/json'.
2024-11-18 01:15:37.800 +03:00 [DBG] Connection id "0HN87AL9R8T64", Request id "0HN87AL9R8T64:00000005": started reading request body.
2024-11-18 01:15:37.802 +03:00 [DBG] Connection id "0HN87AL9R8T64", Request id "0HN87AL9R8T64:00000005": done reading request body.
2024-11-18 01:15:37.806 +03:00 [DBG] Done attempting to bind parameter 'pointOfInterest' of type 'WebApi1.Models.PointOfInterestForCreationDto'.
2024-11-18 01:15:37.808 +03:00 [DBG] Done attempting to bind parameter 'pointOfInterest' of type 'WebApi1.Models.PointOfInterestForCreationDto'.
2024-11-18 01:15:37.814 +03:00 [DBG] Attempting to validate the bound parameter 'pointOfInterest' of type 'WebApi1.Models.PointOfInterestForCreationDto' ...
2024-11-18 01:15:37.818 +03:00 [DBG] Done attempting to validate the bound parameter 'pointOfInterest' of type 'WebApi1.Models.PointOfInterestForCreationDto'.
2024-11-18 01:15:38.936 +03:00 [INF] Entity Framework Core 6.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.0' with options: None
2024-11-18 01:15:39.006 +03:00 [DBG] Compiling query expression: 
'DbSet<City>()
    .Any(c => c.Id == __cityId_0)'
2024-11-18 01:15:39.267 +03:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<bool>(
    asyncEnumerable: new SingleQueryingEnumerable<bool>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT EXISTS (
                SELECT 1
                FROM Cities AS c
                WHERE c.Id == @__cityId_0)), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, bool>, 
        WebApi1.DbContexts.CityInfoContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2024-11-18 01:15:39.337 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-18 01:15:39.399 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (52ms).
2024-11-18 01:15:39.413 +03:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2024-11-18 01:15:39.440 +03:00 [DBG] Opened connection to database 'main' on server 'E:\Asp\WebApi1\CityInfo.db'.
2024-11-18 01:15:39.475 +03:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0)
2024-11-18 01:15:39.532 +03:00 [INF] Executed DbCommand (74ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0)
2024-11-18 01:15:39.544 +03:00 [DBG] A data reader was disposed.
2024-11-18 01:15:39.552 +03:00 [DBG] Closing connection to database 'main' on server 'E:\Asp\WebApi1\CityInfo.db'.
2024-11-18 01:15:39.561 +03:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db'.
2024-11-18 01:15:39.592 +03:00 [DBG] Compiling query expression: 
'DbSet<City>()
    .Where(c => c.Id == __cityId_0)
    .FirstOrDefault()'
2024-11-18 01:15:39.650 +03:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<City>(
    asyncEnumerable: new SingleQueryingEnumerable<City>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: City.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: City.Description (string) MaxLength(200), 1], [Property: City.Name (string) Required MaxLength(50), 2] }
            SELECT TOP(1) c.Id, c.Description, c.Name
            FROM Cities AS c
            WHERE c.Id == @__cityId_0), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, City>, 
        WebApi1.DbContexts.CityInfoContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2024-11-18 01:15:39.669 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-18 01:15:39.671 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2024-11-18 01:15:39.673 +03:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2024-11-18 01:15:39.674 +03:00 [DBG] Opened connection to database 'main' on server 'E:\Asp\WebApi1\CityInfo.db'.
2024-11-18 01:15:39.676 +03:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Name"
FROM "Cities" AS "c"
WHERE "c"."Id" = @__cityId_0
LIMIT 1
2024-11-18 01:15:39.682 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Name"
FROM "Cities" AS "c"
WHERE "c"."Id" = @__cityId_0
LIMIT 1
2024-11-18 01:15:39.724 +03:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-11-18 01:15:39.764 +03:00 [DBG] A data reader was disposed.
2024-11-18 01:15:39.766 +03:00 [DBG] Closing connection to database 'main' on server 'E:\Asp\WebApi1\CityInfo.db'.
2024-11-18 01:15:39.767 +03:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db'.
2024-11-18 01:15:39.776 +03:00 [DBG] SaveChanges starting for 'CityInfoContext'.
2024-11-18 01:15:39.784 +03:00 [DBG] DetectChanges starting for 'CityInfoContext'.
2024-11-18 01:15:39.900 +03:00 [DBG] 1 entities were added and 0 entities were removed from navigation 'City.PointsOfInterest'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-11-18 01:15:40.022 +03:00 [DBG] 'CityInfoContext' generated a temporary value for the property 'Id.PointOfInterest'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-11-18 01:15:40.070 +03:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-11-18 01:15:40.075 +03:00 [DBG] DetectChanges completed for 'CityInfoContext'.
2024-11-18 01:15:40.106 +03:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2024-11-18 01:15:40.110 +03:00 [DBG] Opened connection to database 'main' on server 'E:\Asp\WebApi1\CityInfo.db'.
2024-11-18 01:15:40.117 +03:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2024-11-18 01:15:40.122 +03:00 [DBG] Began transaction with isolation level 'Serializable'.
2024-11-18 01:15:40.233 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-18 01:15:40.234 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2024-11-18 01:15:40.236 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (Size = 62), @p1='?' (Size = 13), @p2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "PointOfInterest" ("Description", "Name", "cityId")
VALUES (@p0, @p1, @p2);
SELECT "Id"
FROM "PointOfInterest"
WHERE changes() = 1 AND "rowid" = last_insert_rowid();
2024-11-18 01:15:40.243 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[@p0='?' (Size = 62), @p1='?' (Size = 13), @p2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "PointOfInterest" ("Description", "Name", "cityId")
VALUES (@p0, @p1, @p2);
SELECT "Id"
FROM "PointOfInterest"
WHERE changes() = 1 AND "rowid" = last_insert_rowid();
2024-11-18 01:15:40.279 +03:00 [DBG] The foreign key property 'PointOfInterest.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2024-11-18 01:15:40.292 +03:00 [DBG] A data reader was disposed.
2024-11-18 01:15:40.301 +03:00 [DBG] Committing transaction.
2024-11-18 01:15:40.363 +03:00 [DBG] Committed transaction.
2024-11-18 01:15:40.367 +03:00 [DBG] Closing connection to database 'main' on server 'E:\Asp\WebApi1\CityInfo.db'.
2024-11-18 01:15:40.369 +03:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db'.
2024-11-18 01:15:40.373 +03:00 [DBG] Disposing transaction.
2024-11-18 01:15:40.392 +03:00 [DBG] An entity of type 'PointOfInterest' tracked by 'CityInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-11-18 01:15:40.398 +03:00 [DBG] SaveChanges completed for 'CityInfoContext' with 1 entities written to the database.
2024-11-18 01:15:40.407 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-18 01:15:40.416 +03:00 [DBG] No information found on request to perform content negotiation.
2024-11-18 01:15:40.417 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-18 01:15:40.419 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-18 01:15:40.420 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-18 01:15:40.423 +03:00 [INF] Executing CreatedAtRouteResult, writing value of type 'WebApi1.Models.PointOfInterestDto'.
2024-11-18 01:15:40.456 +03:00 [DBG] Found the endpoints ["WebApi1.Controllers.PointsOfInterestController.GetPointOfInterest (WebApi1)"] for address Microsoft.AspNetCore.Routing.RouteValuesAddress
2024-11-18 01:15:40.473 +03:00 [DBG] Successfully processed template api/cities/{cityId}/pointsofinterest/{pointofinterestid} for WebApi1.Controllers.PointsOfInterestController.GetPointOfInterest (WebApi1) resulting in /api/cities/1/pointsofinterest/15 and 
2024-11-18 01:15:40.483 +03:00 [DBG] Link generation succeeded for endpoints ["WebApi1.Controllers.PointsOfInterestController.GetPointOfInterest (WebApi1)"] with result /api/cities/1/pointsofinterest/15
2024-11-18 01:15:40.555 +03:00 [INF] Executed action WebApi1.Controllers.PointsOfInterestController.CreatePointOfInterest (WebApi1) in 3298.7573ms
2024-11-18 01:15:40.557 +03:00 [INF] Executed endpoint 'WebApi1.Controllers.PointsOfInterestController.CreatePointOfInterest (WebApi1)'
2024-11-18 01:15:40.562 +03:00 [DBG] Connection id "0HN87AL9R8T64" completed keep alive response.
2024-11-18 01:15:40.569 +03:00 [DBG] 'CityInfoContext' disposed.
2024-11-18 01:15:40.575 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7117/api/cities/1/pointsofinterest application/json 117 - 201 112 application/json;+charset=utf-8 3491.6433ms
2024-11-18 01:16:03.823 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7117/api/cities/3/pointsofinterest application/json 117
2024-11-18 01:16:03.826 +03:00 [DBG] POST requests are not supported
2024-11-18 01:16:03.828 +03:00 [DBG] 1 candidate(s) found for the request path '/api/cities/3/pointsofinterest'
2024-11-18 01:16:03.830 +03:00 [DBG] Endpoint 'WebApi1.Controllers.PointsOfInterestController.CreatePointOfInterest (WebApi1)' with route pattern 'api/cities/{cityId}/pointsofinterest' is valid for the request path '/api/cities/3/pointsofinterest'
2024-11-18 01:16:03.833 +03:00 [DBG] Request matched endpoint 'WebApi1.Controllers.PointsOfInterestController.CreatePointOfInterest (WebApi1)'
2024-11-18 01:16:03.836 +03:00 [DBG] Successfully validated the token.
2024-11-18 01:16:03.837 +03:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2024-11-18 01:16:03.839 +03:00 [DBG] Authorization was successful.
2024-11-18 01:16:03.840 +03:00 [INF] Executing endpoint 'WebApi1.Controllers.PointsOfInterestController.CreatePointOfInterest (WebApi1)'
2024-11-18 01:16:03.842 +03:00 [INF] Route matched with {action = "CreatePointOfInterest", controller = "PointsOfInterest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[WebApi1.Models.PointOfInterestDto]] CreatePointOfInterest(Int32, WebApi1.Models.PointOfInterestForCreationDto) on controller WebApi1.Controllers.PointsOfInterestController (WebApi1).
2024-11-18 01:16:03.851 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-18 01:16:03.854 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-18 01:16:03.857 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-11-18 01:16:03.861 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-18 01:16:03.864 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-11-18 01:16:03.867 +03:00 [DBG] Executing controller factory for controller WebApi1.Controllers.PointsOfInterestController (WebApi1)
2024-11-18 01:16:03.883 +03:00 [DBG] Executed controller factory for controller WebApi1.Controllers.PointsOfInterestController (WebApi1)
2024-11-18 01:16:03.885 +03:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2024-11-18 01:16:03.887 +03:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2024-11-18 01:16:03.889 +03:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2024-11-18 01:16:03.896 +03:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2024-11-18 01:16:03.899 +03:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2024-11-18 01:16:03.901 +03:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2024-11-18 01:16:03.902 +03:00 [DBG] Attempting to bind parameter 'pointOfInterest' of type 'WebApi1.Models.PointOfInterestForCreationDto' ...
2024-11-18 01:16:03.904 +03:00 [DBG] Attempting to bind parameter 'pointOfInterest' of type 'WebApi1.Models.PointOfInterestForCreationDto' using the name '' in request data ...
2024-11-18 01:16:03.907 +03:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonPatchInputFormatter' for content type 'application/json'.
2024-11-18 01:16:03.913 +03:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonInputFormatter' for content type 'application/json'.
2024-11-18 01:16:03.916 +03:00 [DBG] Connection id "0HN87AL9R8T64", Request id "0HN87AL9R8T64:00000006": started reading request body.
2024-11-18 01:16:03.920 +03:00 [DBG] Connection id "0HN87AL9R8T64", Request id "0HN87AL9R8T64:00000006": done reading request body.
2024-11-18 01:16:03.923 +03:00 [DBG] Done attempting to bind parameter 'pointOfInterest' of type 'WebApi1.Models.PointOfInterestForCreationDto'.
2024-11-18 01:16:03.930 +03:00 [DBG] Done attempting to bind parameter 'pointOfInterest' of type 'WebApi1.Models.PointOfInterestForCreationDto'.
2024-11-18 01:16:03.933 +03:00 [DBG] Attempting to validate the bound parameter 'pointOfInterest' of type 'WebApi1.Models.PointOfInterestForCreationDto' ...
2024-11-18 01:16:03.939 +03:00 [DBG] Done attempting to validate the bound parameter 'pointOfInterest' of type 'WebApi1.Models.PointOfInterestForCreationDto'.
2024-11-18 01:16:03.950 +03:00 [INF] Entity Framework Core 6.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.0' with options: None
2024-11-18 01:16:03.963 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-18 01:16:03.971 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (7ms).
2024-11-18 01:16:03.973 +03:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2024-11-18 01:16:03.979 +03:00 [DBG] Opened connection to database 'main' on server 'E:\Asp\WebApi1\CityInfo.db'.
2024-11-18 01:16:03.982 +03:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0)
2024-11-18 01:16:03.988 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0)
2024-11-18 01:16:03.999 +03:00 [DBG] A data reader was disposed.
2024-11-18 01:16:04.001 +03:00 [DBG] Closing connection to database 'main' on server 'E:\Asp\WebApi1\CityInfo.db'.
2024-11-18 01:16:04.004 +03:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db'.
2024-11-18 01:16:04.006 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-18 01:16:04.008 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2024-11-18 01:16:04.014 +03:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2024-11-18 01:16:04.015 +03:00 [DBG] Opened connection to database 'main' on server 'E:\Asp\WebApi1\CityInfo.db'.
2024-11-18 01:16:04.017 +03:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Name"
FROM "Cities" AS "c"
WHERE "c"."Id" = @__cityId_0
LIMIT 1
2024-11-18 01:16:04.020 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Name"
FROM "Cities" AS "c"
WHERE "c"."Id" = @__cityId_0
LIMIT 1
2024-11-18 01:16:04.024 +03:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-11-18 01:16:04.032 +03:00 [DBG] A data reader was disposed.
2024-11-18 01:16:04.033 +03:00 [DBG] Closing connection to database 'main' on server 'E:\Asp\WebApi1\CityInfo.db'.
2024-11-18 01:16:04.035 +03:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db'.
2024-11-18 01:16:04.037 +03:00 [DBG] SaveChanges starting for 'CityInfoContext'.
2024-11-18 01:16:04.039 +03:00 [DBG] DetectChanges starting for 'CityInfoContext'.
2024-11-18 01:16:04.040 +03:00 [DBG] 1 entities were added and 0 entities were removed from navigation 'City.PointsOfInterest'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-11-18 01:16:04.049 +03:00 [DBG] 'CityInfoContext' generated a temporary value for the property 'Id.PointOfInterest'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-11-18 01:16:04.052 +03:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-11-18 01:16:04.054 +03:00 [DBG] DetectChanges completed for 'CityInfoContext'.
2024-11-18 01:16:04.055 +03:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2024-11-18 01:16:04.058 +03:00 [DBG] Opened connection to database 'main' on server 'E:\Asp\WebApi1\CityInfo.db'.
2024-11-18 01:16:04.066 +03:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2024-11-18 01:16:04.068 +03:00 [DBG] Began transaction with isolation level 'Serializable'.
2024-11-18 01:16:04.070 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-18 01:16:04.072 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2024-11-18 01:16:04.074 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (Size = 62), @p1='?' (Size = 13), @p2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "PointOfInterest" ("Description", "Name", "cityId")
VALUES (@p0, @p1, @p2);
SELECT "Id"
FROM "PointOfInterest"
WHERE changes() = 1 AND "rowid" = last_insert_rowid();
2024-11-18 01:16:04.082 +03:00 [INF] Executed DbCommand (8ms) [Parameters=[@p0='?' (Size = 62), @p1='?' (Size = 13), @p2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "PointOfInterest" ("Description", "Name", "cityId")
VALUES (@p0, @p1, @p2);
SELECT "Id"
FROM "PointOfInterest"
WHERE changes() = 1 AND "rowid" = last_insert_rowid();
2024-11-18 01:16:04.087 +03:00 [DBG] The foreign key property 'PointOfInterest.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2024-11-18 01:16:04.090 +03:00 [DBG] A data reader was disposed.
2024-11-18 01:16:04.091 +03:00 [DBG] Committing transaction.
2024-11-18 01:16:04.293 +03:00 [DBG] Committed transaction.
2024-11-18 01:16:04.296 +03:00 [DBG] Closing connection to database 'main' on server 'E:\Asp\WebApi1\CityInfo.db'.
2024-11-18 01:16:04.298 +03:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db'.
2024-11-18 01:16:04.299 +03:00 [DBG] Disposing transaction.
2024-11-18 01:16:04.302 +03:00 [DBG] An entity of type 'PointOfInterest' tracked by 'CityInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-11-18 01:16:04.304 +03:00 [DBG] SaveChanges completed for 'CityInfoContext' with 1 entities written to the database.
2024-11-18 01:16:04.307 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-18 01:16:04.316 +03:00 [DBG] No information found on request to perform content negotiation.
2024-11-18 01:16:04.320 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-18 01:16:04.322 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-18 01:16:04.324 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-18 01:16:04.330 +03:00 [INF] Executing CreatedAtRouteResult, writing value of type 'WebApi1.Models.PointOfInterestDto'.
2024-11-18 01:16:04.333 +03:00 [DBG] Found the endpoints ["WebApi1.Controllers.PointsOfInterestController.GetPointOfInterest (WebApi1)"] for address Microsoft.AspNetCore.Routing.RouteValuesAddress
2024-11-18 01:16:04.337 +03:00 [DBG] Successfully processed template api/cities/{cityId}/pointsofinterest/{pointofinterestid} for WebApi1.Controllers.PointsOfInterestController.GetPointOfInterest (WebApi1) resulting in /api/cities/3/pointsofinterest/16 and 
2024-11-18 01:16:04.340 +03:00 [DBG] Link generation succeeded for endpoints ["WebApi1.Controllers.PointsOfInterestController.GetPointOfInterest (WebApi1)"] with result /api/cities/3/pointsofinterest/16
2024-11-18 01:16:04.349 +03:00 [INF] Executed action WebApi1.Controllers.PointsOfInterestController.CreatePointOfInterest (WebApi1) in 481.9043ms
2024-11-18 01:16:04.352 +03:00 [INF] Executed endpoint 'WebApi1.Controllers.PointsOfInterestController.CreatePointOfInterest (WebApi1)'
2024-11-18 01:16:04.354 +03:00 [DBG] Connection id "0HN87AL9R8T64" completed keep alive response.
2024-11-18 01:16:04.356 +03:00 [DBG] 'CityInfoContext' disposed.
2024-11-18 01:16:04.365 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7117/api/cities/3/pointsofinterest application/json 117 - 201 112 application/json;+charset=utf-8 541.7938ms
2024-11-18 01:16:08.788 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7117/api/cities/3/pointsofinterest application/json 117
2024-11-18 01:16:08.789 +03:00 [DBG] POST requests are not supported
2024-11-18 01:16:08.791 +03:00 [DBG] 1 candidate(s) found for the request path '/api/cities/3/pointsofinterest'
2024-11-18 01:16:08.793 +03:00 [DBG] Endpoint 'WebApi1.Controllers.PointsOfInterestController.CreatePointOfInterest (WebApi1)' with route pattern 'api/cities/{cityId}/pointsofinterest' is valid for the request path '/api/cities/3/pointsofinterest'
2024-11-18 01:16:08.795 +03:00 [DBG] Request matched endpoint 'WebApi1.Controllers.PointsOfInterestController.CreatePointOfInterest (WebApi1)'
2024-11-18 01:16:08.798 +03:00 [DBG] Successfully validated the token.
2024-11-18 01:16:08.799 +03:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2024-11-18 01:16:08.801 +03:00 [DBG] Authorization was successful.
2024-11-18 01:16:08.803 +03:00 [INF] Executing endpoint 'WebApi1.Controllers.PointsOfInterestController.CreatePointOfInterest (WebApi1)'
2024-11-18 01:16:08.804 +03:00 [INF] Route matched with {action = "CreatePointOfInterest", controller = "PointsOfInterest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[WebApi1.Models.PointOfInterestDto]] CreatePointOfInterest(Int32, WebApi1.Models.PointOfInterestForCreationDto) on controller WebApi1.Controllers.PointsOfInterestController (WebApi1).
2024-11-18 01:16:08.807 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-18 01:16:08.811 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-18 01:16:08.820 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-11-18 01:16:08.823 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-18 01:16:08.829 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-11-18 01:16:08.831 +03:00 [DBG] Executing controller factory for controller WebApi1.Controllers.PointsOfInterestController (WebApi1)
2024-11-18 01:16:08.836 +03:00 [DBG] Executed controller factory for controller WebApi1.Controllers.PointsOfInterestController (WebApi1)
2024-11-18 01:16:08.838 +03:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2024-11-18 01:16:08.840 +03:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2024-11-18 01:16:08.849 +03:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2024-11-18 01:16:08.851 +03:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2024-11-18 01:16:08.852 +03:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2024-11-18 01:16:08.854 +03:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2024-11-18 01:16:08.856 +03:00 [DBG] Attempting to bind parameter 'pointOfInterest' of type 'WebApi1.Models.PointOfInterestForCreationDto' ...
2024-11-18 01:16:08.857 +03:00 [DBG] Attempting to bind parameter 'pointOfInterest' of type 'WebApi1.Models.PointOfInterestForCreationDto' using the name '' in request data ...
2024-11-18 01:16:08.863 +03:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonPatchInputFormatter' for content type 'application/json'.
2024-11-18 01:16:08.865 +03:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonInputFormatter' for content type 'application/json'.
2024-11-18 01:16:08.867 +03:00 [DBG] Connection id "0HN87AL9R8T64", Request id "0HN87AL9R8T64:00000007": started reading request body.
2024-11-18 01:16:08.868 +03:00 [DBG] Connection id "0HN87AL9R8T64", Request id "0HN87AL9R8T64:00000007": done reading request body.
2024-11-18 01:16:08.871 +03:00 [DBG] Done attempting to bind parameter 'pointOfInterest' of type 'WebApi1.Models.PointOfInterestForCreationDto'.
2024-11-18 01:16:08.872 +03:00 [DBG] Done attempting to bind parameter 'pointOfInterest' of type 'WebApi1.Models.PointOfInterestForCreationDto'.
2024-11-18 01:16:08.875 +03:00 [DBG] Attempting to validate the bound parameter 'pointOfInterest' of type 'WebApi1.Models.PointOfInterestForCreationDto' ...
2024-11-18 01:16:08.881 +03:00 [DBG] Done attempting to validate the bound parameter 'pointOfInterest' of type 'WebApi1.Models.PointOfInterestForCreationDto'.
2024-11-18 01:16:08.977 +03:00 [INF] Entity Framework Core 6.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.0' with options: None
2024-11-18 01:16:08.981 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-18 01:16:08.983 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2024-11-18 01:16:08.985 +03:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2024-11-18 01:16:08.987 +03:00 [DBG] Opened connection to database 'main' on server 'E:\Asp\WebApi1\CityInfo.db'.
2024-11-18 01:16:08.988 +03:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0)
2024-11-18 01:16:08.992 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0)
2024-11-18 01:16:08.996 +03:00 [DBG] A data reader was disposed.
2024-11-18 01:16:08.997 +03:00 [DBG] Closing connection to database 'main' on server 'E:\Asp\WebApi1\CityInfo.db'.
2024-11-18 01:16:09.000 +03:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db'.
2024-11-18 01:16:09.004 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-18 01:16:09.005 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2024-11-18 01:16:09.007 +03:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2024-11-18 01:16:09.020 +03:00 [DBG] Opened connection to database 'main' on server 'E:\Asp\WebApi1\CityInfo.db'.
2024-11-18 01:16:09.023 +03:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Name"
FROM "Cities" AS "c"
WHERE "c"."Id" = @__cityId_0
LIMIT 1
2024-11-18 01:16:09.031 +03:00 [INF] Executed DbCommand (8ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Name"
FROM "Cities" AS "c"
WHERE "c"."Id" = @__cityId_0
LIMIT 1
2024-11-18 01:16:09.036 +03:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-11-18 01:16:09.038 +03:00 [DBG] A data reader was disposed.
2024-11-18 01:16:09.039 +03:00 [DBG] Closing connection to database 'main' on server 'E:\Asp\WebApi1\CityInfo.db'.
2024-11-18 01:16:09.044 +03:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db'.
2024-11-18 01:16:09.048 +03:00 [DBG] SaveChanges starting for 'CityInfoContext'.
2024-11-18 01:16:09.051 +03:00 [DBG] DetectChanges starting for 'CityInfoContext'.
2024-11-18 01:16:09.053 +03:00 [DBG] 1 entities were added and 0 entities were removed from navigation 'City.PointsOfInterest'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-11-18 01:16:09.055 +03:00 [DBG] 'CityInfoContext' generated a temporary value for the property 'Id.PointOfInterest'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-11-18 01:16:09.058 +03:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-11-18 01:16:09.063 +03:00 [DBG] DetectChanges completed for 'CityInfoContext'.
2024-11-18 01:16:09.074 +03:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2024-11-18 01:16:09.081 +03:00 [DBG] Opened connection to database 'main' on server 'E:\Asp\WebApi1\CityInfo.db'.
2024-11-18 01:16:09.084 +03:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2024-11-18 01:16:09.087 +03:00 [DBG] Began transaction with isolation level 'Serializable'.
2024-11-18 01:16:09.088 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-18 01:16:09.089 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2024-11-18 01:16:09.095 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (Size = 62), @p1='?' (Size = 13), @p2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "PointOfInterest" ("Description", "Name", "cityId")
VALUES (@p0, @p1, @p2);
SELECT "Id"
FROM "PointOfInterest"
WHERE changes() = 1 AND "rowid" = last_insert_rowid();
2024-11-18 01:16:09.099 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@p0='?' (Size = 62), @p1='?' (Size = 13), @p2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "PointOfInterest" ("Description", "Name", "cityId")
VALUES (@p0, @p1, @p2);
SELECT "Id"
FROM "PointOfInterest"
WHERE changes() = 1 AND "rowid" = last_insert_rowid();
2024-11-18 01:16:09.104 +03:00 [DBG] The foreign key property 'PointOfInterest.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2024-11-18 01:16:09.106 +03:00 [DBG] A data reader was disposed.
2024-11-18 01:16:09.111 +03:00 [DBG] Committing transaction.
2024-11-18 01:16:09.164 +03:00 [DBG] Committed transaction.
2024-11-18 01:16:09.166 +03:00 [DBG] Closing connection to database 'main' on server 'E:\Asp\WebApi1\CityInfo.db'.
2024-11-18 01:16:09.167 +03:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db'.
2024-11-18 01:16:09.168 +03:00 [DBG] Disposing transaction.
2024-11-18 01:16:09.170 +03:00 [DBG] An entity of type 'PointOfInterest' tracked by 'CityInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-11-18 01:16:09.173 +03:00 [DBG] SaveChanges completed for 'CityInfoContext' with 1 entities written to the database.
2024-11-18 01:16:09.178 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-18 01:16:09.182 +03:00 [DBG] No information found on request to perform content negotiation.
2024-11-18 01:16:09.184 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-18 01:16:09.185 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-18 01:16:09.186 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-18 01:16:09.188 +03:00 [INF] Executing CreatedAtRouteResult, writing value of type 'WebApi1.Models.PointOfInterestDto'.
2024-11-18 01:16:09.190 +03:00 [DBG] Found the endpoints ["WebApi1.Controllers.PointsOfInterestController.GetPointOfInterest (WebApi1)"] for address Microsoft.AspNetCore.Routing.RouteValuesAddress
2024-11-18 01:16:09.197 +03:00 [DBG] Successfully processed template api/cities/{cityId}/pointsofinterest/{pointofinterestid} for WebApi1.Controllers.PointsOfInterestController.GetPointOfInterest (WebApi1) resulting in /api/cities/3/pointsofinterest/17 and 
2024-11-18 01:16:09.200 +03:00 [DBG] Link generation succeeded for endpoints ["WebApi1.Controllers.PointsOfInterestController.GetPointOfInterest (WebApi1)"] with result /api/cities/3/pointsofinterest/17
2024-11-18 01:16:09.203 +03:00 [INF] Executed action WebApi1.Controllers.PointsOfInterestController.CreatePointOfInterest (WebApi1) in 371.905ms
2024-11-18 01:16:09.219 +03:00 [INF] Executed endpoint 'WebApi1.Controllers.PointsOfInterestController.CreatePointOfInterest (WebApi1)'
2024-11-18 01:16:09.223 +03:00 [DBG] Connection id "0HN87AL9R8T64" completed keep alive response.
2024-11-18 01:16:09.256 +03:00 [DBG] 'CityInfoContext' disposed.
2024-11-18 01:16:09.262 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7117/api/cities/3/pointsofinterest application/json 117 - 201 112 application/json;+charset=utf-8 473.8529ms
2024-11-18 01:16:55.930 +03:00 [INF] Application is shutting down...
2024-11-18 01:16:55.932 +03:00 [DBG] Hosting stopping
2024-11-18 01:16:55.941 +03:00 [DBG] Connection id "0HN87AL9R8T64" disconnecting.
2024-11-18 01:16:55.945 +03:00 [DBG] Connection id "0HN87AL9R8T64" stopped.
2024-11-18 01:16:55.947 +03:00 [DBG] Connection id "0HN87AL9R8T64" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-11-18 01:16:55.952 +03:00 [DBG] Hosting stopped
2024-11-18 01:17:04.151 +03:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2024-11-18 01:17:04.431 +03:00 [DBG] Hosting starting
2024-11-18 01:17:04.464 +03:00 [INF] User profile is available. Using 'C:\Users\DaRK1AnGE1-\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-11-18 01:17:04.472 +03:00 [DBG] Reading data from file 'C:\Users\DaRK1AnGE1-\AppData\Local\ASP.NET\DataProtection-Keys\key-7aaf1ab6-3338-4bbe-824d-412c9ce49ea3.xml'.
2024-11-18 01:17:04.502 +03:00 [DBG] Found key {7aaf1ab6-3338-4bbe-824d-412c9ce49ea3}.
2024-11-18 01:17:04.529 +03:00 [DBG] Considering key {7aaf1ab6-3338-4bbe-824d-412c9ce49ea3} with expiration date 2025-02-15 20:08:59Z as default key.
2024-11-18 01:17:04.535 +03:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-11-18 01:17:04.544 +03:00 [DBG] Decrypting secret element using Windows DPAPI.
2024-11-18 01:17:04.547 +03:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-11-18 01:17:04.565 +03:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2024-11-18 01:17:04.570 +03:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2024-11-18 01:17:04.582 +03:00 [DBG] Using key {7aaf1ab6-3338-4bbe-824d-412c9ce49ea3} as the default key.
2024-11-18 01:17:04.584 +03:00 [DBG] Key ring with default key {7aaf1ab6-3338-4bbe-824d-412c9ce49ea3} was loaded during application startup.
2024-11-18 01:17:04.695 +03:00 [DBG] Using development certificate: CN=localhost (Thumbprint: 9E758B43FC1DB07235D03E669781821F9B436A79)
2024-11-18 01:17:04.765 +03:00 [INF] Now listening on: https://localhost:7117
2024-11-18 01:17:04.784 +03:00 [INF] Now listening on: http://localhost:5211
2024-11-18 01:17:04.787 +03:00 [DBG] Loaded hosting startup assembly WebApi1
2024-11-18 01:17:04.788 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-11-18 01:17:04.790 +03:00 [INF] Hosting environment: Development
2024-11-18 01:17:04.793 +03:00 [INF] Content root path: E:\Asp\WebApi1\
2024-11-18 01:17:04.794 +03:00 [DBG] Hosting started
2024-11-18 01:17:10.464 +03:00 [DBG] Connection id "0HN87AMAAVK2N" received FIN.
2024-11-18 01:17:10.475 +03:00 [DBG] Connection id "0HN87AMAAVK2N" accepted.
2024-11-18 01:17:10.478 +03:00 [DBG] Connection id "0HN87AMAAVK2N" started.
2024-11-18 01:17:10.481 +03:00 [DBG] Connection id "0HN87AMAAVK2O" accepted.
2024-11-18 01:17:10.483 +03:00 [DBG] Connection id "0HN87AMAAVK2O" started.
2024-11-18 01:17:10.502 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2024-11-18 01:17:10.545 +03:00 [DBG] Connection id "0HN87AMAAVK2N" stopped.
2024-11-18 01:17:10.553 +03:00 [DBG] Connection id "0HN87AMAAVK2N" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-11-18 01:17:10.617 +03:00 [DBG] Connection 0HN87AMAAVK2O established using the following protocol: "Tls12"
2024-11-18 01:17:10.677 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7117/api/authentication/authenticate application/json 114
2024-11-18 01:17:10.680 +03:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2024-11-18 01:17:10.706 +03:00 [DBG] POST requests are not supported
2024-11-18 01:17:10.754 +03:00 [DBG] 1 candidate(s) found for the request path '/api/authentication/authenticate'
2024-11-18 01:17:10.769 +03:00 [DBG] Endpoint 'WebApi1.Controllers.AuthenticationController.Authenticate (WebApi1)' with route pattern 'api/authentication/authenticate' is valid for the request path '/api/authentication/authenticate'
2024-11-18 01:17:10.773 +03:00 [DBG] Request matched endpoint 'WebApi1.Controllers.AuthenticationController.Authenticate (WebApi1)'
2024-11-18 01:17:10.835 +03:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-18 01:17:10.839 +03:00 [INF] Executing endpoint 'WebApi1.Controllers.AuthenticationController.Authenticate (WebApi1)'
2024-11-18 01:17:10.881 +03:00 [INF] Route matched with {action = "Authenticate", controller = "Authentication"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.ActionResult`1[System.String] Authenticate(AuthenticationRequestBody) on controller WebApi1.Controllers.AuthenticationController (WebApi1).
2024-11-18 01:17:10.885 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-18 01:17:10.887 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-18 01:17:10.894 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-11-18 01:17:10.898 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-18 01:17:10.900 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-11-18 01:17:10.902 +03:00 [DBG] Executing controller factory for controller WebApi1.Controllers.AuthenticationController (WebApi1)
2024-11-18 01:17:10.905 +03:00 [DBG] Executed controller factory for controller WebApi1.Controllers.AuthenticationController (WebApi1)
2024-11-18 01:17:10.916 +03:00 [DBG] Attempting to bind parameter 'authenticationRequestBody' of type 'WebApi1.Controllers.AuthenticationController+AuthenticationRequestBody' ...
2024-11-18 01:17:10.920 +03:00 [DBG] Attempting to bind parameter 'authenticationRequestBody' of type 'WebApi1.Controllers.AuthenticationController+AuthenticationRequestBody' using the name '' in request data ...
2024-11-18 01:17:10.930 +03:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonPatchInputFormatter' for content type 'application/json'.
2024-11-18 01:17:10.932 +03:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonInputFormatter' for content type 'application/json'.
2024-11-18 01:17:10.941 +03:00 [DBG] Connection id "0HN87AMAAVK2O", Request id "0HN87AMAAVK2O:00000002": started reading request body.
2024-11-18 01:17:11.130 +03:00 [DBG] Connection id "0HN87AMAAVK2O", Request id "0HN87AMAAVK2O:00000002": done reading request body.
2024-11-18 01:17:11.353 +03:00 [DBG] Done attempting to bind parameter 'authenticationRequestBody' of type 'WebApi1.Controllers.AuthenticationController+AuthenticationRequestBody'.
2024-11-18 01:17:11.356 +03:00 [DBG] Done attempting to bind parameter 'authenticationRequestBody' of type 'WebApi1.Controllers.AuthenticationController+AuthenticationRequestBody'.
2024-11-18 01:17:11.360 +03:00 [DBG] Attempting to validate the bound parameter 'authenticationRequestBody' of type 'WebApi1.Controllers.AuthenticationController+AuthenticationRequestBody' ...
2024-11-18 01:17:11.375 +03:00 [DBG] Done attempting to validate the bound parameter 'authenticationRequestBody' of type 'WebApi1.Controllers.AuthenticationController+AuthenticationRequestBody'.
2024-11-18 01:17:11.538 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-18 01:17:11.548 +03:00 [DBG] No information found on request to perform content negotiation.
2024-11-18 01:17:11.549 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-18 01:17:11.550 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-18 01:17:11.552 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter' and content type 'text/plain' to write the response.
2024-11-18 01:17:11.555 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.String'.
2024-11-18 01:17:11.581 +03:00 [INF] Executed action WebApi1.Controllers.AuthenticationController.Authenticate (WebApi1) in 663.9359ms
2024-11-18 01:17:11.584 +03:00 [INF] Executed endpoint 'WebApi1.Controllers.AuthenticationController.Authenticate (WebApi1)'
2024-11-18 01:17:11.586 +03:00 [DBG] Connection id "0HN87AMAAVK2O" completed keep alive response.
2024-11-18 01:17:11.595 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7117/api/authentication/authenticate application/json 114 - 200 - text/plain;+charset=utf-8 924.7805ms
2024-11-18 01:17:18.223 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7117/api/cities/3/pointsofinterest application/json 117
2024-11-18 01:17:18.225 +03:00 [DBG] POST requests are not supported
2024-11-18 01:17:18.230 +03:00 [DBG] 1 candidate(s) found for the request path '/api/cities/3/pointsofinterest'
2024-11-18 01:17:18.232 +03:00 [DBG] Endpoint 'WebApi1.Controllers.PointsOfInterestController.CreatePointOfInterest (WebApi1)' with route pattern 'api/cities/{cityId}/pointsofinterest' is valid for the request path '/api/cities/3/pointsofinterest'
2024-11-18 01:17:18.234 +03:00 [DBG] Request matched endpoint 'WebApi1.Controllers.PointsOfInterestController.CreatePointOfInterest (WebApi1)'
2024-11-18 01:17:18.358 +03:00 [DBG] Successfully validated the token.
2024-11-18 01:17:18.360 +03:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2024-11-18 01:17:18.366 +03:00 [DBG] Authorization was successful.
2024-11-18 01:17:18.367 +03:00 [INF] Executing endpoint 'WebApi1.Controllers.PointsOfInterestController.CreatePointOfInterest (WebApi1)'
2024-11-18 01:17:18.412 +03:00 [INF] Route matched with {action = "CreatePointOfInterest", controller = "PointsOfInterest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[WebApi1.Models.PointOfInterestDto]] CreatePointOfInterest(Int32, WebApi1.Models.PointOfInterestForCreationDto) on controller WebApi1.Controllers.PointsOfInterestController (WebApi1).
2024-11-18 01:17:18.415 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-18 01:17:18.417 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-18 01:17:18.419 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-11-18 01:17:18.425 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-18 01:17:18.427 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-11-18 01:17:18.429 +03:00 [DBG] Executing controller factory for controller WebApi1.Controllers.PointsOfInterestController (WebApi1)
2024-11-18 01:17:18.597 +03:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2024-11-18 01:17:18.977 +03:00 [DBG] Executed controller factory for controller WebApi1.Controllers.PointsOfInterestController (WebApi1)
2024-11-18 01:17:18.980 +03:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2024-11-18 01:17:18.982 +03:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2024-11-18 01:17:18.985 +03:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2024-11-18 01:17:18.987 +03:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2024-11-18 01:17:18.990 +03:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2024-11-18 01:17:18.993 +03:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2024-11-18 01:17:18.995 +03:00 [DBG] Attempting to bind parameter 'pointOfInterest' of type 'WebApi1.Models.PointOfInterestForCreationDto' ...
2024-11-18 01:17:18.998 +03:00 [DBG] Attempting to bind parameter 'pointOfInterest' of type 'WebApi1.Models.PointOfInterestForCreationDto' using the name '' in request data ...
2024-11-18 01:17:19.000 +03:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonPatchInputFormatter' for content type 'application/json'.
2024-11-18 01:17:19.002 +03:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonInputFormatter' for content type 'application/json'.
2024-11-18 01:17:19.009 +03:00 [DBG] Connection id "0HN87AMAAVK2O", Request id "0HN87AMAAVK2O:00000003": started reading request body.
2024-11-18 01:17:19.011 +03:00 [DBG] Connection id "0HN87AMAAVK2O", Request id "0HN87AMAAVK2O:00000003": done reading request body.
2024-11-18 01:17:19.015 +03:00 [DBG] Done attempting to bind parameter 'pointOfInterest' of type 'WebApi1.Models.PointOfInterestForCreationDto'.
2024-11-18 01:17:19.018 +03:00 [DBG] Done attempting to bind parameter 'pointOfInterest' of type 'WebApi1.Models.PointOfInterestForCreationDto'.
2024-11-18 01:17:19.020 +03:00 [DBG] Attempting to validate the bound parameter 'pointOfInterest' of type 'WebApi1.Models.PointOfInterestForCreationDto' ...
2024-11-18 01:17:19.026 +03:00 [DBG] Done attempting to validate the bound parameter 'pointOfInterest' of type 'WebApi1.Models.PointOfInterestForCreationDto'.
2024-11-18 01:17:20.184 +03:00 [INF] Entity Framework Core 6.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.0' with options: None
2024-11-18 01:17:20.259 +03:00 [DBG] Compiling query expression: 
'DbSet<City>()
    .Any(c => c.Id == __cityId_0)'
2024-11-18 01:17:20.527 +03:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<bool>(
    asyncEnumerable: new SingleQueryingEnumerable<bool>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT EXISTS (
                SELECT 1
                FROM Cities AS c
                WHERE c.Id == @__cityId_0)), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, bool>, 
        WebApi1.DbContexts.CityInfoContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2024-11-18 01:17:20.596 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-18 01:17:20.654 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (50ms).
2024-11-18 01:17:20.667 +03:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2024-11-18 01:17:20.708 +03:00 [DBG] Opened connection to database 'main' on server 'E:\Asp\WebApi1\CityInfo.db'.
2024-11-18 01:17:20.730 +03:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0)
2024-11-18 01:17:20.780 +03:00 [INF] Executed DbCommand (56ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0)
2024-11-18 01:17:20.796 +03:00 [DBG] A data reader was disposed.
2024-11-18 01:17:20.802 +03:00 [DBG] Closing connection to database 'main' on server 'E:\Asp\WebApi1\CityInfo.db'.
2024-11-18 01:17:20.812 +03:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db'.
2024-11-18 01:17:20.841 +03:00 [DBG] Compiling query expression: 
'DbSet<City>()
    .Where(c => c.Id == __cityId_0)
    .FirstOrDefault()'
2024-11-18 01:17:20.902 +03:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<City>(
    asyncEnumerable: new SingleQueryingEnumerable<City>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: City.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: City.Description (string) MaxLength(200), 1], [Property: City.Name (string) Required MaxLength(50), 2] }
            SELECT TOP(1) c.Id, c.Description, c.Name
            FROM Cities AS c
            WHERE c.Id == @__cityId_0), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, City>, 
        WebApi1.DbContexts.CityInfoContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2024-11-18 01:17:20.918 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-18 01:17:20.920 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2024-11-18 01:17:20.925 +03:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2024-11-18 01:17:20.929 +03:00 [DBG] Opened connection to database 'main' on server 'E:\Asp\WebApi1\CityInfo.db'.
2024-11-18 01:17:20.934 +03:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Name"
FROM "Cities" AS "c"
WHERE "c"."Id" = @__cityId_0
LIMIT 1
2024-11-18 01:17:20.941 +03:00 [INF] Executed DbCommand (8ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Name"
FROM "Cities" AS "c"
WHERE "c"."Id" = @__cityId_0
LIMIT 1
2024-11-18 01:17:20.976 +03:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-11-18 01:17:21.013 +03:00 [DBG] A data reader was disposed.
2024-11-18 01:17:21.015 +03:00 [DBG] Closing connection to database 'main' on server 'E:\Asp\WebApi1\CityInfo.db'.
2024-11-18 01:17:21.017 +03:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db'.
2024-11-18 01:17:21.025 +03:00 [DBG] SaveChanges starting for 'CityInfoContext'.
2024-11-18 01:17:21.030 +03:00 [DBG] DetectChanges starting for 'CityInfoContext'.
2024-11-18 01:17:21.063 +03:00 [DBG] 1 entities were added and 0 entities were removed from navigation 'City.PointsOfInterest'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-11-18 01:17:21.109 +03:00 [DBG] 'CityInfoContext' generated a temporary value for the property 'Id.PointOfInterest'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-11-18 01:17:21.228 +03:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-11-18 01:17:21.293 +03:00 [DBG] DetectChanges completed for 'CityInfoContext'.
2024-11-18 01:17:21.354 +03:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2024-11-18 01:17:21.359 +03:00 [DBG] Opened connection to database 'main' on server 'E:\Asp\WebApi1\CityInfo.db'.
2024-11-18 01:17:21.363 +03:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2024-11-18 01:17:21.369 +03:00 [DBG] Began transaction with isolation level 'Serializable'.
2024-11-18 01:17:21.469 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-18 01:17:21.471 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2024-11-18 01:17:21.475 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (Size = 62), @p1='?' (Size = 13), @p2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "PointOfInterest" ("Description", "Name", "cityId")
VALUES (@p0, @p1, @p2);
SELECT "Id"
FROM "PointOfInterest"
WHERE changes() = 1 AND "rowid" = last_insert_rowid();
2024-11-18 01:17:21.482 +03:00 [INF] Executed DbCommand (8ms) [Parameters=[@p0='?' (Size = 62), @p1='?' (Size = 13), @p2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "PointOfInterest" ("Description", "Name", "cityId")
VALUES (@p0, @p1, @p2);
SELECT "Id"
FROM "PointOfInterest"
WHERE changes() = 1 AND "rowid" = last_insert_rowid();
2024-11-18 01:17:21.515 +03:00 [DBG] The foreign key property 'PointOfInterest.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2024-11-18 01:17:21.529 +03:00 [DBG] A data reader was disposed.
2024-11-18 01:17:21.534 +03:00 [DBG] Committing transaction.
2024-11-18 01:17:21.595 +03:00 [DBG] Committed transaction.
2024-11-18 01:17:21.599 +03:00 [DBG] Closing connection to database 'main' on server 'E:\Asp\WebApi1\CityInfo.db'.
2024-11-18 01:17:21.601 +03:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db'.
2024-11-18 01:17:21.605 +03:00 [DBG] Disposing transaction.
2024-11-18 01:17:21.624 +03:00 [DBG] An entity of type 'PointOfInterest' tracked by 'CityInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-11-18 01:17:21.628 +03:00 [DBG] SaveChanges completed for 'CityInfoContext' with 1 entities written to the database.
2024-11-18 01:17:21.636 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-18 01:17:21.645 +03:00 [DBG] No information found on request to perform content negotiation.
2024-11-18 01:17:21.646 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-18 01:17:21.648 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-18 01:17:21.650 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-18 01:17:21.654 +03:00 [INF] Executing CreatedAtRouteResult, writing value of type 'WebApi1.Models.PointOfInterestDto'.
2024-11-18 01:17:21.698 +03:00 [DBG] Found the endpoints ["WebApi1.Controllers.PointsOfInterestController.GetPointOfInterest (WebApi1)"] for address Microsoft.AspNetCore.Routing.RouteValuesAddress
2024-11-18 01:17:21.717 +03:00 [DBG] Successfully processed template api/cities/{cityId}/pointsofinterest/{pointofinterestid} for WebApi1.Controllers.PointsOfInterestController.GetPointOfInterest (WebApi1) resulting in /api/cities/3/pointsofinterest/18 and 
2024-11-18 01:17:21.720 +03:00 [DBG] Link generation succeeded for endpoints ["WebApi1.Controllers.PointsOfInterestController.GetPointOfInterest (WebApi1)"] with result /api/cities/3/pointsofinterest/18
2024-11-18 01:17:21.792 +03:00 [INF] Executed action WebApi1.Controllers.PointsOfInterestController.CreatePointOfInterest (WebApi1) in 3363.1037ms
2024-11-18 01:17:21.795 +03:00 [INF] Executed endpoint 'WebApi1.Controllers.PointsOfInterestController.CreatePointOfInterest (WebApi1)'
2024-11-18 01:17:21.797 +03:00 [DBG] Connection id "0HN87AMAAVK2O" completed keep alive response.
2024-11-18 01:17:21.800 +03:00 [DBG] 'CityInfoContext' disposed.
2024-11-18 01:17:21.804 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7117/api/cities/3/pointsofinterest application/json 117 - 201 112 application/json;+charset=utf-8 3581.3487ms
2024-11-18 01:17:28.331 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7117/api/cities/3/pointsofinterest application/json 117
2024-11-18 01:17:28.334 +03:00 [DBG] POST requests are not supported
2024-11-18 01:17:28.335 +03:00 [DBG] 1 candidate(s) found for the request path '/api/cities/3/pointsofinterest'
2024-11-18 01:17:28.336 +03:00 [DBG] Endpoint 'WebApi1.Controllers.PointsOfInterestController.CreatePointOfInterest (WebApi1)' with route pattern 'api/cities/{cityId}/pointsofinterest' is valid for the request path '/api/cities/3/pointsofinterest'
2024-11-18 01:17:28.340 +03:00 [DBG] Request matched endpoint 'WebApi1.Controllers.PointsOfInterestController.CreatePointOfInterest (WebApi1)'
2024-11-18 01:17:28.347 +03:00 [DBG] Successfully validated the token.
2024-11-18 01:17:28.349 +03:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2024-11-18 01:17:28.351 +03:00 [DBG] Authorization was successful.
2024-11-18 01:17:28.354 +03:00 [INF] Executing endpoint 'WebApi1.Controllers.PointsOfInterestController.CreatePointOfInterest (WebApi1)'
2024-11-18 01:17:28.359 +03:00 [INF] Route matched with {action = "CreatePointOfInterest", controller = "PointsOfInterest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[WebApi1.Models.PointOfInterestDto]] CreatePointOfInterest(Int32, WebApi1.Models.PointOfInterestForCreationDto) on controller WebApi1.Controllers.PointsOfInterestController (WebApi1).
2024-11-18 01:17:28.363 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-18 01:17:28.366 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-18 01:17:28.368 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-11-18 01:17:28.371 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-18 01:17:28.377 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-11-18 01:17:28.381 +03:00 [DBG] Executing controller factory for controller WebApi1.Controllers.PointsOfInterestController (WebApi1)
2024-11-18 01:17:28.395 +03:00 [DBG] Executed controller factory for controller WebApi1.Controllers.PointsOfInterestController (WebApi1)
2024-11-18 01:17:28.398 +03:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2024-11-18 01:17:28.400 +03:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2024-11-18 01:17:28.402 +03:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2024-11-18 01:17:28.404 +03:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2024-11-18 01:17:28.410 +03:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2024-11-18 01:17:28.412 +03:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2024-11-18 01:17:28.413 +03:00 [DBG] Attempting to bind parameter 'pointOfInterest' of type 'WebApi1.Models.PointOfInterestForCreationDto' ...
2024-11-18 01:17:28.415 +03:00 [DBG] Attempting to bind parameter 'pointOfInterest' of type 'WebApi1.Models.PointOfInterestForCreationDto' using the name '' in request data ...
2024-11-18 01:17:28.417 +03:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonPatchInputFormatter' for content type 'application/json'.
2024-11-18 01:17:28.419 +03:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonInputFormatter' for content type 'application/json'.
2024-11-18 01:17:28.424 +03:00 [DBG] Connection id "0HN87AMAAVK2O", Request id "0HN87AMAAVK2O:00000004": started reading request body.
2024-11-18 01:17:28.428 +03:00 [DBG] Connection id "0HN87AMAAVK2O", Request id "0HN87AMAAVK2O:00000004": done reading request body.
2024-11-18 01:17:28.430 +03:00 [DBG] Done attempting to bind parameter 'pointOfInterest' of type 'WebApi1.Models.PointOfInterestForCreationDto'.
2024-11-18 01:17:28.432 +03:00 [DBG] Done attempting to bind parameter 'pointOfInterest' of type 'WebApi1.Models.PointOfInterestForCreationDto'.
2024-11-18 01:17:28.433 +03:00 [DBG] Attempting to validate the bound parameter 'pointOfInterest' of type 'WebApi1.Models.PointOfInterestForCreationDto' ...
2024-11-18 01:17:28.435 +03:00 [DBG] Done attempting to validate the bound parameter 'pointOfInterest' of type 'WebApi1.Models.PointOfInterestForCreationDto'.
2024-11-18 01:17:28.442 +03:00 [INF] Entity Framework Core 6.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.0' with options: None
2024-11-18 01:17:28.451 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-18 01:17:28.454 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2024-11-18 01:17:28.462 +03:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2024-11-18 01:17:28.464 +03:00 [DBG] Opened connection to database 'main' on server 'E:\Asp\WebApi1\CityInfo.db'.
2024-11-18 01:17:28.466 +03:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0)
2024-11-18 01:17:28.469 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0)
2024-11-18 01:17:28.476 +03:00 [DBG] A data reader was disposed.
2024-11-18 01:17:28.477 +03:00 [DBG] Closing connection to database 'main' on server 'E:\Asp\WebApi1\CityInfo.db'.
2024-11-18 01:17:28.479 +03:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db'.
2024-11-18 01:17:28.482 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-18 01:17:28.483 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2024-11-18 01:17:28.486 +03:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2024-11-18 01:17:28.493 +03:00 [DBG] Opened connection to database 'main' on server 'E:\Asp\WebApi1\CityInfo.db'.
2024-11-18 01:17:28.495 +03:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Name"
FROM "Cities" AS "c"
WHERE "c"."Id" = @__cityId_0
LIMIT 1
2024-11-18 01:17:28.498 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Name"
FROM "Cities" AS "c"
WHERE "c"."Id" = @__cityId_0
LIMIT 1
2024-11-18 01:17:28.503 +03:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-11-18 01:17:28.509 +03:00 [DBG] A data reader was disposed.
2024-11-18 01:17:28.512 +03:00 [DBG] Closing connection to database 'main' on server 'E:\Asp\WebApi1\CityInfo.db'.
2024-11-18 01:17:28.917 +03:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db'.
2024-11-18 01:17:28.926 +03:00 [DBG] SaveChanges starting for 'CityInfoContext'.
2024-11-18 01:17:28.929 +03:00 [DBG] DetectChanges starting for 'CityInfoContext'.
2024-11-18 01:17:29.012 +03:00 [DBG] 1 entities were added and 0 entities were removed from navigation 'City.PointsOfInterest'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-11-18 01:17:29.015 +03:00 [DBG] 'CityInfoContext' generated a temporary value for the property 'Id.PointOfInterest'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-11-18 01:17:29.018 +03:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-11-18 01:17:29.021 +03:00 [DBG] DetectChanges completed for 'CityInfoContext'.
2024-11-18 01:17:29.028 +03:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2024-11-18 01:17:29.031 +03:00 [DBG] Opened connection to database 'main' on server 'E:\Asp\WebApi1\CityInfo.db'.
2024-11-18 01:17:29.035 +03:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2024-11-18 01:17:29.038 +03:00 [DBG] Began transaction with isolation level 'Serializable'.
2024-11-18 01:17:29.044 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-18 01:17:29.049 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (4ms).
2024-11-18 01:17:29.051 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (Size = 62), @p1='?' (Size = 13), @p2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "PointOfInterest" ("Description", "Name", "cityId")
VALUES (@p0, @p1, @p2);
SELECT "Id"
FROM "PointOfInterest"
WHERE changes() = 1 AND "rowid" = last_insert_rowid();
2024-11-18 01:17:29.059 +03:00 [INF] Executed DbCommand (8ms) [Parameters=[@p0='?' (Size = 62), @p1='?' (Size = 13), @p2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "PointOfInterest" ("Description", "Name", "cityId")
VALUES (@p0, @p1, @p2);
SELECT "Id"
FROM "PointOfInterest"
WHERE changes() = 1 AND "rowid" = last_insert_rowid();
2024-11-18 01:17:29.065 +03:00 [DBG] The foreign key property 'PointOfInterest.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2024-11-18 01:17:29.067 +03:00 [DBG] A data reader was disposed.
2024-11-18 01:17:29.068 +03:00 [DBG] Committing transaction.
2024-11-18 01:17:29.091 +03:00 [DBG] Committed transaction.
2024-11-18 01:17:29.092 +03:00 [DBG] Closing connection to database 'main' on server 'E:\Asp\WebApi1\CityInfo.db'.
2024-11-18 01:17:29.094 +03:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db'.
2024-11-18 01:17:29.095 +03:00 [DBG] Disposing transaction.
2024-11-18 01:17:29.096 +03:00 [DBG] An entity of type 'PointOfInterest' tracked by 'CityInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-11-18 01:17:29.099 +03:00 [DBG] SaveChanges completed for 'CityInfoContext' with 1 entities written to the database.
2024-11-18 01:17:29.101 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-18 01:17:29.110 +03:00 [DBG] No information found on request to perform content negotiation.
2024-11-18 01:17:29.111 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-18 01:17:29.112 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-18 01:17:29.114 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-18 01:17:29.116 +03:00 [INF] Executing CreatedAtRouteResult, writing value of type 'WebApi1.Models.PointOfInterestDto'.
2024-11-18 01:17:29.119 +03:00 [DBG] Found the endpoints ["WebApi1.Controllers.PointsOfInterestController.GetPointOfInterest (WebApi1)"] for address Microsoft.AspNetCore.Routing.RouteValuesAddress
2024-11-18 01:17:29.122 +03:00 [DBG] Successfully processed template api/cities/{cityId}/pointsofinterest/{pointofinterestid} for WebApi1.Controllers.PointsOfInterestController.GetPointOfInterest (WebApi1) resulting in /api/cities/3/pointsofinterest/19 and 
2024-11-18 01:17:29.129 +03:00 [DBG] Link generation succeeded for endpoints ["WebApi1.Controllers.PointsOfInterestController.GetPointOfInterest (WebApi1)"] with result /api/cities/3/pointsofinterest/19
2024-11-18 01:17:29.131 +03:00 [INF] Executed action WebApi1.Controllers.PointsOfInterestController.CreatePointOfInterest (WebApi1) in 750.0367ms
2024-11-18 01:17:29.135 +03:00 [INF] Executed endpoint 'WebApi1.Controllers.PointsOfInterestController.CreatePointOfInterest (WebApi1)'
2024-11-18 01:17:29.138 +03:00 [DBG] Connection id "0HN87AMAAVK2O" completed keep alive response.
2024-11-18 01:17:29.141 +03:00 [DBG] 'CityInfoContext' disposed.
2024-11-18 01:17:29.142 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7117/api/cities/3/pointsofinterest application/json 117 - 201 112 application/json;+charset=utf-8 810.8238ms
2024-11-18 01:19:40.160 +03:00 [DBG] Connection id "0HN87AMAAVK2O" disconnecting.
2024-11-18 01:19:40.163 +03:00 [DBG] Connection id "0HN87AMAAVK2O" stopped.
2024-11-18 01:19:40.166 +03:00 [DBG] Connection id "0HN87AMAAVK2O" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-11-18 01:21:05.974 +03:00 [INF] Application is shutting down...
2024-11-18 01:21:05.977 +03:00 [DBG] Hosting stopping
2024-11-18 01:21:05.997 +03:00 [DBG] Hosting stopped
2024-11-18 01:21:15.473 +03:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2024-11-18 01:21:15.659 +03:00 [DBG] Hosting starting
2024-11-18 01:21:15.686 +03:00 [INF] User profile is available. Using 'C:\Users\DaRK1AnGE1-\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-11-18 01:21:15.695 +03:00 [DBG] Reading data from file 'C:\Users\DaRK1AnGE1-\AppData\Local\ASP.NET\DataProtection-Keys\key-7aaf1ab6-3338-4bbe-824d-412c9ce49ea3.xml'.
2024-11-18 01:21:15.722 +03:00 [DBG] Found key {7aaf1ab6-3338-4bbe-824d-412c9ce49ea3}.
2024-11-18 01:21:15.748 +03:00 [DBG] Considering key {7aaf1ab6-3338-4bbe-824d-412c9ce49ea3} with expiration date 2025-02-15 20:08:59Z as default key.
2024-11-18 01:21:15.755 +03:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-11-18 01:21:15.768 +03:00 [DBG] Decrypting secret element using Windows DPAPI.
2024-11-18 01:21:15.771 +03:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-11-18 01:21:15.789 +03:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2024-11-18 01:21:15.800 +03:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2024-11-18 01:21:15.808 +03:00 [DBG] Using key {7aaf1ab6-3338-4bbe-824d-412c9ce49ea3} as the default key.
2024-11-18 01:21:15.811 +03:00 [DBG] Key ring with default key {7aaf1ab6-3338-4bbe-824d-412c9ce49ea3} was loaded during application startup.
2024-11-18 01:21:15.916 +03:00 [DBG] Using development certificate: CN=localhost (Thumbprint: 9E758B43FC1DB07235D03E669781821F9B436A79)
2024-11-18 01:21:15.961 +03:00 [INF] Now listening on: https://localhost:7117
2024-11-18 01:21:15.965 +03:00 [INF] Now listening on: http://localhost:5211
2024-11-18 01:21:15.967 +03:00 [DBG] Loaded hosting startup assembly WebApi1
2024-11-18 01:21:15.971 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-11-18 01:21:15.972 +03:00 [INF] Hosting environment: Development
2024-11-18 01:21:15.974 +03:00 [INF] Content root path: E:\Asp\WebApi1\
2024-11-18 01:21:15.975 +03:00 [DBG] Hosting started
2024-11-18 01:21:18.205 +03:00 [DBG] Connection id "0HN87AOK5K40E" received FIN.
2024-11-18 01:21:18.216 +03:00 [DBG] Connection id "0HN87AOK5K40E" accepted.
2024-11-18 01:21:18.218 +03:00 [DBG] Connection id "0HN87AOK5K40E" started.
2024-11-18 01:21:18.221 +03:00 [DBG] Connection id "0HN87AOK5K40F" accepted.
2024-11-18 01:21:18.222 +03:00 [DBG] Connection id "0HN87AOK5K40F" started.
2024-11-18 01:21:18.240 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2024-11-18 01:21:18.277 +03:00 [DBG] Connection id "0HN87AOK5K40E" stopped.
2024-11-18 01:21:18.292 +03:00 [DBG] Connection id "0HN87AOK5K40E" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-11-18 01:21:18.325 +03:00 [DBG] Connection 0HN87AOK5K40F established using the following protocol: "Tls12"
2024-11-18 01:21:18.383 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7117/api/authentication/authenticate application/json 114
2024-11-18 01:21:18.386 +03:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2024-11-18 01:21:18.417 +03:00 [DBG] POST requests are not supported
2024-11-18 01:21:18.480 +03:00 [DBG] 1 candidate(s) found for the request path '/api/authentication/authenticate'
2024-11-18 01:21:18.488 +03:00 [DBG] Endpoint 'WebApi1.Controllers.AuthenticationController.Authenticate (WebApi1)' with route pattern 'api/authentication/authenticate' is valid for the request path '/api/authentication/authenticate'
2024-11-18 01:21:18.491 +03:00 [DBG] Request matched endpoint 'WebApi1.Controllers.AuthenticationController.Authenticate (WebApi1)'
2024-11-18 01:21:18.588 +03:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-18 01:21:18.690 +03:00 [INF] Executing endpoint 'WebApi1.Controllers.AuthenticationController.Authenticate (WebApi1)'
2024-11-18 01:21:18.753 +03:00 [INF] Route matched with {action = "Authenticate", controller = "Authentication"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.ActionResult`1[System.String] Authenticate(AuthenticationRequestBody) on controller WebApi1.Controllers.AuthenticationController (WebApi1).
2024-11-18 01:21:18.756 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-18 01:21:18.758 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-18 01:21:18.764 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-11-18 01:21:18.768 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-18 01:21:18.770 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-11-18 01:21:18.772 +03:00 [DBG] Executing controller factory for controller WebApi1.Controllers.AuthenticationController (WebApi1)
2024-11-18 01:21:18.775 +03:00 [DBG] Executed controller factory for controller WebApi1.Controllers.AuthenticationController (WebApi1)
2024-11-18 01:21:18.782 +03:00 [DBG] Attempting to bind parameter 'authenticationRequestBody' of type 'WebApi1.Controllers.AuthenticationController+AuthenticationRequestBody' ...
2024-11-18 01:21:18.786 +03:00 [DBG] Attempting to bind parameter 'authenticationRequestBody' of type 'WebApi1.Controllers.AuthenticationController+AuthenticationRequestBody' using the name '' in request data ...
2024-11-18 01:21:18.790 +03:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonPatchInputFormatter' for content type 'application/json'.
2024-11-18 01:21:18.792 +03:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonInputFormatter' for content type 'application/json'.
2024-11-18 01:21:18.805 +03:00 [DBG] Connection id "0HN87AOK5K40F", Request id "0HN87AOK5K40F:00000002": started reading request body.
2024-11-18 01:21:18.807 +03:00 [DBG] Connection id "0HN87AOK5K40F", Request id "0HN87AOK5K40F:00000002": done reading request body.
2024-11-18 01:21:18.997 +03:00 [DBG] Done attempting to bind parameter 'authenticationRequestBody' of type 'WebApi1.Controllers.AuthenticationController+AuthenticationRequestBody'.
2024-11-18 01:21:19.000 +03:00 [DBG] Done attempting to bind parameter 'authenticationRequestBody' of type 'WebApi1.Controllers.AuthenticationController+AuthenticationRequestBody'.
2024-11-18 01:21:19.001 +03:00 [DBG] Attempting to validate the bound parameter 'authenticationRequestBody' of type 'WebApi1.Controllers.AuthenticationController+AuthenticationRequestBody' ...
2024-11-18 01:21:19.016 +03:00 [DBG] Done attempting to validate the bound parameter 'authenticationRequestBody' of type 'WebApi1.Controllers.AuthenticationController+AuthenticationRequestBody'.
2024-11-18 01:21:19.176 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-18 01:21:19.189 +03:00 [DBG] No information found on request to perform content negotiation.
2024-11-18 01:21:19.190 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-18 01:21:19.192 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-18 01:21:19.196 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter' and content type 'text/plain' to write the response.
2024-11-18 01:21:19.199 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.String'.
2024-11-18 01:21:19.220 +03:00 [INF] Executed action WebApi1.Controllers.AuthenticationController.Authenticate (WebApi1) in 434.6909ms
2024-11-18 01:21:19.223 +03:00 [INF] Executed endpoint 'WebApi1.Controllers.AuthenticationController.Authenticate (WebApi1)'
2024-11-18 01:21:19.225 +03:00 [DBG] Connection id "0HN87AOK5K40F" completed keep alive response.
2024-11-18 01:21:19.238 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7117/api/authentication/authenticate application/json 114 - 200 - text/plain;+charset=utf-8 861.3744ms
2024-11-18 01:21:31.583 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7117/api/cities/3/pointsofinterest application/json 117
2024-11-18 01:21:31.585 +03:00 [DBG] POST requests are not supported
2024-11-18 01:21:31.589 +03:00 [DBG] 1 candidate(s) found for the request path '/api/cities/3/pointsofinterest'
2024-11-18 01:21:31.590 +03:00 [DBG] Endpoint 'WebApi1.Controllers.PointsOfInterestController.CreatePointOfInterest (WebApi1)' with route pattern 'api/cities/{cityId}/pointsofinterest' is valid for the request path '/api/cities/3/pointsofinterest'
2024-11-18 01:21:31.594 +03:00 [DBG] Request matched endpoint 'WebApi1.Controllers.PointsOfInterestController.CreatePointOfInterest (WebApi1)'
2024-11-18 01:21:31.718 +03:00 [DBG] Successfully validated the token.
2024-11-18 01:21:31.720 +03:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2024-11-18 01:21:31.728 +03:00 [INF] Authorization failed. These requirements were not met:
ClaimsAuthorizationRequirement:Claim.Type=city and Claim.Value is one of the following values: (Antwerp)
2024-11-18 01:21:31.733 +03:00 [INF] AuthenticationScheme: Bearer was forbidden.
2024-11-18 01:21:31.735 +03:00 [DBG] Connection id "0HN87AOK5K40F" completed keep alive response.
2024-11-18 01:21:31.737 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7117/api/cities/3/pointsofinterest application/json 117 - 403 0 - 154.3043ms
2024-11-18 01:21:31.749 +03:00 [DBG] Connection id "0HN87AOK5K40F", Request id "0HN87AOK5K40F:00000003": started reading request body.
2024-11-18 01:21:31.752 +03:00 [DBG] Connection id "0HN87AOK5K40F", Request id "0HN87AOK5K40F:00000003": done reading request body.
2024-11-18 01:23:42.372 +03:00 [DBG] Connection id "0HN87AOK5K40F" disconnecting.
2024-11-18 01:23:42.377 +03:00 [DBG] Connection id "0HN87AOK5K40F" stopped.
2024-11-18 01:23:42.379 +03:00 [DBG] Connection id "0HN87AOK5K40F" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-11-18 01:36:01.507 +03:00 [INF] Application is shutting down...
2024-11-18 01:36:01.509 +03:00 [DBG] Hosting stopping
2024-11-18 01:36:01.518 +03:00 [DBG] Hosting stopped
2024-11-18 01:38:02.232 +03:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.Versioning.ApiVersionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2024-11-18 01:38:02.456 +03:00 [DBG] Hosting starting
2024-11-18 01:38:02.485 +03:00 [INF] User profile is available. Using 'C:\Users\DaRK1AnGE1-\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-11-18 01:38:02.492 +03:00 [DBG] Reading data from file 'C:\Users\DaRK1AnGE1-\AppData\Local\ASP.NET\DataProtection-Keys\key-7aaf1ab6-3338-4bbe-824d-412c9ce49ea3.xml'.
2024-11-18 01:38:02.513 +03:00 [DBG] Found key {7aaf1ab6-3338-4bbe-824d-412c9ce49ea3}.
2024-11-18 01:38:02.540 +03:00 [DBG] Considering key {7aaf1ab6-3338-4bbe-824d-412c9ce49ea3} with expiration date 2025-02-15 20:08:59Z as default key.
2024-11-18 01:38:02.546 +03:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-11-18 01:38:02.561 +03:00 [DBG] Decrypting secret element using Windows DPAPI.
2024-11-18 01:38:02.564 +03:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-11-18 01:38:02.576 +03:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2024-11-18 01:38:02.596 +03:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2024-11-18 01:38:02.605 +03:00 [DBG] Using key {7aaf1ab6-3338-4bbe-824d-412c9ce49ea3} as the default key.
2024-11-18 01:38:02.609 +03:00 [DBG] Key ring with default key {7aaf1ab6-3338-4bbe-824d-412c9ce49ea3} was loaded during application startup.
2024-11-18 01:38:02.711 +03:00 [DBG] Using development certificate: CN=localhost (Thumbprint: 9E758B43FC1DB07235D03E669781821F9B436A79)
2024-11-18 01:38:02.762 +03:00 [INF] Now listening on: https://localhost:7117
2024-11-18 01:38:02.764 +03:00 [INF] Now listening on: http://localhost:5211
2024-11-18 01:38:02.772 +03:00 [DBG] Loaded hosting startup assembly WebApi1
2024-11-18 01:38:02.775 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-11-18 01:38:02.776 +03:00 [INF] Hosting environment: Development
2024-11-18 01:38:02.778 +03:00 [INF] Content root path: E:\Asp\WebApi1\
2024-11-18 01:38:02.779 +03:00 [DBG] Hosting started
2024-11-18 01:38:04.844 +03:00 [DBG] Connection id "0HN87B205M3JO" received FIN.
2024-11-18 01:38:04.855 +03:00 [DBG] Connection id "0HN87B205M3JO" accepted.
2024-11-18 01:38:04.858 +03:00 [DBG] Connection id "0HN87B205M3JO" started.
2024-11-18 01:38:04.860 +03:00 [DBG] Connection id "0HN87B205M3JP" accepted.
2024-11-18 01:38:04.870 +03:00 [DBG] Connection id "0HN87B205M3JP" started.
2024-11-18 01:38:04.890 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2024-11-18 01:38:04.942 +03:00 [DBG] Connection id "0HN87B205M3JO" stopped.
2024-11-18 01:38:05.102 +03:00 [DBG] Connection 0HN87B205M3JP established using the following protocol: "Tls12"
2024-11-18 01:38:05.549 +03:00 [DBG] Connection id "0HN87B205M3JO" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-11-18 01:38:05.678 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7117/api/cities - -
2024-11-18 01:38:05.687 +03:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2024-11-18 01:38:05.775 +03:00 [DBG] The request path  does not match the path filter
2024-11-18 01:38:05.822 +03:00 [DBG] 1 candidate(s) found for the request path '/api/cities'
2024-11-18 01:38:05.844 +03:00 [DBG] Endpoint 'WebApi1.Controllers.CitiesController.GetCities (WebApi1)' with route pattern 'api/cities' is valid for the request path '/api/cities'
2024-11-18 01:38:05.909 +03:00 [INF] Request did not specify a service API version, but multiple candidate actions were found. Candidate actions: WebApi1.Controllers.CitiesController.GetCities (WebApi1)
2024-11-18 01:38:05.913 +03:00 [DBG] Request matched endpoint 'null'
2024-11-18 01:38:06.189 +03:00 [DBG] Successfully validated the token.
2024-11-18 01:38:06.192 +03:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2024-11-18 01:38:06.195 +03:00 [INF] Executing endpoint 'Microsoft.AspNetCore.Http.Endpoint'
2024-11-18 01:38:06.201 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-18 01:38:06.622 +03:00 [DBG] No information found on request to perform content negotiation.
2024-11-18 01:38:06.623 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-18 01:38:06.671 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-18 01:38:06.673 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-18 01:38:06.768 +03:00 [INF] Executing ObjectResult, writing value of type '<>f__AnonymousType0`1[[<>f__AnonymousType1`3[[System.String, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[<>f__AnonymousType2`1[[System.String, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], Microsoft.AspNetCore.Mvc.Versioning, Version=5.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60]], Microsoft.AspNetCore.Mvc.Versioning, Version=5.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60]]'.
2024-11-18 01:38:06.973 +03:00 [INF] Executed endpoint 'Microsoft.AspNetCore.Http.Endpoint'
2024-11-18 01:38:06.975 +03:00 [DBG] Connection id "0HN87B205M3JP" completed keep alive response.
2024-11-18 01:38:06.978 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7117/api/cities - - - 400 123 application/json;+charset=utf-8 1308.8173ms
2024-11-18 01:38:15.892 +03:00 [INF] Application is shutting down...
2024-11-18 01:38:15.902 +03:00 [DBG] Hosting stopping
2024-11-18 01:38:15.927 +03:00 [DBG] Connection id "0HN87B205M3JP" disconnecting.
2024-11-18 01:38:15.933 +03:00 [DBG] Connection id "0HN87B205M3JP" stopped.
2024-11-18 01:38:15.935 +03:00 [DBG] Connection id "0HN87B205M3JP" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-11-18 01:38:15.946 +03:00 [DBG] Hosting stopped
2024-11-18 01:40:06.479 +03:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.Versioning.ApiVersionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2024-11-18 01:40:06.880 +03:00 [DBG] Hosting starting
2024-11-18 01:40:06.915 +03:00 [INF] User profile is available. Using 'C:\Users\DaRK1AnGE1-\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-11-18 01:40:06.927 +03:00 [DBG] Reading data from file 'C:\Users\DaRK1AnGE1-\AppData\Local\ASP.NET\DataProtection-Keys\key-7aaf1ab6-3338-4bbe-824d-412c9ce49ea3.xml'.
2024-11-18 01:40:06.964 +03:00 [DBG] Found key {7aaf1ab6-3338-4bbe-824d-412c9ce49ea3}.
2024-11-18 01:40:07.035 +03:00 [DBG] Considering key {7aaf1ab6-3338-4bbe-824d-412c9ce49ea3} with expiration date 2025-02-15 20:08:59Z as default key.
2024-11-18 01:40:07.061 +03:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-11-18 01:40:07.083 +03:00 [DBG] Decrypting secret element using Windows DPAPI.
2024-11-18 01:40:07.092 +03:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-11-18 01:40:07.120 +03:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2024-11-18 01:40:07.134 +03:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2024-11-18 01:40:07.149 +03:00 [DBG] Using key {7aaf1ab6-3338-4bbe-824d-412c9ce49ea3} as the default key.
2024-11-18 01:40:07.158 +03:00 [DBG] Key ring with default key {7aaf1ab6-3338-4bbe-824d-412c9ce49ea3} was loaded during application startup.
2024-11-18 01:40:07.471 +03:00 [DBG] Using development certificate: CN=localhost (Thumbprint: 9E758B43FC1DB07235D03E669781821F9B436A79)
2024-11-18 01:40:07.562 +03:00 [INF] Now listening on: https://localhost:7117
2024-11-18 01:40:07.585 +03:00 [INF] Now listening on: http://localhost:5211
2024-11-18 01:40:07.590 +03:00 [DBG] Loaded hosting startup assembly WebApi1
2024-11-18 01:40:07.662 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-11-18 01:40:07.666 +03:00 [INF] Hosting environment: Development
2024-11-18 01:40:07.670 +03:00 [INF] Content root path: E:\Asp\WebApi1\
2024-11-18 01:40:07.675 +03:00 [DBG] Hosting started
2024-11-18 01:40:10.079 +03:00 [DBG] Connection id "0HN87B35G0IFD" received FIN.
2024-11-18 01:40:10.093 +03:00 [DBG] Connection id "0HN87B35G0IFD" accepted.
2024-11-18 01:40:10.100 +03:00 [DBG] Connection id "0HN87B35G0IFE" accepted.
2024-11-18 01:40:10.105 +03:00 [DBG] Connection id "0HN87B35G0IFD" started.
2024-11-18 01:40:10.105 +03:00 [DBG] Connection id "0HN87B35G0IFE" started.
2024-11-18 01:40:10.190 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2024-11-18 01:40:10.354 +03:00 [DBG] Connection 0HN87B35G0IFE established using the following protocol: "Tls12"
2024-11-18 01:40:10.372 +03:00 [DBG] Connection id "0HN87B35G0IFD" stopped.
2024-11-18 01:40:10.430 +03:00 [DBG] Connection id "0HN87B35G0IFD" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-11-18 01:40:10.472 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7117/api/cities - -
2024-11-18 01:40:10.476 +03:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2024-11-18 01:40:10.613 +03:00 [DBG] The request path  does not match the path filter
2024-11-18 01:40:10.683 +03:00 [DBG] 1 candidate(s) found for the request path '/api/cities'
2024-11-18 01:40:10.696 +03:00 [DBG] Endpoint 'WebApi1.Controllers.CitiesController.GetCities (WebApi1)' with route pattern 'api/cities' is valid for the request path '/api/cities'
2024-11-18 01:40:10.721 +03:00 [DBG] Request matched endpoint 'WebApi1.Controllers.CitiesController.GetCities (WebApi1)'
2024-11-18 01:40:11.123 +03:00 [DBG] Successfully validated the token.
2024-11-18 01:40:11.130 +03:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2024-11-18 01:40:11.136 +03:00 [INF] Executing endpoint 'WebApi1.Controllers.CitiesController.GetCities (WebApi1)'
2024-11-18 01:40:11.214 +03:00 [INF] Route matched with {action = "GetCities", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[WebApi1.Models.CityWithoutPointOfInterestDto]]] GetCities(System.String, System.String, Int32, Int32) on controller WebApi1.Controllers.CitiesController (WebApi1).
2024-11-18 01:40:11.220 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-18 01:40:11.223 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-18 01:40:11.229 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-18 01:40:11.236 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-18 01:40:11.242 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-18 01:40:11.249 +03:00 [DBG] Executing controller factory for controller WebApi1.Controllers.CitiesController (WebApi1)
2024-11-18 01:40:11.491 +03:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2024-11-18 01:40:11.957 +03:00 [DBG] Executed controller factory for controller WebApi1.Controllers.CitiesController (WebApi1)
2024-11-18 01:40:11.965 +03:00 [DBG] Attempting to bind parameter 'name' of type 'System.String' ...
2024-11-18 01:40:11.970 +03:00 [DBG] Attempting to bind parameter 'name' of type 'System.String' using the name '' in request data ...
2024-11-18 01:40:11.977 +03:00 [DBG] Could not find a value in the request with name '' for binding parameter 'name' of type 'System.String'.
2024-11-18 01:40:11.989 +03:00 [DBG] Done attempting to bind parameter 'name' of type 'System.String'.
2024-11-18 01:40:11.999 +03:00 [DBG] Done attempting to bind parameter 'name' of type 'System.String'.
2024-11-18 01:40:12.002 +03:00 [DBG] Attempting to validate the bound parameter 'name' of type 'System.String' ...
2024-11-18 01:40:12.008 +03:00 [DBG] Done attempting to validate the bound parameter 'name' of type 'System.String'.
2024-11-18 01:40:12.018 +03:00 [DBG] Attempting to bind parameter 'searchQuery' of type 'System.String' ...
2024-11-18 01:40:12.022 +03:00 [DBG] Attempting to bind parameter 'searchQuery' of type 'System.String' using the name '' in request data ...
2024-11-18 01:40:12.027 +03:00 [DBG] Could not find a value in the request with name '' for binding parameter 'searchQuery' of type 'System.String'.
2024-11-18 01:40:12.033 +03:00 [DBG] Done attempting to bind parameter 'searchQuery' of type 'System.String'.
2024-11-18 01:40:12.036 +03:00 [DBG] Done attempting to bind parameter 'searchQuery' of type 'System.String'.
2024-11-18 01:40:12.049 +03:00 [DBG] Attempting to validate the bound parameter 'searchQuery' of type 'System.String' ...
2024-11-18 01:40:12.055 +03:00 [DBG] Done attempting to validate the bound parameter 'searchQuery' of type 'System.String'.
2024-11-18 01:40:12.059 +03:00 [DBG] Attempting to bind parameter 'pageNumber' of type 'System.Int32' ...
2024-11-18 01:40:12.068 +03:00 [DBG] Attempting to bind parameter 'pageNumber' of type 'System.Int32' using the name '' in request data ...
2024-11-18 01:40:12.077 +03:00 [DBG] Could not find a value in the request with name '' for binding parameter 'pageNumber' of type 'System.Int32'.
2024-11-18 01:40:12.083 +03:00 [DBG] Done attempting to bind parameter 'pageNumber' of type 'System.Int32'.
2024-11-18 01:40:12.086 +03:00 [DBG] Done attempting to bind parameter 'pageNumber' of type 'System.Int32'.
2024-11-18 01:40:12.096 +03:00 [DBG] Attempting to validate the bound parameter 'pageNumber' of type 'System.Int32' ...
2024-11-18 01:40:12.101 +03:00 [DBG] Done attempting to validate the bound parameter 'pageNumber' of type 'System.Int32'.
2024-11-18 01:40:12.105 +03:00 [DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' ...
2024-11-18 01:40:12.119 +03:00 [DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' using the name '' in request data ...
2024-11-18 01:40:12.133 +03:00 [DBG] Could not find a value in the request with name '' for binding parameter 'pageSize' of type 'System.Int32'.
2024-11-18 01:40:12.139 +03:00 [DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
2024-11-18 01:40:12.145 +03:00 [DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
2024-11-18 01:40:12.149 +03:00 [DBG] Attempting to validate the bound parameter 'pageSize' of type 'System.Int32' ...
2024-11-18 01:40:12.152 +03:00 [DBG] Done attempting to validate the bound parameter 'pageSize' of type 'System.Int32'.
2024-11-18 01:40:13.942 +03:00 [INF] Entity Framework Core 6.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.0' with options: None
2024-11-18 01:40:14.029 +03:00 [DBG] Compiling query expression: 
'DbSet<City>()
    .Count()'
2024-11-18 01:40:14.583 +03:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<int>(
    asyncEnumerable: new SingleQueryingEnumerable<int>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT COUNT(*)
            FROM Cities AS c), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, int>, 
        WebApi1.DbContexts.CityInfoContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2024-11-18 01:40:14.717 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-18 01:40:14.799 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (71ms).
2024-11-18 01:40:14.815 +03:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2024-11-18 01:40:14.864 +03:00 [DBG] Opened connection to database 'main' on server 'E:\Asp\WebApi1\CityInfo.db'.
2024-11-18 01:40:14.897 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "Cities" AS "c"
2024-11-18 01:40:14.984 +03:00 [INF] Executed DbCommand (93ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "Cities" AS "c"
2024-11-18 01:40:15.004 +03:00 [DBG] A data reader was disposed.
2024-11-18 01:40:15.014 +03:00 [DBG] Closing connection to database 'main' on server 'E:\Asp\WebApi1\CityInfo.db'.
2024-11-18 01:40:15.028 +03:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db'.
2024-11-18 01:40:15.062 +03:00 [DBG] Compiling query expression: 
'DbSet<City>()
    .OrderBy(c => c.Name)
    .Skip(__p_0)
    .Take(__p_1)'
2024-11-18 01:40:15.200 +03:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<City>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: City.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: City.Description (string) MaxLength(200), 1], [Property: City.Name (string) Required MaxLength(50), 2] }
        SELECT c.Id, c.Description, c.Name
        FROM Cities AS c
        ORDER BY c.Name ASC
        OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, City>, 
    WebApi1.DbContexts.CityInfoContext, 
    False, 
    False, 
    True
)'
2024-11-18 01:40:15.228 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-18 01:40:15.232 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (4ms).
2024-11-18 01:40:15.241 +03:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2024-11-18 01:40:15.247 +03:00 [DBG] Opened connection to database 'main' on server 'E:\Asp\WebApi1\CityInfo.db'.
2024-11-18 01:40:15.259 +03:00 [DBG] Executing DbCommand [Parameters=[@__p_1='?' (DbType = Int32), @__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Name"
FROM "Cities" AS "c"
ORDER BY "c"."Name"
LIMIT @__p_1 OFFSET @__p_0
2024-11-18 01:40:15.278 +03:00 [INF] Executed DbCommand (28ms) [Parameters=[@__p_1='?' (DbType = Int32), @__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Name"
FROM "Cities" AS "c"
ORDER BY "c"."Name"
LIMIT @__p_1 OFFSET @__p_0
2024-11-18 01:40:15.325 +03:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-11-18 01:40:15.403 +03:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-11-18 01:40:15.415 +03:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-11-18 01:40:15.418 +03:00 [DBG] A data reader was disposed.
2024-11-18 01:40:15.420 +03:00 [DBG] Closing connection to database 'main' on server 'E:\Asp\WebApi1\CityInfo.db'.
2024-11-18 01:40:15.423 +03:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db'.
2024-11-18 01:40:15.493 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-18 01:40:15.503 +03:00 [DBG] No information found on request to perform content negotiation.
2024-11-18 01:40:15.505 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-18 01:40:15.507 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-18 01:40:15.514 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-18 01:40:15.517 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[WebApi1.Models.CityWithoutPointOfInterestDto, WebApi1, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-18 01:40:15.981 +03:00 [INF] Executed action WebApi1.Controllers.CitiesController.GetCities (WebApi1) in 4715.8447ms
2024-11-18 01:40:15.990 +03:00 [INF] Executed endpoint 'WebApi1.Controllers.CitiesController.GetCities (WebApi1)'
2024-11-18 01:40:15.999 +03:00 [DBG] Connection id "0HN87B35G0IFE" completed keep alive response.
2024-11-18 01:40:16.017 +03:00 [DBG] 'CityInfoContext' disposed.
2024-11-18 01:40:16.030 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7117/api/cities - - - 200 254 application/json;+charset=utf-8 5577.3728ms
2024-11-18 01:42:26.962 +03:00 [DBG] Connection id "0HN87B35G0IFE" disconnecting.
2024-11-18 01:42:26.965 +03:00 [DBG] Connection id "0HN87B35G0IFE" stopped.
2024-11-18 01:42:26.967 +03:00 [DBG] Connection id "0HN87B35G0IFE" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-11-18 01:48:34.324 +03:00 [INF] Application is shutting down...
2024-11-18 01:48:34.327 +03:00 [DBG] Hosting stopping
2024-11-18 01:48:34.339 +03:00 [DBG] Hosting stopped
2024-11-18 01:48:41.983 +03:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.Versioning.ApiVersionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2024-11-18 01:48:42.242 +03:00 [DBG] Hosting starting
2024-11-18 01:48:42.286 +03:00 [INF] User profile is available. Using 'C:\Users\DaRK1AnGE1-\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-11-18 01:48:42.314 +03:00 [DBG] Reading data from file 'C:\Users\DaRK1AnGE1-\AppData\Local\ASP.NET\DataProtection-Keys\key-7aaf1ab6-3338-4bbe-824d-412c9ce49ea3.xml'.
2024-11-18 01:48:42.379 +03:00 [DBG] Found key {7aaf1ab6-3338-4bbe-824d-412c9ce49ea3}.
2024-11-18 01:48:42.495 +03:00 [DBG] Considering key {7aaf1ab6-3338-4bbe-824d-412c9ce49ea3} with expiration date 2025-02-15 20:08:59Z as default key.
2024-11-18 01:48:42.522 +03:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-11-18 01:48:42.612 +03:00 [DBG] Decrypting secret element using Windows DPAPI.
2024-11-18 01:48:42.632 +03:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-11-18 01:48:43.054 +03:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2024-11-18 01:48:43.065 +03:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2024-11-18 01:48:43.087 +03:00 [DBG] Using key {7aaf1ab6-3338-4bbe-824d-412c9ce49ea3} as the default key.
2024-11-18 01:48:43.107 +03:00 [DBG] Key ring with default key {7aaf1ab6-3338-4bbe-824d-412c9ce49ea3} was loaded during application startup.
2024-11-18 01:48:43.332 +03:00 [DBG] Using development certificate: CN=localhost (Thumbprint: 9E758B43FC1DB07235D03E669781821F9B436A79)
2024-11-18 01:48:43.455 +03:00 [INF] Now listening on: https://localhost:7117
2024-11-18 01:48:43.462 +03:00 [INF] Now listening on: http://localhost:5211
2024-11-18 01:48:43.466 +03:00 [DBG] Loaded hosting startup assembly WebApi1
2024-11-18 01:48:43.475 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-11-18 01:48:43.478 +03:00 [INF] Hosting environment: Development
2024-11-18 01:48:43.487 +03:00 [INF] Content root path: E:\Asp\WebApi1\
2024-11-18 01:48:43.492 +03:00 [DBG] Hosting started
2024-11-18 01:48:46.328 +03:00 [DBG] Connection id "0HN87B7VBBF8E" received FIN.
2024-11-18 01:48:46.340 +03:00 [DBG] Connection id "0HN87B7VBBF8E" accepted.
2024-11-18 01:48:46.343 +03:00 [DBG] Connection id "0HN87B7VBBF8E" started.
2024-11-18 01:48:46.346 +03:00 [DBG] Connection id "0HN87B7VBBF8F" accepted.
2024-11-18 01:48:46.348 +03:00 [DBG] Connection id "0HN87B7VBBF8F" started.
2024-11-18 01:48:46.366 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2024-11-18 01:48:46.457 +03:00 [DBG] Connection id "0HN87B7VBBF8E" stopped.
2024-11-18 01:48:46.548 +03:00 [DBG] Connection 0HN87B7VBBF8F established using the following protocol: "Tls12"
2024-11-18 01:48:46.704 +03:00 [DBG] Connection id "0HN87B7VBBF8E" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-11-18 01:48:46.857 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7117/api/cities - -
2024-11-18 01:48:46.861 +03:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2024-11-18 01:48:46.941 +03:00 [DBG] The request path  does not match the path filter
2024-11-18 01:48:47.015 +03:00 [DBG] 1 candidate(s) found for the request path '/api/cities'
2024-11-18 01:48:47.029 +03:00 [DBG] Endpoint 'WebApi1.Controllers.CitiesController.GetCities (WebApi1)' with route pattern 'api/cities' is valid for the request path '/api/cities'
2024-11-18 01:48:47.053 +03:00 [DBG] Request matched endpoint 'WebApi1.Controllers.CitiesController.GetCities (WebApi1)'
2024-11-18 01:48:47.395 +03:00 [DBG] Successfully validated the token.
2024-11-18 01:48:47.398 +03:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2024-11-18 01:48:47.403 +03:00 [INF] Executing endpoint 'WebApi1.Controllers.CitiesController.GetCities (WebApi1)'
2024-11-18 01:48:47.493 +03:00 [INF] Route matched with {action = "GetCities", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[WebApi1.Models.CityWithoutPointOfInterestDto]]] GetCities(System.String, System.String, Int32, Int32) on controller WebApi1.Controllers.CitiesController (WebApi1).
2024-11-18 01:48:47.500 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-18 01:48:47.509 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-18 01:48:47.511 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-18 01:48:47.517 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-18 01:48:47.522 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-18 01:48:47.554 +03:00 [DBG] Executing controller factory for controller WebApi1.Controllers.CitiesController (WebApi1)
2024-11-18 01:48:47.756 +03:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2024-11-18 01:48:48.160 +03:00 [DBG] Executed controller factory for controller WebApi1.Controllers.CitiesController (WebApi1)
2024-11-18 01:48:48.166 +03:00 [DBG] Attempting to bind parameter 'name' of type 'System.String' ...
2024-11-18 01:48:48.174 +03:00 [DBG] Attempting to bind parameter 'name' of type 'System.String' using the name '' in request data ...
2024-11-18 01:48:48.180 +03:00 [DBG] Could not find a value in the request with name '' for binding parameter 'name' of type 'System.String'.
2024-11-18 01:48:48.183 +03:00 [DBG] Done attempting to bind parameter 'name' of type 'System.String'.
2024-11-18 01:48:48.186 +03:00 [DBG] Done attempting to bind parameter 'name' of type 'System.String'.
2024-11-18 01:48:48.189 +03:00 [DBG] Attempting to validate the bound parameter 'name' of type 'System.String' ...
2024-11-18 01:48:48.196 +03:00 [DBG] Done attempting to validate the bound parameter 'name' of type 'System.String'.
2024-11-18 01:48:48.206 +03:00 [DBG] Attempting to bind parameter 'searchQuery' of type 'System.String' ...
2024-11-18 01:48:48.213 +03:00 [DBG] Attempting to bind parameter 'searchQuery' of type 'System.String' using the name '' in request data ...
2024-11-18 01:48:48.215 +03:00 [DBG] Could not find a value in the request with name '' for binding parameter 'searchQuery' of type 'System.String'.
2024-11-18 01:48:48.221 +03:00 [DBG] Done attempting to bind parameter 'searchQuery' of type 'System.String'.
2024-11-18 01:48:48.222 +03:00 [DBG] Done attempting to bind parameter 'searchQuery' of type 'System.String'.
2024-11-18 01:48:48.226 +03:00 [DBG] Attempting to validate the bound parameter 'searchQuery' of type 'System.String' ...
2024-11-18 01:48:48.227 +03:00 [DBG] Done attempting to validate the bound parameter 'searchQuery' of type 'System.String'.
2024-11-18 01:48:48.230 +03:00 [DBG] Attempting to bind parameter 'pageNumber' of type 'System.Int32' ...
2024-11-18 01:48:48.242 +03:00 [DBG] Attempting to bind parameter 'pageNumber' of type 'System.Int32' using the name '' in request data ...
2024-11-18 01:48:48.245 +03:00 [DBG] Could not find a value in the request with name '' for binding parameter 'pageNumber' of type 'System.Int32'.
2024-11-18 01:48:48.248 +03:00 [DBG] Done attempting to bind parameter 'pageNumber' of type 'System.Int32'.
2024-11-18 01:48:48.255 +03:00 [DBG] Done attempting to bind parameter 'pageNumber' of type 'System.Int32'.
2024-11-18 01:48:48.260 +03:00 [DBG] Attempting to validate the bound parameter 'pageNumber' of type 'System.Int32' ...
2024-11-18 01:48:48.265 +03:00 [DBG] Done attempting to validate the bound parameter 'pageNumber' of type 'System.Int32'.
2024-11-18 01:48:48.274 +03:00 [DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' ...
2024-11-18 01:48:48.295 +03:00 [DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' using the name '' in request data ...
2024-11-18 01:48:48.306 +03:00 [DBG] Could not find a value in the request with name '' for binding parameter 'pageSize' of type 'System.Int32'.
2024-11-18 01:48:48.310 +03:00 [DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
2024-11-18 01:48:48.314 +03:00 [DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
2024-11-18 01:48:48.325 +03:00 [DBG] Attempting to validate the bound parameter 'pageSize' of type 'System.Int32' ...
2024-11-18 01:48:48.331 +03:00 [DBG] Done attempting to validate the bound parameter 'pageSize' of type 'System.Int32'.
2024-11-18 01:48:50.045 +03:00 [INF] Entity Framework Core 6.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.0' with options: None
2024-11-18 01:48:50.122 +03:00 [DBG] Compiling query expression: 
'DbSet<City>()
    .Count()'
2024-11-18 01:48:50.416 +03:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<int>(
    asyncEnumerable: new SingleQueryingEnumerable<int>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT COUNT(*)
            FROM Cities AS c), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, int>, 
        WebApi1.DbContexts.CityInfoContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2024-11-18 01:48:50.501 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-18 01:48:50.578 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (69ms).
2024-11-18 01:48:50.590 +03:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2024-11-18 01:48:50.625 +03:00 [DBG] Opened connection to database 'main' on server 'E:\Asp\WebApi1\CityInfo.db'.
2024-11-18 01:48:50.648 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "Cities" AS "c"
2024-11-18 01:48:50.692 +03:00 [INF] Executed DbCommand (49ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "Cities" AS "c"
2024-11-18 01:48:50.712 +03:00 [DBG] A data reader was disposed.
2024-11-18 01:48:50.721 +03:00 [DBG] Closing connection to database 'main' on server 'E:\Asp\WebApi1\CityInfo.db'.
2024-11-18 01:48:50.736 +03:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db'.
2024-11-18 01:48:50.759 +03:00 [DBG] Compiling query expression: 
'DbSet<City>()
    .OrderBy(c => c.Name)
    .Skip(__p_0)
    .Take(__p_1)'
2024-11-18 01:48:50.859 +03:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<City>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: City.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: City.Description (string) MaxLength(200), 1], [Property: City.Name (string) Required MaxLength(50), 2] }
        SELECT c.Id, c.Description, c.Name
        FROM Cities AS c
        ORDER BY c.Name ASC
        OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, City>, 
    WebApi1.DbContexts.CityInfoContext, 
    False, 
    False, 
    True
)'
2024-11-18 01:48:50.878 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-18 01:48:50.879 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2024-11-18 01:48:50.884 +03:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2024-11-18 01:48:50.888 +03:00 [DBG] Opened connection to database 'main' on server 'E:\Asp\WebApi1\CityInfo.db'.
2024-11-18 01:48:50.897 +03:00 [DBG] Executing DbCommand [Parameters=[@__p_1='?' (DbType = Int32), @__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Name"
FROM "Cities" AS "c"
ORDER BY "c"."Name"
LIMIT @__p_1 OFFSET @__p_0
2024-11-18 01:48:50.911 +03:00 [INF] Executed DbCommand (21ms) [Parameters=[@__p_1='?' (DbType = Int32), @__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Name"
FROM "Cities" AS "c"
ORDER BY "c"."Name"
LIMIT @__p_1 OFFSET @__p_0
2024-11-18 01:48:50.953 +03:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-11-18 01:48:51.027 +03:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-11-18 01:48:51.034 +03:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-11-18 01:48:51.045 +03:00 [DBG] A data reader was disposed.
2024-11-18 01:48:51.060 +03:00 [DBG] Closing connection to database 'main' on server 'E:\Asp\WebApi1\CityInfo.db'.
2024-11-18 01:48:51.080 +03:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db'.
2024-11-18 01:48:51.162 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-18 01:48:51.246 +03:00 [DBG] No information found on request to perform content negotiation.
2024-11-18 01:48:51.249 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-18 01:48:51.266 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-18 01:48:51.275 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-18 01:48:51.299 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[WebApi1.Models.CityWithoutPointOfInterestDto, WebApi1, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-18 01:48:51.628 +03:00 [INF] Executed action WebApi1.Controllers.CitiesController.GetCities (WebApi1) in 4062.9313ms
2024-11-18 01:48:51.643 +03:00 [INF] Executed endpoint 'WebApi1.Controllers.CitiesController.GetCities (WebApi1)'
2024-11-18 01:48:51.663 +03:00 [DBG] Connection id "0HN87B7VBBF8F" completed keep alive response.
2024-11-18 01:48:51.686 +03:00 [DBG] 'CityInfoContext' disposed.
2024-11-18 01:48:52.244 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7117/api/cities - - - 200 254 application/json;+charset=utf-8 5395.2283ms
2024-11-18 01:49:07.495 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7117/api/cities/1/pointsofinterest - -
2024-11-18 01:49:07.497 +03:00 [DBG] The request path  does not match the path filter
2024-11-18 01:49:07.502 +03:00 [DBG] 1 candidate(s) found for the request path '/api/cities/1/pointsofinterest'
2024-11-18 01:49:07.504 +03:00 [DBG] Endpoint 'WebApi1.Controllers.PointsOfInterestController.GetPointsOfInterest (WebApi1)' with route pattern 'api/cities/{cityId}/pointsofinterest' is valid for the request path '/api/cities/1/pointsofinterest'
2024-11-18 01:49:07.515 +03:00 [INF] Request did not specify a service API version, but multiple candidate actions were found. Candidate actions: WebApi1.Controllers.PointsOfInterestController.GetPointsOfInterest (WebApi1)
2024-11-18 01:49:07.520 +03:00 [DBG] Request matched endpoint 'null'
2024-11-18 01:49:07.523 +03:00 [DBG] Successfully validated the token.
2024-11-18 01:49:07.524 +03:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2024-11-18 01:49:07.526 +03:00 [INF] Executing endpoint 'Microsoft.AspNetCore.Http.Endpoint'
2024-11-18 01:49:07.538 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-18 01:49:07.543 +03:00 [DBG] No information found on request to perform content negotiation.
2024-11-18 01:49:07.544 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-18 01:49:07.545 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-18 01:49:07.547 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-18 01:49:07.550 +03:00 [INF] Executing ObjectResult, writing value of type '<>f__AnonymousType0`1[[<>f__AnonymousType1`3[[System.String, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[<>f__AnonymousType2`1[[System.String, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], Microsoft.AspNetCore.Mvc.Versioning, Version=5.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60]], Microsoft.AspNetCore.Mvc.Versioning, Version=5.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60]]'.
2024-11-18 01:49:07.573 +03:00 [INF] Executed endpoint 'Microsoft.AspNetCore.Http.Endpoint'
2024-11-18 01:49:07.575 +03:00 [DBG] Connection id "0HN87B7VBBF8F" completed keep alive response.
2024-11-18 01:49:07.579 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7117/api/cities/1/pointsofinterest - - - 400 192 application/json;+charset=utf-8 83.8719ms
2024-11-18 01:50:38.450 +03:00 [INF] Application is shutting down...
2024-11-18 01:50:38.452 +03:00 [DBG] Hosting stopping
2024-11-18 01:50:38.460 +03:00 [DBG] Connection id "0HN87B7VBBF8F" disconnecting.
2024-11-18 01:50:38.466 +03:00 [DBG] Connection id "0HN87B7VBBF8F" stopped.
2024-11-18 01:50:38.467 +03:00 [DBG] Connection id "0HN87B7VBBF8F" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-11-18 01:50:38.473 +03:00 [DBG] Hosting stopped
2024-11-18 01:50:45.870 +03:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.Versioning.ApiVersionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2024-11-18 01:50:46.102 +03:00 [DBG] Hosting starting
2024-11-18 01:50:46.127 +03:00 [INF] User profile is available. Using 'C:\Users\DaRK1AnGE1-\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-11-18 01:50:46.136 +03:00 [DBG] Reading data from file 'C:\Users\DaRK1AnGE1-\AppData\Local\ASP.NET\DataProtection-Keys\key-7aaf1ab6-3338-4bbe-824d-412c9ce49ea3.xml'.
2024-11-18 01:50:46.153 +03:00 [DBG] Found key {7aaf1ab6-3338-4bbe-824d-412c9ce49ea3}.
2024-11-18 01:50:46.173 +03:00 [DBG] Considering key {7aaf1ab6-3338-4bbe-824d-412c9ce49ea3} with expiration date 2025-02-15 20:08:59Z as default key.
2024-11-18 01:50:46.177 +03:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-11-18 01:50:46.185 +03:00 [DBG] Decrypting secret element using Windows DPAPI.
2024-11-18 01:50:46.189 +03:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-11-18 01:50:46.199 +03:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2024-11-18 01:50:46.206 +03:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2024-11-18 01:50:46.212 +03:00 [DBG] Using key {7aaf1ab6-3338-4bbe-824d-412c9ce49ea3} as the default key.
2024-11-18 01:50:46.216 +03:00 [DBG] Key ring with default key {7aaf1ab6-3338-4bbe-824d-412c9ce49ea3} was loaded during application startup.
2024-11-18 01:50:46.325 +03:00 [DBG] Using development certificate: CN=localhost (Thumbprint: 9E758B43FC1DB07235D03E669781821F9B436A79)
2024-11-18 01:50:46.382 +03:00 [INF] Now listening on: https://localhost:7117
2024-11-18 01:50:46.391 +03:00 [INF] Now listening on: http://localhost:5211
2024-11-18 01:50:46.395 +03:00 [DBG] Loaded hosting startup assembly WebApi1
2024-11-18 01:50:46.398 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-11-18 01:50:46.399 +03:00 [INF] Hosting environment: Development
2024-11-18 01:50:46.403 +03:00 [INF] Content root path: E:\Asp\WebApi1\
2024-11-18 01:50:46.404 +03:00 [DBG] Hosting started
2024-11-18 01:50:48.075 +03:00 [INF] Application is shutting down...
2024-11-18 01:50:48.084 +03:00 [DBG] Hosting stopping
2024-11-18 01:50:48.099 +03:00 [DBG] Hosting stopped
2024-11-18 01:51:06.485 +03:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.Versioning.ApiVersionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2024-11-18 01:51:06.718 +03:00 [DBG] Hosting starting
2024-11-18 01:51:06.749 +03:00 [INF] User profile is available. Using 'C:\Users\DaRK1AnGE1-\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-11-18 01:51:06.757 +03:00 [DBG] Reading data from file 'C:\Users\DaRK1AnGE1-\AppData\Local\ASP.NET\DataProtection-Keys\key-7aaf1ab6-3338-4bbe-824d-412c9ce49ea3.xml'.
2024-11-18 01:51:06.777 +03:00 [DBG] Found key {7aaf1ab6-3338-4bbe-824d-412c9ce49ea3}.
2024-11-18 01:51:06.803 +03:00 [DBG] Considering key {7aaf1ab6-3338-4bbe-824d-412c9ce49ea3} with expiration date 2025-02-15 20:08:59Z as default key.
2024-11-18 01:51:06.808 +03:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-11-18 01:51:06.816 +03:00 [DBG] Decrypting secret element using Windows DPAPI.
2024-11-18 01:51:06.829 +03:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-11-18 01:51:06.840 +03:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2024-11-18 01:51:06.846 +03:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2024-11-18 01:51:06.855 +03:00 [DBG] Using key {7aaf1ab6-3338-4bbe-824d-412c9ce49ea3} as the default key.
2024-11-18 01:51:06.858 +03:00 [DBG] Key ring with default key {7aaf1ab6-3338-4bbe-824d-412c9ce49ea3} was loaded during application startup.
2024-11-18 01:51:06.946 +03:00 [DBG] Using development certificate: CN=localhost (Thumbprint: 9E758B43FC1DB07235D03E669781821F9B436A79)
2024-11-18 01:51:06.998 +03:00 [INF] Now listening on: https://localhost:7117
2024-11-18 01:51:07.003 +03:00 [INF] Now listening on: http://localhost:5211
2024-11-18 01:51:07.009 +03:00 [DBG] Loaded hosting startup assembly WebApi1
2024-11-18 01:51:07.011 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-11-18 01:51:07.013 +03:00 [INF] Hosting environment: Development
2024-11-18 01:51:07.014 +03:00 [INF] Content root path: E:\Asp\WebApi1\
2024-11-18 01:51:07.018 +03:00 [DBG] Hosting started
2024-11-18 01:51:19.968 +03:00 [DBG] Connection id "0HN87B9D4IHT2" received FIN.
2024-11-18 01:51:19.978 +03:00 [DBG] Connection id "0HN87B9D4IHT2" accepted.
2024-11-18 01:51:19.980 +03:00 [DBG] Connection id "0HN87B9D4IHT2" started.
2024-11-18 01:51:19.983 +03:00 [DBG] Connection id "0HN87B9D4IHT3" accepted.
2024-11-18 01:51:19.986 +03:00 [DBG] Connection id "0HN87B9D4IHT3" started.
2024-11-18 01:51:20.004 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2024-11-18 01:51:20.070 +03:00 [DBG] Connection id "0HN87B9D4IHT2" stopped.
2024-11-18 01:51:20.087 +03:00 [DBG] Connection id "0HN87B9D4IHT2" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-11-18 01:51:20.108 +03:00 [DBG] Connection 0HN87B9D4IHT3 established using the following protocol: "Tls12"
2024-11-18 01:51:20.183 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7117/api/v1/cities - -
2024-11-18 01:51:20.186 +03:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2024-11-18 01:51:20.248 +03:00 [DBG] The request path  does not match the path filter
2024-11-18 01:51:20.370 +03:00 [DBG] 1 candidate(s) found for the request path '/api/v1/cities'
2024-11-18 01:51:20.381 +03:00 [DBG] Endpoint 'WebApi1.Controllers.CitiesController.GetCities (WebApi1)' with route pattern 'api/v{version:apiVersion}/cities' is valid for the request path '/api/v1/cities'
2024-11-18 01:51:20.392 +03:00 [DBG] Request matched endpoint 'WebApi1.Controllers.CitiesController.GetCities (WebApi1)'
2024-11-18 01:51:20.744 +03:00 [DBG] Successfully validated the token.
2024-11-18 01:51:20.747 +03:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2024-11-18 01:51:20.752 +03:00 [INF] Executing endpoint 'WebApi1.Controllers.CitiesController.GetCities (WebApi1)'
2024-11-18 01:51:20.822 +03:00 [INF] Route matched with {action = "GetCities", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[WebApi1.Models.CityWithoutPointOfInterestDto]]] GetCities(System.String, System.String, Int32, Int32) on controller WebApi1.Controllers.CitiesController (WebApi1).
2024-11-18 01:51:20.826 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-18 01:51:20.831 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-18 01:51:20.833 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-18 01:51:20.836 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-18 01:51:20.838 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-18 01:51:20.841 +03:00 [DBG] Executing controller factory for controller WebApi1.Controllers.CitiesController (WebApi1)
2024-11-18 01:51:21.033 +03:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2024-11-18 01:51:21.368 +03:00 [DBG] Executed controller factory for controller WebApi1.Controllers.CitiesController (WebApi1)
2024-11-18 01:51:21.373 +03:00 [DBG] Attempting to bind parameter 'name' of type 'System.String' ...
2024-11-18 01:51:21.378 +03:00 [DBG] Attempting to bind parameter 'name' of type 'System.String' using the name '' in request data ...
2024-11-18 01:51:21.382 +03:00 [DBG] Could not find a value in the request with name '' for binding parameter 'name' of type 'System.String'.
2024-11-18 01:51:21.385 +03:00 [DBG] Done attempting to bind parameter 'name' of type 'System.String'.
2024-11-18 01:51:21.387 +03:00 [DBG] Done attempting to bind parameter 'name' of type 'System.String'.
2024-11-18 01:51:21.389 +03:00 [DBG] Attempting to validate the bound parameter 'name' of type 'System.String' ...
2024-11-18 01:51:21.395 +03:00 [DBG] Done attempting to validate the bound parameter 'name' of type 'System.String'.
2024-11-18 01:51:21.401 +03:00 [DBG] Attempting to bind parameter 'searchQuery' of type 'System.String' ...
2024-11-18 01:51:21.405 +03:00 [DBG] Attempting to bind parameter 'searchQuery' of type 'System.String' using the name '' in request data ...
2024-11-18 01:51:21.407 +03:00 [DBG] Could not find a value in the request with name '' for binding parameter 'searchQuery' of type 'System.String'.
2024-11-18 01:51:21.415 +03:00 [DBG] Done attempting to bind parameter 'searchQuery' of type 'System.String'.
2024-11-18 01:51:21.419 +03:00 [DBG] Done attempting to bind parameter 'searchQuery' of type 'System.String'.
2024-11-18 01:51:21.421 +03:00 [DBG] Attempting to validate the bound parameter 'searchQuery' of type 'System.String' ...
2024-11-18 01:51:21.423 +03:00 [DBG] Done attempting to validate the bound parameter 'searchQuery' of type 'System.String'.
2024-11-18 01:51:21.426 +03:00 [DBG] Attempting to bind parameter 'pageNumber' of type 'System.Int32' ...
2024-11-18 01:51:21.428 +03:00 [DBG] Attempting to bind parameter 'pageNumber' of type 'System.Int32' using the name '' in request data ...
2024-11-18 01:51:21.431 +03:00 [DBG] Could not find a value in the request with name '' for binding parameter 'pageNumber' of type 'System.Int32'.
2024-11-18 01:51:21.433 +03:00 [DBG] Done attempting to bind parameter 'pageNumber' of type 'System.Int32'.
2024-11-18 01:51:21.435 +03:00 [DBG] Done attempting to bind parameter 'pageNumber' of type 'System.Int32'.
2024-11-18 01:51:21.436 +03:00 [DBG] Attempting to validate the bound parameter 'pageNumber' of type 'System.Int32' ...
2024-11-18 01:51:21.439 +03:00 [DBG] Done attempting to validate the bound parameter 'pageNumber' of type 'System.Int32'.
2024-11-18 01:51:21.447 +03:00 [DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' ...
2024-11-18 01:51:21.453 +03:00 [DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' using the name '' in request data ...
2024-11-18 01:51:21.456 +03:00 [DBG] Could not find a value in the request with name '' for binding parameter 'pageSize' of type 'System.Int32'.
2024-11-18 01:51:21.463 +03:00 [DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
2024-11-18 01:51:21.467 +03:00 [DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
2024-11-18 01:51:21.472 +03:00 [DBG] Attempting to validate the bound parameter 'pageSize' of type 'System.Int32' ...
2024-11-18 01:51:21.476 +03:00 [DBG] Done attempting to validate the bound parameter 'pageSize' of type 'System.Int32'.
2024-11-18 01:51:22.678 +03:00 [INF] Entity Framework Core 6.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.0' with options: None
2024-11-18 01:51:22.748 +03:00 [DBG] Compiling query expression: 
'DbSet<City>()
    .Count()'
2024-11-18 01:51:23.176 +03:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<int>(
    asyncEnumerable: new SingleQueryingEnumerable<int>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT COUNT(*)
            FROM Cities AS c), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, int>, 
        WebApi1.DbContexts.CityInfoContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2024-11-18 01:51:23.276 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-18 01:51:23.339 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (53ms).
2024-11-18 01:51:23.352 +03:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2024-11-18 01:51:23.384 +03:00 [DBG] Opened connection to database 'main' on server 'E:\Asp\WebApi1\CityInfo.db'.
2024-11-18 01:51:23.408 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "Cities" AS "c"
2024-11-18 01:51:23.463 +03:00 [INF] Executed DbCommand (61ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "Cities" AS "c"
2024-11-18 01:51:23.483 +03:00 [DBG] A data reader was disposed.
2024-11-18 01:51:23.493 +03:00 [DBG] Closing connection to database 'main' on server 'E:\Asp\WebApi1\CityInfo.db'.
2024-11-18 01:51:23.505 +03:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db'.
2024-11-18 01:51:23.523 +03:00 [DBG] Compiling query expression: 
'DbSet<City>()
    .OrderBy(c => c.Name)
    .Skip(__p_0)
    .Take(__p_1)'
2024-11-18 01:51:23.605 +03:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<City>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: City.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: City.Description (string) MaxLength(200), 1], [Property: City.Name (string) Required MaxLength(50), 2] }
        SELECT c.Id, c.Description, c.Name
        FROM Cities AS c
        ORDER BY c.Name ASC
        OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, City>, 
    WebApi1.DbContexts.CityInfoContext, 
    False, 
    False, 
    True
)'
2024-11-18 01:51:23.622 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-18 01:51:23.624 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2024-11-18 01:51:23.630 +03:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2024-11-18 01:51:23.633 +03:00 [DBG] Opened connection to database 'main' on server 'E:\Asp\WebApi1\CityInfo.db'.
2024-11-18 01:51:23.641 +03:00 [DBG] Executing DbCommand [Parameters=[@__p_1='?' (DbType = Int32), @__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Name"
FROM "Cities" AS "c"
ORDER BY "c"."Name"
LIMIT @__p_1 OFFSET @__p_0
2024-11-18 01:51:23.652 +03:00 [INF] Executed DbCommand (17ms) [Parameters=[@__p_1='?' (DbType = Int32), @__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Name"
FROM "Cities" AS "c"
ORDER BY "c"."Name"
LIMIT @__p_1 OFFSET @__p_0
2024-11-18 01:51:23.684 +03:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-11-18 01:51:23.722 +03:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-11-18 01:51:23.725 +03:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-11-18 01:51:23.739 +03:00 [DBG] A data reader was disposed.
2024-11-18 01:51:23.742 +03:00 [DBG] Closing connection to database 'main' on server 'E:\Asp\WebApi1\CityInfo.db'.
2024-11-18 01:51:23.746 +03:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db'.
2024-11-18 01:51:23.790 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-18 01:51:23.798 +03:00 [DBG] No information found on request to perform content negotiation.
2024-11-18 01:51:23.799 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-18 01:51:23.802 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-18 01:51:23.804 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-18 01:51:23.806 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[WebApi1.Models.CityWithoutPointOfInterestDto, WebApi1, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-18 01:51:24.006 +03:00 [INF] Executed action WebApi1.Controllers.CitiesController.GetCities (WebApi1) in 3157.3538ms
2024-11-18 01:51:24.010 +03:00 [INF] Executed endpoint 'WebApi1.Controllers.CitiesController.GetCities (WebApi1)'
2024-11-18 01:51:24.016 +03:00 [DBG] Connection id "0HN87B9D4IHT3" completed keep alive response.
2024-11-18 01:51:24.021 +03:00 [DBG] 'CityInfoContext' disposed.
2024-11-18 01:51:24.038 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7117/api/v1/cities - - - 200 254 application/json;+charset=utf-8 3861.0264ms
2024-11-18 01:51:37.252 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7117/api/v1/cities - -
2024-11-18 01:51:37.254 +03:00 [DBG] The request path  does not match the path filter
2024-11-18 01:51:37.258 +03:00 [DBG] 1 candidate(s) found for the request path '/api/v1/cities'
2024-11-18 01:51:37.259 +03:00 [DBG] Endpoint 'WebApi1.Controllers.CitiesController.GetCities (WebApi1)' with route pattern 'api/v{version:apiVersion}/cities' is valid for the request path '/api/v1/cities'
2024-11-18 01:51:37.265 +03:00 [DBG] Request matched endpoint 'WebApi1.Controllers.CitiesController.GetCities (WebApi1)'
2024-11-18 01:51:37.268 +03:00 [DBG] Successfully validated the token.
2024-11-18 01:51:37.270 +03:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2024-11-18 01:51:37.273 +03:00 [INF] Executing endpoint 'WebApi1.Controllers.CitiesController.GetCities (WebApi1)'
2024-11-18 01:51:37.275 +03:00 [INF] Route matched with {action = "GetCities", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[WebApi1.Models.CityWithoutPointOfInterestDto]]] GetCities(System.String, System.String, Int32, Int32) on controller WebApi1.Controllers.CitiesController (WebApi1).
2024-11-18 01:51:37.282 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-18 01:51:37.286 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-18 01:51:37.290 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-18 01:51:37.304 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-18 01:51:37.306 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-18 01:51:37.309 +03:00 [DBG] Executing controller factory for controller WebApi1.Controllers.CitiesController (WebApi1)
2024-11-18 01:51:37.335 +03:00 [DBG] Executed controller factory for controller WebApi1.Controllers.CitiesController (WebApi1)
2024-11-18 01:51:37.339 +03:00 [DBG] Attempting to bind parameter 'name' of type 'System.String' ...
2024-11-18 01:51:37.341 +03:00 [DBG] Attempting to bind parameter 'name' of type 'System.String' using the name '' in request data ...
2024-11-18 01:51:37.343 +03:00 [DBG] Could not find a value in the request with name '' for binding parameter 'name' of type 'System.String'.
2024-11-18 01:51:37.350 +03:00 [DBG] Done attempting to bind parameter 'name' of type 'System.String'.
2024-11-18 01:51:37.353 +03:00 [DBG] Done attempting to bind parameter 'name' of type 'System.String'.
2024-11-18 01:51:37.354 +03:00 [DBG] Attempting to validate the bound parameter 'name' of type 'System.String' ...
2024-11-18 01:51:37.356 +03:00 [DBG] Done attempting to validate the bound parameter 'name' of type 'System.String'.
2024-11-18 01:51:37.359 +03:00 [DBG] Attempting to bind parameter 'searchQuery' of type 'System.String' ...
2024-11-18 01:51:37.369 +03:00 [DBG] Attempting to bind parameter 'searchQuery' of type 'System.String' using the name '' in request data ...
2024-11-18 01:51:37.372 +03:00 [DBG] Could not find a value in the request with name '' for binding parameter 'searchQuery' of type 'System.String'.
2024-11-18 01:51:37.374 +03:00 [DBG] Done attempting to bind parameter 'searchQuery' of type 'System.String'.
2024-11-18 01:51:37.379 +03:00 [DBG] Done attempting to bind parameter 'searchQuery' of type 'System.String'.
2024-11-18 01:51:37.383 +03:00 [DBG] Attempting to validate the bound parameter 'searchQuery' of type 'System.String' ...
2024-11-18 01:51:37.385 +03:00 [DBG] Done attempting to validate the bound parameter 'searchQuery' of type 'System.String'.
2024-11-18 01:51:37.387 +03:00 [DBG] Attempting to bind parameter 'pageNumber' of type 'System.Int32' ...
2024-11-18 01:51:37.389 +03:00 [DBG] Attempting to bind parameter 'pageNumber' of type 'System.Int32' using the name '' in request data ...
2024-11-18 01:51:37.392 +03:00 [DBG] Could not find a value in the request with name '' for binding parameter 'pageNumber' of type 'System.Int32'.
2024-11-18 01:51:37.404 +03:00 [DBG] Done attempting to bind parameter 'pageNumber' of type 'System.Int32'.
2024-11-18 01:51:37.406 +03:00 [DBG] Done attempting to bind parameter 'pageNumber' of type 'System.Int32'.
2024-11-18 01:51:37.408 +03:00 [DBG] Attempting to validate the bound parameter 'pageNumber' of type 'System.Int32' ...
2024-11-18 01:51:37.410 +03:00 [DBG] Done attempting to validate the bound parameter 'pageNumber' of type 'System.Int32'.
2024-11-18 01:51:37.416 +03:00 [DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' ...
2024-11-18 01:51:37.419 +03:00 [DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' using the name '' in request data ...
2024-11-18 01:51:37.421 +03:00 [DBG] Could not find a value in the request with name '' for binding parameter 'pageSize' of type 'System.Int32'.
2024-11-18 01:51:37.423 +03:00 [DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
2024-11-18 01:51:37.424 +03:00 [DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
2024-11-18 01:51:37.426 +03:00 [DBG] Attempting to validate the bound parameter 'pageSize' of type 'System.Int32' ...
2024-11-18 01:51:37.449 +03:00 [DBG] Done attempting to validate the bound parameter 'pageSize' of type 'System.Int32'.
2024-11-18 01:51:37.453 +03:00 [INF] Entity Framework Core 6.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.0' with options: None
2024-11-18 01:51:37.462 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-18 01:51:37.465 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2024-11-18 01:51:37.468 +03:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2024-11-18 01:51:37.471 +03:00 [DBG] Opened connection to database 'main' on server 'E:\Asp\WebApi1\CityInfo.db'.
2024-11-18 01:51:37.473 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "Cities" AS "c"
2024-11-18 01:51:37.482 +03:00 [INF] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "Cities" AS "c"
2024-11-18 01:51:37.485 +03:00 [DBG] A data reader was disposed.
2024-11-18 01:51:37.486 +03:00 [DBG] Closing connection to database 'main' on server 'E:\Asp\WebApi1\CityInfo.db'.
2024-11-18 01:51:37.489 +03:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db'.
2024-11-18 01:51:37.495 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-18 01:51:37.498 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2024-11-18 01:51:37.501 +03:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2024-11-18 01:51:37.711 +03:00 [DBG] Opened connection to database 'main' on server 'E:\Asp\WebApi1\CityInfo.db'.
2024-11-18 01:51:37.717 +03:00 [DBG] Executing DbCommand [Parameters=[@__p_1='?' (DbType = Int32), @__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Name"
FROM "Cities" AS "c"
ORDER BY "c"."Name"
LIMIT @__p_1 OFFSET @__p_0
2024-11-18 01:51:37.753 +03:00 [INF] Executed DbCommand (36ms) [Parameters=[@__p_1='?' (DbType = Int32), @__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Name"
FROM "Cities" AS "c"
ORDER BY "c"."Name"
LIMIT @__p_1 OFFSET @__p_0
2024-11-18 01:51:37.758 +03:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-11-18 01:51:37.765 +03:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-11-18 01:51:37.767 +03:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-11-18 01:51:37.770 +03:00 [DBG] A data reader was disposed.
2024-11-18 01:51:37.774 +03:00 [DBG] Closing connection to database 'main' on server 'E:\Asp\WebApi1\CityInfo.db'.
2024-11-18 01:51:37.787 +03:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db'.
2024-11-18 01:51:37.791 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-18 01:51:37.801 +03:00 [DBG] No information found on request to perform content negotiation.
2024-11-18 01:51:37.802 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-18 01:51:37.805 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-18 01:51:37.816 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-18 01:51:37.819 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[WebApi1.Models.CityWithoutPointOfInterestDto, WebApi1, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-18 01:51:37.823 +03:00 [INF] Executed action WebApi1.Controllers.CitiesController.GetCities (WebApi1) in 513.9489ms
2024-11-18 01:51:37.830 +03:00 [INF] Executed endpoint 'WebApi1.Controllers.CitiesController.GetCities (WebApi1)'
2024-11-18 01:51:37.833 +03:00 [DBG] Connection id "0HN87B9D4IHT3" completed keep alive response.
2024-11-18 01:51:37.836 +03:00 [DBG] 'CityInfoContext' disposed.
2024-11-18 01:51:37.848 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7117/api/v1/cities - - - 200 254 application/json;+charset=utf-8 596.4323ms
2024-11-18 01:51:49.008 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7117/api/v1/cities - -
2024-11-18 01:51:49.011 +03:00 [DBG] The request path  does not match the path filter
2024-11-18 01:51:49.013 +03:00 [DBG] 1 candidate(s) found for the request path '/api/v1/cities'
2024-11-18 01:51:49.014 +03:00 [DBG] Endpoint 'WebApi1.Controllers.CitiesController.GetCities (WebApi1)' with route pattern 'api/v{version:apiVersion}/cities' is valid for the request path '/api/v1/cities'
2024-11-18 01:51:49.017 +03:00 [DBG] Request matched endpoint 'WebApi1.Controllers.CitiesController.GetCities (WebApi1)'
2024-11-18 01:51:49.022 +03:00 [DBG] Successfully validated the token.
2024-11-18 01:51:49.023 +03:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2024-11-18 01:51:49.025 +03:00 [INF] Executing endpoint 'WebApi1.Controllers.CitiesController.GetCities (WebApi1)'
2024-11-18 01:51:49.028 +03:00 [INF] Route matched with {action = "GetCities", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[WebApi1.Models.CityWithoutPointOfInterestDto]]] GetCities(System.String, System.String, Int32, Int32) on controller WebApi1.Controllers.CitiesController (WebApi1).
2024-11-18 01:51:49.032 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-18 01:51:49.034 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-18 01:51:49.036 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-18 01:51:49.042 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-18 01:51:49.048 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-18 01:51:49.061 +03:00 [DBG] Executing controller factory for controller WebApi1.Controllers.CitiesController (WebApi1)
2024-11-18 01:51:49.067 +03:00 [DBG] Executed controller factory for controller WebApi1.Controllers.CitiesController (WebApi1)
2024-11-18 01:51:49.069 +03:00 [DBG] Attempting to bind parameter 'name' of type 'System.String' ...
2024-11-18 01:51:49.071 +03:00 [DBG] Attempting to bind parameter 'name' of type 'System.String' using the name '' in request data ...
2024-11-18 01:51:49.073 +03:00 [DBG] Could not find a value in the request with name '' for binding parameter 'name' of type 'System.String'.
2024-11-18 01:51:49.080 +03:00 [DBG] Done attempting to bind parameter 'name' of type 'System.String'.
2024-11-18 01:51:49.082 +03:00 [DBG] Done attempting to bind parameter 'name' of type 'System.String'.
2024-11-18 01:51:49.085 +03:00 [DBG] Attempting to validate the bound parameter 'name' of type 'System.String' ...
2024-11-18 01:51:49.087 +03:00 [DBG] Done attempting to validate the bound parameter 'name' of type 'System.String'.
2024-11-18 01:51:49.088 +03:00 [DBG] Attempting to bind parameter 'searchQuery' of type 'System.String' ...
2024-11-18 01:51:49.090 +03:00 [DBG] Attempting to bind parameter 'searchQuery' of type 'System.String' using the name '' in request data ...
2024-11-18 01:51:49.092 +03:00 [DBG] Could not find a value in the request with name '' for binding parameter 'searchQuery' of type 'System.String'.
2024-11-18 01:51:49.097 +03:00 [DBG] Done attempting to bind parameter 'searchQuery' of type 'System.String'.
2024-11-18 01:51:49.099 +03:00 [DBG] Done attempting to bind parameter 'searchQuery' of type 'System.String'.
2024-11-18 01:51:49.100 +03:00 [DBG] Attempting to validate the bound parameter 'searchQuery' of type 'System.String' ...
2024-11-18 01:51:49.102 +03:00 [DBG] Done attempting to validate the bound parameter 'searchQuery' of type 'System.String'.
2024-11-18 01:51:49.104 +03:00 [DBG] Attempting to bind parameter 'pageNumber' of type 'System.Int32' ...
2024-11-18 01:51:49.106 +03:00 [DBG] Attempting to bind parameter 'pageNumber' of type 'System.Int32' using the name '' in request data ...
2024-11-18 01:51:49.108 +03:00 [DBG] Could not find a value in the request with name '' for binding parameter 'pageNumber' of type 'System.Int32'.
2024-11-18 01:51:49.112 +03:00 [DBG] Done attempting to bind parameter 'pageNumber' of type 'System.Int32'.
2024-11-18 01:51:49.115 +03:00 [DBG] Done attempting to bind parameter 'pageNumber' of type 'System.Int32'.
2024-11-18 01:51:49.117 +03:00 [DBG] Attempting to validate the bound parameter 'pageNumber' of type 'System.Int32' ...
2024-11-18 01:51:49.119 +03:00 [DBG] Done attempting to validate the bound parameter 'pageNumber' of type 'System.Int32'.
2024-11-18 01:51:49.121 +03:00 [DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' ...
2024-11-18 01:51:49.125 +03:00 [DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' using the name '' in request data ...
2024-11-18 01:51:49.128 +03:00 [DBG] Could not find a value in the request with name '' for binding parameter 'pageSize' of type 'System.Int32'.
2024-11-18 01:51:49.134 +03:00 [DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
2024-11-18 01:51:49.136 +03:00 [DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
2024-11-18 01:51:49.137 +03:00 [DBG] Attempting to validate the bound parameter 'pageSize' of type 'System.Int32' ...
2024-11-18 01:51:49.139 +03:00 [DBG] Done attempting to validate the bound parameter 'pageSize' of type 'System.Int32'.
2024-11-18 01:51:49.242 +03:00 [INF] Entity Framework Core 6.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.0' with options: None
2024-11-18 01:51:49.250 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-18 01:51:49.251 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2024-11-18 01:51:49.254 +03:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2024-11-18 01:51:49.257 +03:00 [DBG] Opened connection to database 'main' on server 'E:\Asp\WebApi1\CityInfo.db'.
2024-11-18 01:51:49.262 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "Cities" AS "c"
2024-11-18 01:51:49.267 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "Cities" AS "c"
2024-11-18 01:51:49.270 +03:00 [DBG] A data reader was disposed.
2024-11-18 01:51:49.271 +03:00 [DBG] Closing connection to database 'main' on server 'E:\Asp\WebApi1\CityInfo.db'.
2024-11-18 01:51:49.273 +03:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db'.
2024-11-18 01:51:49.277 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-18 01:51:49.281 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (4ms).
2024-11-18 01:51:49.286 +03:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2024-11-18 01:51:49.289 +03:00 [DBG] Opened connection to database 'main' on server 'E:\Asp\WebApi1\CityInfo.db'.
2024-11-18 01:51:49.292 +03:00 [DBG] Executing DbCommand [Parameters=[@__p_1='?' (DbType = Int32), @__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Name"
FROM "Cities" AS "c"
ORDER BY "c"."Name"
LIMIT @__p_1 OFFSET @__p_0
2024-11-18 01:51:49.300 +03:00 [INF] Executed DbCommand (9ms) [Parameters=[@__p_1='?' (DbType = Int32), @__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Name"
FROM "Cities" AS "c"
ORDER BY "c"."Name"
LIMIT @__p_1 OFFSET @__p_0
2024-11-18 01:51:49.316 +03:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-11-18 01:51:49.318 +03:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-11-18 01:51:49.488 +03:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-11-18 01:51:49.491 +03:00 [DBG] A data reader was disposed.
2024-11-18 01:51:49.494 +03:00 [DBG] Closing connection to database 'main' on server 'E:\Asp\WebApi1\CityInfo.db'.
2024-11-18 01:51:49.523 +03:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db'.
2024-11-18 01:51:49.525 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-18 01:51:49.533 +03:00 [DBG] No information found on request to perform content negotiation.
2024-11-18 01:51:49.535 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-18 01:51:49.536 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-18 01:51:49.538 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-18 01:51:49.541 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[WebApi1.Models.CityWithoutPointOfInterestDto, WebApi1, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-18 01:51:49.545 +03:00 [INF] Executed action WebApi1.Controllers.CitiesController.GetCities (WebApi1) in 484.181ms
2024-11-18 01:51:49.551 +03:00 [INF] Executed endpoint 'WebApi1.Controllers.CitiesController.GetCities (WebApi1)'
2024-11-18 01:51:49.555 +03:00 [DBG] Connection id "0HN87B9D4IHT3" completed keep alive response.
2024-11-18 01:51:49.564 +03:00 [DBG] 'CityInfoContext' disposed.
2024-11-18 01:51:49.570 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7117/api/v1/cities - - - 200 254 application/json;+charset=utf-8 562.1921ms
2024-11-18 01:52:12.942 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7117/api/v1/cities - -
2024-11-18 01:52:12.945 +03:00 [DBG] The request path  does not match the path filter
2024-11-18 01:52:12.946 +03:00 [DBG] 1 candidate(s) found for the request path '/api/v1/cities'
2024-11-18 01:52:12.948 +03:00 [DBG] Endpoint 'WebApi1.Controllers.CitiesController.GetCities (WebApi1)' with route pattern 'api/v{version:apiVersion}/cities' is valid for the request path '/api/v1/cities'
2024-11-18 01:52:12.951 +03:00 [DBG] Request matched endpoint 'WebApi1.Controllers.CitiesController.GetCities (WebApi1)'
2024-11-18 01:52:12.954 +03:00 [DBG] Successfully validated the token.
2024-11-18 01:52:12.957 +03:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2024-11-18 01:52:12.965 +03:00 [INF] Executing endpoint 'WebApi1.Controllers.CitiesController.GetCities (WebApi1)'
2024-11-18 01:52:12.967 +03:00 [INF] Route matched with {action = "GetCities", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[WebApi1.Models.CityWithoutPointOfInterestDto]]] GetCities(System.String, System.String, Int32, Int32) on controller WebApi1.Controllers.CitiesController (WebApi1).
2024-11-18 01:52:12.971 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-18 01:52:12.973 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-18 01:52:12.994 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-18 01:52:13.003 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-18 01:52:13.006 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-18 01:52:13.013 +03:00 [DBG] Executing controller factory for controller WebApi1.Controllers.CitiesController (WebApi1)
2024-11-18 01:52:13.019 +03:00 [DBG] Executed controller factory for controller WebApi1.Controllers.CitiesController (WebApi1)
2024-11-18 01:52:13.022 +03:00 [DBG] Attempting to bind parameter 'name' of type 'System.String' ...
2024-11-18 01:52:13.034 +03:00 [DBG] Attempting to bind parameter 'name' of type 'System.String' using the name '' in request data ...
2024-11-18 01:52:13.038 +03:00 [DBG] Could not find a value in the request with name '' for binding parameter 'name' of type 'System.String'.
2024-11-18 01:52:13.042 +03:00 [DBG] Done attempting to bind parameter 'name' of type 'System.String'.
2024-11-18 01:52:13.050 +03:00 [DBG] Done attempting to bind parameter 'name' of type 'System.String'.
2024-11-18 01:52:13.057 +03:00 [DBG] Attempting to validate the bound parameter 'name' of type 'System.String' ...
2024-11-18 01:52:13.063 +03:00 [DBG] Done attempting to validate the bound parameter 'name' of type 'System.String'.
2024-11-18 01:52:13.066 +03:00 [DBG] Attempting to bind parameter 'searchQuery' of type 'System.String' ...
2024-11-18 01:52:13.068 +03:00 [DBG] Attempting to bind parameter 'searchQuery' of type 'System.String' using the name '' in request data ...
2024-11-18 01:52:13.071 +03:00 [DBG] Could not find a value in the request with name '' for binding parameter 'searchQuery' of type 'System.String'.
2024-11-18 01:52:13.074 +03:00 [DBG] Done attempting to bind parameter 'searchQuery' of type 'System.String'.
2024-11-18 01:52:13.079 +03:00 [DBG] Done attempting to bind parameter 'searchQuery' of type 'System.String'.
2024-11-18 01:52:13.082 +03:00 [DBG] Attempting to validate the bound parameter 'searchQuery' of type 'System.String' ...
2024-11-18 01:52:13.084 +03:00 [DBG] Done attempting to validate the bound parameter 'searchQuery' of type 'System.String'.
2024-11-18 01:52:13.087 +03:00 [DBG] Attempting to bind parameter 'pageNumber' of type 'System.Int32' ...
2024-11-18 01:52:13.089 +03:00 [DBG] Attempting to bind parameter 'pageNumber' of type 'System.Int32' using the name '' in request data ...
2024-11-18 01:52:13.097 +03:00 [DBG] Could not find a value in the request with name '' for binding parameter 'pageNumber' of type 'System.Int32'.
2024-11-18 01:52:13.101 +03:00 [DBG] Done attempting to bind parameter 'pageNumber' of type 'System.Int32'.
2024-11-18 01:52:13.103 +03:00 [DBG] Done attempting to bind parameter 'pageNumber' of type 'System.Int32'.
2024-11-18 01:52:13.106 +03:00 [DBG] Attempting to validate the bound parameter 'pageNumber' of type 'System.Int32' ...
2024-11-18 01:52:13.108 +03:00 [DBG] Done attempting to validate the bound parameter 'pageNumber' of type 'System.Int32'.
2024-11-18 01:52:13.113 +03:00 [DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' ...
2024-11-18 01:52:13.116 +03:00 [DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' using the name '' in request data ...
2024-11-18 01:52:13.118 +03:00 [DBG] Could not find a value in the request with name '' for binding parameter 'pageSize' of type 'System.Int32'.
2024-11-18 01:52:13.121 +03:00 [DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
2024-11-18 01:52:13.122 +03:00 [DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
2024-11-18 01:52:13.124 +03:00 [DBG] Attempting to validate the bound parameter 'pageSize' of type 'System.Int32' ...
2024-11-18 01:52:13.127 +03:00 [DBG] Done attempting to validate the bound parameter 'pageSize' of type 'System.Int32'.
2024-11-18 01:52:13.130 +03:00 [INF] Entity Framework Core 6.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.0' with options: None
2024-11-18 01:52:13.134 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-18 01:52:13.139 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (5ms).
2024-11-18 01:52:13.144 +03:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2024-11-18 01:52:13.149 +03:00 [DBG] Opened connection to database 'main' on server 'E:\Asp\WebApi1\CityInfo.db'.
2024-11-18 01:52:13.152 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "Cities" AS "c"
2024-11-18 01:52:13.155 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "Cities" AS "c"
2024-11-18 01:52:13.163 +03:00 [DBG] A data reader was disposed.
2024-11-18 01:52:13.165 +03:00 [DBG] Closing connection to database 'main' on server 'E:\Asp\WebApi1\CityInfo.db'.
2024-11-18 01:52:13.167 +03:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db'.
2024-11-18 01:52:13.170 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-18 01:52:13.171 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2024-11-18 01:52:13.175 +03:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2024-11-18 01:52:13.183 +03:00 [DBG] Opened connection to database 'main' on server 'E:\Asp\WebApi1\CityInfo.db'.
2024-11-18 01:52:13.185 +03:00 [DBG] Executing DbCommand [Parameters=[@__p_1='?' (DbType = Int32), @__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Name"
FROM "Cities" AS "c"
ORDER BY "c"."Name"
LIMIT @__p_1 OFFSET @__p_0
2024-11-18 01:52:13.189 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@__p_1='?' (DbType = Int32), @__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Name"
FROM "Cities" AS "c"
ORDER BY "c"."Name"
LIMIT @__p_1 OFFSET @__p_0
2024-11-18 01:52:13.193 +03:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-11-18 01:52:13.197 +03:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-11-18 01:52:13.199 +03:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-11-18 01:52:13.202 +03:00 [DBG] A data reader was disposed.
2024-11-18 01:52:13.203 +03:00 [DBG] Closing connection to database 'main' on server 'E:\Asp\WebApi1\CityInfo.db'.
2024-11-18 01:52:13.206 +03:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db'.
2024-11-18 01:52:13.210 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-18 01:52:13.215 +03:00 [DBG] No information found on request to perform content negotiation.
2024-11-18 01:52:13.216 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-18 01:52:13.219 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-18 01:52:13.222 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-18 01:52:13.225 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[WebApi1.Models.CityWithoutPointOfInterestDto, WebApi1, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-18 01:52:13.230 +03:00 [INF] Executed action WebApi1.Controllers.CitiesController.GetCities (WebApi1) in 217.8562ms
2024-11-18 01:52:13.233 +03:00 [INF] Executed endpoint 'WebApi1.Controllers.CitiesController.GetCities (WebApi1)'
2024-11-18 01:52:13.242 +03:00 [DBG] Connection id "0HN87B9D4IHT3" completed keep alive response.
2024-11-18 01:52:13.247 +03:00 [DBG] 'CityInfoContext' disposed.
2024-11-18 01:52:13.315 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7117/api/v1/cities - - - 200 254 application/json;+charset=utf-8 372.7487ms
2024-11-18 01:52:18.609 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7117/api/v1/cities - -
2024-11-18 01:52:18.611 +03:00 [DBG] The request path  does not match the path filter
2024-11-18 01:52:18.612 +03:00 [DBG] 1 candidate(s) found for the request path '/api/v1/cities'
2024-11-18 01:52:18.614 +03:00 [DBG] Endpoint 'WebApi1.Controllers.CitiesController.GetCities (WebApi1)' with route pattern 'api/v{version:apiVersion}/cities' is valid for the request path '/api/v1/cities'
2024-11-18 01:52:18.617 +03:00 [DBG] Request matched endpoint 'WebApi1.Controllers.CitiesController.GetCities (WebApi1)'
2024-11-18 01:52:18.618 +03:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-18 01:52:18.620 +03:00 [INF] Executing endpoint 'WebApi1.Controllers.CitiesController.GetCities (WebApi1)'
2024-11-18 01:52:18.622 +03:00 [INF] Route matched with {action = "GetCities", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[WebApi1.Models.CityWithoutPointOfInterestDto]]] GetCities(System.String, System.String, Int32, Int32) on controller WebApi1.Controllers.CitiesController (WebApi1).
2024-11-18 01:52:18.626 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-18 01:52:18.629 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-18 01:52:18.631 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-18 01:52:18.635 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-18 01:52:18.637 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-18 01:52:18.640 +03:00 [DBG] Executing controller factory for controller WebApi1.Controllers.CitiesController (WebApi1)
2024-11-18 01:52:18.648 +03:00 [DBG] Executed controller factory for controller WebApi1.Controllers.CitiesController (WebApi1)
2024-11-18 01:52:18.652 +03:00 [DBG] Attempting to bind parameter 'name' of type 'System.String' ...
2024-11-18 01:52:18.653 +03:00 [DBG] Attempting to bind parameter 'name' of type 'System.String' using the name '' in request data ...
2024-11-18 01:52:18.655 +03:00 [DBG] Could not find a value in the request with name '' for binding parameter 'name' of type 'System.String'.
2024-11-18 01:52:18.657 +03:00 [DBG] Done attempting to bind parameter 'name' of type 'System.String'.
2024-11-18 01:52:18.661 +03:00 [DBG] Done attempting to bind parameter 'name' of type 'System.String'.
2024-11-18 01:52:18.663 +03:00 [DBG] Attempting to validate the bound parameter 'name' of type 'System.String' ...
2024-11-18 01:52:18.666 +03:00 [DBG] Done attempting to validate the bound parameter 'name' of type 'System.String'.
2024-11-18 01:52:18.667 +03:00 [DBG] Attempting to bind parameter 'searchQuery' of type 'System.String' ...
2024-11-18 01:52:18.669 +03:00 [DBG] Attempting to bind parameter 'searchQuery' of type 'System.String' using the name '' in request data ...
2024-11-18 01:52:18.672 +03:00 [DBG] Could not find a value in the request with name '' for binding parameter 'searchQuery' of type 'System.String'.
2024-11-18 01:52:18.675 +03:00 [DBG] Done attempting to bind parameter 'searchQuery' of type 'System.String'.
2024-11-18 01:52:18.679 +03:00 [DBG] Done attempting to bind parameter 'searchQuery' of type 'System.String'.
2024-11-18 01:52:18.683 +03:00 [DBG] Attempting to validate the bound parameter 'searchQuery' of type 'System.String' ...
2024-11-18 01:52:18.685 +03:00 [DBG] Done attempting to validate the bound parameter 'searchQuery' of type 'System.String'.
2024-11-18 01:52:18.686 +03:00 [DBG] Attempting to bind parameter 'pageNumber' of type 'System.Int32' ...
2024-11-18 01:52:18.688 +03:00 [DBG] Attempting to bind parameter 'pageNumber' of type 'System.Int32' using the name '' in request data ...
2024-11-18 01:52:18.690 +03:00 [DBG] Could not find a value in the request with name '' for binding parameter 'pageNumber' of type 'System.Int32'.
2024-11-18 01:52:18.696 +03:00 [DBG] Done attempting to bind parameter 'pageNumber' of type 'System.Int32'.
2024-11-18 01:52:18.700 +03:00 [DBG] Done attempting to bind parameter 'pageNumber' of type 'System.Int32'.
2024-11-18 01:52:18.702 +03:00 [DBG] Attempting to validate the bound parameter 'pageNumber' of type 'System.Int32' ...
2024-11-18 01:52:18.704 +03:00 [DBG] Done attempting to validate the bound parameter 'pageNumber' of type 'System.Int32'.
2024-11-18 01:52:18.706 +03:00 [DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' ...
2024-11-18 01:52:18.708 +03:00 [DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' using the name '' in request data ...
2024-11-18 01:52:18.711 +03:00 [DBG] Could not find a value in the request with name '' for binding parameter 'pageSize' of type 'System.Int32'.
2024-11-18 01:52:18.715 +03:00 [DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
2024-11-18 01:52:18.716 +03:00 [DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
2024-11-18 01:52:18.718 +03:00 [DBG] Attempting to validate the bound parameter 'pageSize' of type 'System.Int32' ...
2024-11-18 01:52:18.719 +03:00 [DBG] Done attempting to validate the bound parameter 'pageSize' of type 'System.Int32'.
2024-11-18 01:52:18.722 +03:00 [INF] Entity Framework Core 6.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.0' with options: None
2024-11-18 01:52:18.730 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-18 01:52:18.735 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (5ms).
2024-11-18 01:52:18.737 +03:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2024-11-18 01:52:18.739 +03:00 [DBG] Opened connection to database 'main' on server 'E:\Asp\WebApi1\CityInfo.db'.
2024-11-18 01:52:18.742 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "Cities" AS "c"
2024-11-18 01:52:18.747 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "Cities" AS "c"
2024-11-18 01:52:18.749 +03:00 [DBG] A data reader was disposed.
2024-11-18 01:52:18.751 +03:00 [DBG] Closing connection to database 'main' on server 'E:\Asp\WebApi1\CityInfo.db'.
2024-11-18 01:52:18.753 +03:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db'.
2024-11-18 01:52:18.756 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-18 01:52:18.760 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2024-11-18 01:52:18.764 +03:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2024-11-18 01:52:18.766 +03:00 [DBG] Opened connection to database 'main' on server 'E:\Asp\WebApi1\CityInfo.db'.
2024-11-18 01:52:18.768 +03:00 [DBG] Executing DbCommand [Parameters=[@__p_1='?' (DbType = Int32), @__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Name"
FROM "Cities" AS "c"
ORDER BY "c"."Name"
LIMIT @__p_1 OFFSET @__p_0
2024-11-18 01:52:18.772 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@__p_1='?' (DbType = Int32), @__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Name"
FROM "Cities" AS "c"
ORDER BY "c"."Name"
LIMIT @__p_1 OFFSET @__p_0
2024-11-18 01:52:18.778 +03:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-11-18 01:52:18.781 +03:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-11-18 01:52:18.783 +03:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-11-18 01:52:18.785 +03:00 [DBG] A data reader was disposed.
2024-11-18 01:52:18.786 +03:00 [DBG] Closing connection to database 'main' on server 'E:\Asp\WebApi1\CityInfo.db'.
2024-11-18 01:52:18.789 +03:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db'.
2024-11-18 01:52:18.796 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-18 01:52:18.801 +03:00 [DBG] No information found on request to perform content negotiation.
2024-11-18 01:52:18.802 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-18 01:52:18.803 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-18 01:52:18.805 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-18 01:52:18.807 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[WebApi1.Models.CityWithoutPointOfInterestDto, WebApi1, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-18 01:52:18.811 +03:00 [INF] Executed action WebApi1.Controllers.CitiesController.GetCities (WebApi1) in 170.7115ms
2024-11-18 01:52:18.815 +03:00 [INF] Executed endpoint 'WebApi1.Controllers.CitiesController.GetCities (WebApi1)'
2024-11-18 01:52:18.817 +03:00 [DBG] Connection id "0HN87B9D4IHT3" completed keep alive response.
2024-11-18 01:52:18.818 +03:00 [DBG] 'CityInfoContext' disposed.
2024-11-18 01:52:18.819 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7117/api/v1/cities - - - 200 254 application/json;+charset=utf-8 210.2000ms
2024-11-18 01:52:33.836 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7117/api/v2/cities - -
2024-11-18 01:52:33.838 +03:00 [DBG] The request path  does not match the path filter
2024-11-18 01:52:33.839 +03:00 [DBG] 1 candidate(s) found for the request path '/api/v2/cities'
2024-11-18 01:52:33.843 +03:00 [DBG] Endpoint 'WebApi1.Controllers.CitiesController.GetCities (WebApi1)' with route pattern 'api/v{version:apiVersion}/cities' is valid for the request path '/api/v2/cities'
2024-11-18 01:52:33.865 +03:00 [INF] Multiple candidate actions were found, but none matched the requested service API version '2'. Candidate actions: WebApi1.Controllers.CitiesController.GetCities (WebApi1)
2024-11-18 01:52:33.869 +03:00 [DBG] Request matched endpoint 'null'
2024-11-18 01:52:33.871 +03:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-18 01:52:33.881 +03:00 [INF] Executing endpoint 'Microsoft.AspNetCore.Http.Endpoint'
2024-11-18 01:52:33.887 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-18 01:52:33.895 +03:00 [DBG] No information found on request to perform content negotiation.
2024-11-18 01:52:33.896 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-18 01:52:33.898 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-18 01:52:33.899 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-18 01:52:33.901 +03:00 [INF] Executing ObjectResult, writing value of type '<>f__AnonymousType0`1[[<>f__AnonymousType1`3[[System.String, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[<>f__AnonymousType2`1[[System.String, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], Microsoft.AspNetCore.Mvc.Versioning, Version=5.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60]], Microsoft.AspNetCore.Mvc.Versioning, Version=5.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60]]'.
2024-11-18 01:52:33.923 +03:00 [INF] Executed endpoint 'Microsoft.AspNetCore.Http.Endpoint'
2024-11-18 01:52:33.929 +03:00 [DBG] Connection id "0HN87B9D4IHT3" completed keep alive response.
2024-11-18 01:52:33.931 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7117/api/v2/cities - - - 400 196 application/json;+charset=utf-8 95.4163ms
2024-11-18 01:52:39.226 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7117/api/v1/cities - -
2024-11-18 01:52:39.229 +03:00 [DBG] The request path  does not match the path filter
2024-11-18 01:52:39.231 +03:00 [DBG] 1 candidate(s) found for the request path '/api/v1/cities'
2024-11-18 01:52:39.232 +03:00 [DBG] Endpoint 'WebApi1.Controllers.CitiesController.GetCities (WebApi1)' with route pattern 'api/v{version:apiVersion}/cities' is valid for the request path '/api/v1/cities'
2024-11-18 01:52:39.235 +03:00 [DBG] Request matched endpoint 'WebApi1.Controllers.CitiesController.GetCities (WebApi1)'
2024-11-18 01:52:39.237 +03:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-18 01:52:39.239 +03:00 [INF] Executing endpoint 'WebApi1.Controllers.CitiesController.GetCities (WebApi1)'
2024-11-18 01:52:39.242 +03:00 [INF] Route matched with {action = "GetCities", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[WebApi1.Models.CityWithoutPointOfInterestDto]]] GetCities(System.String, System.String, Int32, Int32) on controller WebApi1.Controllers.CitiesController (WebApi1).
2024-11-18 01:52:39.247 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-18 01:52:39.249 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-18 01:52:39.251 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-18 01:52:39.263 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-18 01:52:39.265 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-18 01:52:39.270 +03:00 [DBG] Executing controller factory for controller WebApi1.Controllers.CitiesController (WebApi1)
2024-11-18 01:52:39.272 +03:00 [DBG] Executed controller factory for controller WebApi1.Controllers.CitiesController (WebApi1)
2024-11-18 01:52:39.276 +03:00 [DBG] Attempting to bind parameter 'name' of type 'System.String' ...
2024-11-18 01:52:39.279 +03:00 [DBG] Attempting to bind parameter 'name' of type 'System.String' using the name '' in request data ...
2024-11-18 01:52:39.282 +03:00 [DBG] Could not find a value in the request with name '' for binding parameter 'name' of type 'System.String'.
2024-11-18 01:52:39.287 +03:00 [DBG] Done attempting to bind parameter 'name' of type 'System.String'.
2024-11-18 01:52:39.288 +03:00 [DBG] Done attempting to bind parameter 'name' of type 'System.String'.
2024-11-18 01:52:39.291 +03:00 [DBG] Attempting to validate the bound parameter 'name' of type 'System.String' ...
2024-11-18 01:52:39.301 +03:00 [DBG] Done attempting to validate the bound parameter 'name' of type 'System.String'.
2024-11-18 01:52:39.303 +03:00 [DBG] Attempting to bind parameter 'searchQuery' of type 'System.String' ...
2024-11-18 01:52:39.305 +03:00 [DBG] Attempting to bind parameter 'searchQuery' of type 'System.String' using the name '' in request data ...
2024-11-18 01:52:39.310 +03:00 [DBG] Could not find a value in the request with name '' for binding parameter 'searchQuery' of type 'System.String'.
2024-11-18 01:52:39.313 +03:00 [DBG] Done attempting to bind parameter 'searchQuery' of type 'System.String'.
2024-11-18 01:52:39.314 +03:00 [DBG] Done attempting to bind parameter 'searchQuery' of type 'System.String'.
2024-11-18 01:52:39.317 +03:00 [DBG] Attempting to validate the bound parameter 'searchQuery' of type 'System.String' ...
2024-11-18 01:52:39.319 +03:00 [DBG] Done attempting to validate the bound parameter 'searchQuery' of type 'System.String'.
2024-11-18 01:52:39.321 +03:00 [DBG] Attempting to bind parameter 'pageNumber' of type 'System.Int32' ...
2024-11-18 01:52:39.322 +03:00 [DBG] Attempting to bind parameter 'pageNumber' of type 'System.Int32' using the name '' in request data ...
2024-11-18 01:52:39.325 +03:00 [DBG] Could not find a value in the request with name '' for binding parameter 'pageNumber' of type 'System.Int32'.
2024-11-18 01:52:39.329 +03:00 [DBG] Done attempting to bind parameter 'pageNumber' of type 'System.Int32'.
2024-11-18 01:52:39.336 +03:00 [DBG] Done attempting to bind parameter 'pageNumber' of type 'System.Int32'.
2024-11-18 01:52:39.551 +03:00 [DBG] Attempting to validate the bound parameter 'pageNumber' of type 'System.Int32' ...
2024-11-18 01:52:39.553 +03:00 [DBG] Done attempting to validate the bound parameter 'pageNumber' of type 'System.Int32'.
2024-11-18 01:52:39.559 +03:00 [DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' ...
2024-11-18 01:52:39.563 +03:00 [DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' using the name '' in request data ...
2024-11-18 01:52:39.567 +03:00 [DBG] Could not find a value in the request with name '' for binding parameter 'pageSize' of type 'System.Int32'.
2024-11-18 01:52:39.602 +03:00 [DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
2024-11-18 01:52:39.604 +03:00 [DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
2024-11-18 01:52:39.606 +03:00 [DBG] Attempting to validate the bound parameter 'pageSize' of type 'System.Int32' ...
2024-11-18 01:52:39.615 +03:00 [DBG] Done attempting to validate the bound parameter 'pageSize' of type 'System.Int32'.
2024-11-18 01:52:39.619 +03:00 [INF] Entity Framework Core 6.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.0' with options: None
2024-11-18 01:52:39.623 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-18 01:52:39.626 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2024-11-18 01:52:39.631 +03:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2024-11-18 01:52:39.633 +03:00 [DBG] Opened connection to database 'main' on server 'E:\Asp\WebApi1\CityInfo.db'.
2024-11-18 01:52:39.635 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "Cities" AS "c"
2024-11-18 01:52:39.638 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "Cities" AS "c"
2024-11-18 01:52:39.641 +03:00 [DBG] A data reader was disposed.
2024-11-18 01:52:39.643 +03:00 [DBG] Closing connection to database 'main' on server 'E:\Asp\WebApi1\CityInfo.db'.
2024-11-18 01:52:39.646 +03:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db'.
2024-11-18 01:52:39.650 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-18 01:52:39.651 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2024-11-18 01:52:39.652 +03:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2024-11-18 01:52:39.654 +03:00 [DBG] Opened connection to database 'main' on server 'E:\Asp\WebApi1\CityInfo.db'.
2024-11-18 01:52:39.658 +03:00 [DBG] Executing DbCommand [Parameters=[@__p_1='?' (DbType = Int32), @__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Name"
FROM "Cities" AS "c"
ORDER BY "c"."Name"
LIMIT @__p_1 OFFSET @__p_0
2024-11-18 01:52:39.666 +03:00 [INF] Executed DbCommand (8ms) [Parameters=[@__p_1='?' (DbType = Int32), @__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Name"
FROM "Cities" AS "c"
ORDER BY "c"."Name"
LIMIT @__p_1 OFFSET @__p_0
2024-11-18 01:52:39.670 +03:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-11-18 01:52:39.672 +03:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-11-18 01:52:39.678 +03:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-11-18 01:52:39.680 +03:00 [DBG] A data reader was disposed.
2024-11-18 01:52:39.681 +03:00 [DBG] Closing connection to database 'main' on server 'E:\Asp\WebApi1\CityInfo.db'.
2024-11-18 01:52:39.683 +03:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db'.
2024-11-18 01:52:39.685 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-18 01:52:39.688 +03:00 [DBG] No information found on request to perform content negotiation.
2024-11-18 01:52:39.695 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-18 01:52:39.698 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-18 01:52:39.699 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-18 01:52:39.701 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[WebApi1.Models.CityWithoutPointOfInterestDto, WebApi1, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-18 01:52:39.703 +03:00 [INF] Executed action WebApi1.Controllers.CitiesController.GetCities (WebApi1) in 433.0698ms
2024-11-18 01:52:39.705 +03:00 [INF] Executed endpoint 'WebApi1.Controllers.CitiesController.GetCities (WebApi1)'
2024-11-18 01:52:39.707 +03:00 [DBG] Connection id "0HN87B9D4IHT3" completed keep alive response.
2024-11-18 01:52:39.713 +03:00 [DBG] 'CityInfoContext' disposed.
2024-11-18 01:52:39.715 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7117/api/v1/cities - - - 200 254 application/json;+charset=utf-8 488.6206ms
2024-11-18 01:52:45.373 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7117/api/v1/cities/1/pointsofinterest - -
2024-11-18 01:52:45.375 +03:00 [DBG] The request path  does not match the path filter
2024-11-18 01:52:45.377 +03:00 [DBG] 1 candidate(s) found for the request path '/api/v1/cities/1/pointsofinterest'
2024-11-18 01:52:45.378 +03:00 [DBG] Endpoint 'WebApi1.Controllers.PointsOfInterestController.GetPointsOfInterest (WebApi1)' with route pattern 'api/v{version:apiVersion}/cities/{cityId}/pointsofinterest' is valid for the request path '/api/v1/cities/1/pointsofinterest'
2024-11-18 01:52:45.381 +03:00 [INF] Multiple candidate actions were found, but none matched the requested service API version '1'. Candidate actions: WebApi1.Controllers.PointsOfInterestController.GetPointsOfInterest (WebApi1)
2024-11-18 01:52:45.384 +03:00 [DBG] Request matched endpoint 'null'
2024-11-18 01:52:45.386 +03:00 [DBG] Successfully validated the token.
2024-11-18 01:52:45.387 +03:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2024-11-18 01:52:45.388 +03:00 [INF] Executing endpoint 'Microsoft.AspNetCore.Http.Endpoint'
2024-11-18 01:52:45.389 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-18 01:52:45.395 +03:00 [DBG] No information found on request to perform content negotiation.
2024-11-18 01:52:45.396 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-18 01:52:45.398 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-18 01:52:45.399 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-18 01:52:45.402 +03:00 [INF] Executing ObjectResult, writing value of type '<>f__AnonymousType0`1[[<>f__AnonymousType1`3[[System.String, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[<>f__AnonymousType2`1[[System.String, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], Microsoft.AspNetCore.Mvc.Versioning, Version=5.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60]], Microsoft.AspNetCore.Mvc.Versioning, Version=5.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60]]'.
2024-11-18 01:52:45.409 +03:00 [INF] Executed endpoint 'Microsoft.AspNetCore.Http.Endpoint'
2024-11-18 01:52:45.419 +03:00 [DBG] Connection id "0HN87B9D4IHT3" completed keep alive response.
2024-11-18 01:52:45.423 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7117/api/v1/cities/1/pointsofinterest - - - 400 215 application/json;+charset=utf-8 49.7541ms
2024-11-18 01:52:50.068 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7117/api/v2/cities/1/pointsofinterest - -
2024-11-18 01:52:50.069 +03:00 [DBG] The request path  does not match the path filter
2024-11-18 01:52:50.071 +03:00 [DBG] 1 candidate(s) found for the request path '/api/v2/cities/1/pointsofinterest'
2024-11-18 01:52:50.072 +03:00 [DBG] Endpoint 'WebApi1.Controllers.PointsOfInterestController.GetPointsOfInterest (WebApi1)' with route pattern 'api/v{version:apiVersion}/cities/{cityId}/pointsofinterest' is valid for the request path '/api/v2/cities/1/pointsofinterest'
2024-11-18 01:52:50.077 +03:00 [DBG] Request matched endpoint 'WebApi1.Controllers.PointsOfInterestController.GetPointsOfInterest (WebApi1)'
2024-11-18 01:52:50.079 +03:00 [DBG] Successfully validated the token.
2024-11-18 01:52:50.080 +03:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2024-11-18 01:52:50.082 +03:00 [INF] Executing endpoint 'WebApi1.Controllers.PointsOfInterestController.GetPointsOfInterest (WebApi1)'
2024-11-18 01:52:50.089 +03:00 [INF] Route matched with {action = "GetPointsOfInterest", controller = "PointsOfInterest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[WebApi1.Models.PointOfInterestDto]]] GetPointsOfInterest(Int32) on controller WebApi1.Controllers.PointsOfInterestController (WebApi1).
2024-11-18 01:52:50.095 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-18 01:52:50.098 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-18 01:52:50.102 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-18 01:52:50.105 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-18 01:52:50.112 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-18 01:52:50.115 +03:00 [DBG] Executing controller factory for controller WebApi1.Controllers.PointsOfInterestController (WebApi1)
2024-11-18 01:52:50.118 +03:00 [DBG] Executed controller factory for controller WebApi1.Controllers.PointsOfInterestController (WebApi1)
2024-11-18 01:52:50.121 +03:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2024-11-18 01:52:50.127 +03:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2024-11-18 01:52:50.130 +03:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2024-11-18 01:52:50.132 +03:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2024-11-18 01:52:50.136 +03:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2024-11-18 01:52:50.144 +03:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2024-11-18 01:52:50.151 +03:00 [INF] Entity Framework Core 6.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.0' with options: None
2024-11-18 01:52:50.160 +03:00 [DBG] Compiling query expression: 
'DbSet<City>()
    .Any(c => c.Id == __cityId_0)'
2024-11-18 01:52:50.210 +03:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<bool>(
    asyncEnumerable: new SingleQueryingEnumerable<bool>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT EXISTS (
                SELECT 1
                FROM Cities AS c
                WHERE c.Id == @__cityId_0)), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, bool>, 
        WebApi1.DbContexts.CityInfoContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2024-11-18 01:52:50.235 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-18 01:52:50.237 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2024-11-18 01:52:50.238 +03:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2024-11-18 01:52:50.243 +03:00 [DBG] Opened connection to database 'main' on server 'E:\Asp\WebApi1\CityInfo.db'.
2024-11-18 01:52:50.245 +03:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0)
2024-11-18 01:52:50.250 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0)
2024-11-18 01:52:50.254 +03:00 [DBG] A data reader was disposed.
2024-11-18 01:52:50.255 +03:00 [DBG] Closing connection to database 'main' on server 'E:\Asp\WebApi1\CityInfo.db'.
2024-11-18 01:52:50.261 +03:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db'.
2024-11-18 01:52:50.270 +03:00 [DBG] Compiling query expression: 
'DbSet<PointOfInterest>()
    .Where(p => p.cityId == __cityId_0)'
2024-11-18 01:52:50.290 +03:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<PointOfInterest>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: PointOfInterest.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: PointOfInterest.Description (string) Required MaxLength(200), 1], [Property: PointOfInterest.Name (string) Required MaxLength(50), 2], [Property: PointOfInterest.cityId (int) Required FK Index, 3] }
        SELECT p.Id, p.Description, p.Name, p.cityId
        FROM PointOfInterest AS p
        WHERE p.cityId == @__cityId_0), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, PointOfInterest>, 
    WebApi1.DbContexts.CityInfoContext, 
    False, 
    False, 
    True
)'
2024-11-18 01:52:50.300 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-18 01:52:50.301 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2024-11-18 01:52:50.303 +03:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2024-11-18 01:52:50.305 +03:00 [DBG] Opened connection to database 'main' on server 'E:\Asp\WebApi1\CityInfo.db'.
2024-11-18 01:52:50.308 +03:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Id", "p"."Description", "p"."Name", "p"."cityId"
FROM "PointOfInterest" AS "p"
WHERE "p"."cityId" = @__cityId_0
2024-11-18 01:52:50.317 +03:00 [INF] Executed DbCommand (10ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Id", "p"."Description", "p"."Name", "p"."cityId"
FROM "PointOfInterest" AS "p"
WHERE "p"."cityId" = @__cityId_0
2024-11-18 01:52:50.323 +03:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-11-18 01:52:50.338 +03:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-11-18 01:52:50.344 +03:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-11-18 01:52:50.348 +03:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-11-18 01:52:50.351 +03:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-11-18 01:52:50.353 +03:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-11-18 01:52:50.355 +03:00 [DBG] A data reader was disposed.
2024-11-18 01:52:50.356 +03:00 [DBG] Closing connection to database 'main' on server 'E:\Asp\WebApi1\CityInfo.db'.
2024-11-18 01:52:50.362 +03:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db'.
2024-11-18 01:52:50.370 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-18 01:52:50.378 +03:00 [DBG] No information found on request to perform content negotiation.
2024-11-18 01:52:50.381 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-18 01:52:50.382 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-18 01:52:50.384 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-18 01:52:50.387 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[WebApi1.Models.PointOfInterestDto, WebApi1, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-18 01:52:50.397 +03:00 [INF] Executed action WebApi1.Controllers.PointsOfInterestController.GetPointsOfInterest (WebApi1) in 281.7776ms
2024-11-18 01:52:50.399 +03:00 [INF] Executed endpoint 'WebApi1.Controllers.PointsOfInterestController.GetPointsOfInterest (WebApi1)'
2024-11-18 01:52:50.411 +03:00 [DBG] Connection id "0HN87B9D4IHT3" completed keep alive response.
2024-11-18 01:52:50.414 +03:00 [DBG] 'CityInfoContext' disposed.
2024-11-18 01:52:50.417 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7117/api/v2/cities/1/pointsofinterest - - - 200 663 application/json;+charset=utf-8 349.3257ms
2024-11-18 01:53:04.521 +03:00 [INF] Application is shutting down...
2024-11-18 01:53:04.531 +03:00 [DBG] Hosting stopping
2024-11-18 01:53:04.649 +03:00 [DBG] Connection id "0HN87B9D4IHT3" disconnecting.
2024-11-18 01:53:04.679 +03:00 [DBG] Connection id "0HN87B9D4IHT3" stopped.
2024-11-18 01:53:04.681 +03:00 [DBG] Connection id "0HN87B9D4IHT3" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-11-18 01:53:04.757 +03:00 [DBG] Hosting stopped
2024-11-18 01:53:20.229 +03:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.Versioning.ApiVersionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2024-11-18 01:53:20.666 +03:00 [DBG] Hosting starting
2024-11-18 01:53:20.697 +03:00 [INF] User profile is available. Using 'C:\Users\DaRK1AnGE1-\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-11-18 01:53:20.703 +03:00 [DBG] Reading data from file 'C:\Users\DaRK1AnGE1-\AppData\Local\ASP.NET\DataProtection-Keys\key-7aaf1ab6-3338-4bbe-824d-412c9ce49ea3.xml'.
2024-11-18 01:53:20.731 +03:00 [DBG] Found key {7aaf1ab6-3338-4bbe-824d-412c9ce49ea3}.
2024-11-18 01:53:20.758 +03:00 [DBG] Considering key {7aaf1ab6-3338-4bbe-824d-412c9ce49ea3} with expiration date 2025-02-15 20:08:59Z as default key.
2024-11-18 01:53:20.769 +03:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-11-18 01:53:20.780 +03:00 [DBG] Decrypting secret element using Windows DPAPI.
2024-11-18 01:53:20.785 +03:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-11-18 01:53:20.800 +03:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2024-11-18 01:53:20.810 +03:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2024-11-18 01:53:20.820 +03:00 [DBG] Using key {7aaf1ab6-3338-4bbe-824d-412c9ce49ea3} as the default key.
2024-11-18 01:53:20.826 +03:00 [DBG] Key ring with default key {7aaf1ab6-3338-4bbe-824d-412c9ce49ea3} was loaded during application startup.
2024-11-18 01:53:20.936 +03:00 [DBG] Using development certificate: CN=localhost (Thumbprint: 9E758B43FC1DB07235D03E669781821F9B436A79)
2024-11-18 01:53:20.992 +03:00 [INF] Now listening on: https://localhost:7117
2024-11-18 01:53:20.996 +03:00 [INF] Now listening on: http://localhost:5211
2024-11-18 01:53:20.998 +03:00 [DBG] Loaded hosting startup assembly WebApi1
2024-11-18 01:53:20.999 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-11-18 01:53:21.002 +03:00 [INF] Hosting environment: Development
2024-11-18 01:53:21.004 +03:00 [INF] Content root path: E:\Asp\WebApi1\
2024-11-18 01:53:21.005 +03:00 [DBG] Hosting started
2024-11-18 01:53:24.287 +03:00 [DBG] Connection id "0HN87BAI65O2G" received FIN.
2024-11-18 01:53:24.298 +03:00 [DBG] Connection id "0HN87BAI65O2G" accepted.
2024-11-18 01:53:24.300 +03:00 [DBG] Connection id "0HN87BAI65O2G" started.
2024-11-18 01:53:24.303 +03:00 [DBG] Connection id "0HN87BAI65O2H" accepted.
2024-11-18 01:53:24.317 +03:00 [DBG] Connection id "0HN87BAI65O2H" started.
2024-11-18 01:53:24.342 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2024-11-18 01:53:24.391 +03:00 [DBG] Connection id "0HN87BAI65O2G" stopped.
2024-11-18 01:53:24.422 +03:00 [DBG] Connection id "0HN87BAI65O2G" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-11-18 01:53:24.440 +03:00 [DBG] Connection 0HN87BAI65O2H established using the following protocol: "Tls12"
2024-11-18 01:53:24.642 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7117/api/v1/cities - -
2024-11-18 01:53:24.671 +03:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2024-11-18 01:53:24.776 +03:00 [DBG] The request path  does not match the path filter
2024-11-18 01:53:24.832 +03:00 [DBG] 1 candidate(s) found for the request path '/api/v1/cities'
2024-11-18 01:53:24.845 +03:00 [DBG] Endpoint 'WebApi1.Controllers.CitiesController.GetCities (WebApi1)' with route pattern 'api/v{version:apiVersion}/cities' is valid for the request path '/api/v1/cities'
2024-11-18 01:53:24.859 +03:00 [DBG] Request matched endpoint 'WebApi1.Controllers.CitiesController.GetCities (WebApi1)'
2024-11-18 01:53:24.933 +03:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-18 01:53:24.937 +03:00 [INF] Executing endpoint 'WebApi1.Controllers.CitiesController.GetCities (WebApi1)'
2024-11-18 01:53:25.014 +03:00 [INF] Route matched with {action = "GetCities", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[WebApi1.Models.CityWithoutPointOfInterestDto]]] GetCities(System.String, System.String, Int32, Int32) on controller WebApi1.Controllers.CitiesController (WebApi1).
2024-11-18 01:53:25.018 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-18 01:53:25.020 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-18 01:53:25.027 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-18 01:53:25.031 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-18 01:53:25.033 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-18 01:53:25.036 +03:00 [DBG] Executing controller factory for controller WebApi1.Controllers.CitiesController (WebApi1)
2024-11-18 01:53:25.232 +03:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2024-11-18 01:53:25.681 +03:00 [DBG] Executed controller factory for controller WebApi1.Controllers.CitiesController (WebApi1)
2024-11-18 01:53:25.686 +03:00 [DBG] Attempting to bind parameter 'name' of type 'System.String' ...
2024-11-18 01:53:25.692 +03:00 [DBG] Attempting to bind parameter 'name' of type 'System.String' using the name '' in request data ...
2024-11-18 01:53:25.695 +03:00 [DBG] Could not find a value in the request with name '' for binding parameter 'name' of type 'System.String'.
2024-11-18 01:53:25.699 +03:00 [DBG] Done attempting to bind parameter 'name' of type 'System.String'.
2024-11-18 01:53:25.701 +03:00 [DBG] Done attempting to bind parameter 'name' of type 'System.String'.
2024-11-18 01:53:25.704 +03:00 [DBG] Attempting to validate the bound parameter 'name' of type 'System.String' ...
2024-11-18 01:53:25.714 +03:00 [DBG] Done attempting to validate the bound parameter 'name' of type 'System.String'.
2024-11-18 01:53:25.736 +03:00 [DBG] Attempting to bind parameter 'searchQuery' of type 'System.String' ...
2024-11-18 01:53:25.738 +03:00 [DBG] Attempting to bind parameter 'searchQuery' of type 'System.String' using the name '' in request data ...
2024-11-18 01:53:25.745 +03:00 [DBG] Could not find a value in the request with name '' for binding parameter 'searchQuery' of type 'System.String'.
2024-11-18 01:53:25.748 +03:00 [DBG] Done attempting to bind parameter 'searchQuery' of type 'System.String'.
2024-11-18 01:53:25.749 +03:00 [DBG] Done attempting to bind parameter 'searchQuery' of type 'System.String'.
2024-11-18 01:53:25.751 +03:00 [DBG] Attempting to validate the bound parameter 'searchQuery' of type 'System.String' ...
2024-11-18 01:53:25.761 +03:00 [DBG] Done attempting to validate the bound parameter 'searchQuery' of type 'System.String'.
2024-11-18 01:53:25.764 +03:00 [DBG] Attempting to bind parameter 'pageNumber' of type 'System.Int32' ...
2024-11-18 01:53:25.767 +03:00 [DBG] Attempting to bind parameter 'pageNumber' of type 'System.Int32' using the name '' in request data ...
2024-11-18 01:53:25.769 +03:00 [DBG] Could not find a value in the request with name '' for binding parameter 'pageNumber' of type 'System.Int32'.
2024-11-18 01:53:25.776 +03:00 [DBG] Done attempting to bind parameter 'pageNumber' of type 'System.Int32'.
2024-11-18 01:53:25.780 +03:00 [DBG] Done attempting to bind parameter 'pageNumber' of type 'System.Int32'.
2024-11-18 01:53:25.782 +03:00 [DBG] Attempting to validate the bound parameter 'pageNumber' of type 'System.Int32' ...
2024-11-18 01:53:25.785 +03:00 [DBG] Done attempting to validate the bound parameter 'pageNumber' of type 'System.Int32'.
2024-11-18 01:53:25.787 +03:00 [DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' ...
2024-11-18 01:53:25.796 +03:00 [DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' using the name '' in request data ...
2024-11-18 01:53:25.798 +03:00 [DBG] Could not find a value in the request with name '' for binding parameter 'pageSize' of type 'System.Int32'.
2024-11-18 01:53:25.801 +03:00 [DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
2024-11-18 01:53:25.804 +03:00 [DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
2024-11-18 01:53:25.810 +03:00 [DBG] Attempting to validate the bound parameter 'pageSize' of type 'System.Int32' ...
2024-11-18 01:53:25.814 +03:00 [DBG] Done attempting to validate the bound parameter 'pageSize' of type 'System.Int32'.
2024-11-18 01:53:27.094 +03:00 [INF] Entity Framework Core 6.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.0' with options: None
2024-11-18 01:53:27.159 +03:00 [DBG] Compiling query expression: 
'DbSet<City>()
    .Count()'
2024-11-18 01:53:27.419 +03:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<int>(
    asyncEnumerable: new SingleQueryingEnumerable<int>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT COUNT(*)
            FROM Cities AS c), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, int>, 
        WebApi1.DbContexts.CityInfoContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2024-11-18 01:53:27.497 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-18 01:53:27.562 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (58ms).
2024-11-18 01:53:27.574 +03:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2024-11-18 01:53:27.608 +03:00 [DBG] Opened connection to database 'main' on server 'E:\Asp\WebApi1\CityInfo.db'.
2024-11-18 01:53:27.631 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "Cities" AS "c"
2024-11-18 01:53:27.701 +03:00 [INF] Executed DbCommand (59ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "Cities" AS "c"
2024-11-18 01:53:27.721 +03:00 [DBG] A data reader was disposed.
2024-11-18 01:53:27.729 +03:00 [DBG] Closing connection to database 'main' on server 'E:\Asp\WebApi1\CityInfo.db'.
2024-11-18 01:53:27.741 +03:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db'.
2024-11-18 01:53:27.764 +03:00 [DBG] Compiling query expression: 
'DbSet<City>()
    .OrderBy(c => c.Name)
    .Skip(__p_0)
    .Take(__p_1)'
2024-11-18 01:53:27.853 +03:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<City>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: City.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: City.Description (string) MaxLength(200), 1], [Property: City.Name (string) Required MaxLength(50), 2] }
        SELECT c.Id, c.Description, c.Name
        FROM Cities AS c
        ORDER BY c.Name ASC
        OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, City>, 
    WebApi1.DbContexts.CityInfoContext, 
    False, 
    False, 
    True
)'
2024-11-18 01:53:27.872 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-18 01:53:27.879 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (6ms).
2024-11-18 01:53:27.884 +03:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2024-11-18 01:53:27.886 +03:00 [DBG] Opened connection to database 'main' on server 'E:\Asp\WebApi1\CityInfo.db'.
2024-11-18 01:53:27.900 +03:00 [DBG] Executing DbCommand [Parameters=[@__p_1='?' (DbType = Int32), @__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Name"
FROM "Cities" AS "c"
ORDER BY "c"."Name"
LIMIT @__p_1 OFFSET @__p_0
2024-11-18 01:53:27.914 +03:00 [INF] Executed DbCommand (26ms) [Parameters=[@__p_1='?' (DbType = Int32), @__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Name"
FROM "Cities" AS "c"
ORDER BY "c"."Name"
LIMIT @__p_1 OFFSET @__p_0
2024-11-18 01:53:27.966 +03:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-11-18 01:53:28.028 +03:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-11-18 01:53:28.030 +03:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-11-18 01:53:28.034 +03:00 [DBG] A data reader was disposed.
2024-11-18 01:53:28.035 +03:00 [DBG] Closing connection to database 'main' on server 'E:\Asp\WebApi1\CityInfo.db'.
2024-11-18 01:53:28.037 +03:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db'.
2024-11-18 01:53:28.093 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-18 01:53:28.101 +03:00 [DBG] No information found on request to perform content negotiation.
2024-11-18 01:53:28.102 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-18 01:53:28.104 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-18 01:53:28.108 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-18 01:53:28.112 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[WebApi1.Models.CityWithoutPointOfInterestDto, WebApi1, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-18 01:53:28.336 +03:00 [INF] Executed action WebApi1.Controllers.CitiesController.GetCities (WebApi1) in 3292.4242ms
2024-11-18 01:53:28.340 +03:00 [INF] Executed endpoint 'WebApi1.Controllers.CitiesController.GetCities (WebApi1)'
2024-11-18 01:53:28.342 +03:00 [DBG] Connection id "0HN87BAI65O2H" completed keep alive response.
2024-11-18 01:53:28.349 +03:00 [DBG] 'CityInfoContext' disposed.
2024-11-18 01:53:28.369 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7117/api/v1/cities - - - 200 254 application/json;+charset=utf-8 3747.7538ms
2024-11-18 01:53:31.465 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7117/api/v2/cities - -
2024-11-18 01:53:31.467 +03:00 [DBG] The request path  does not match the path filter
2024-11-18 01:53:31.470 +03:00 [DBG] 1 candidate(s) found for the request path '/api/v2/cities'
2024-11-18 01:53:31.474 +03:00 [DBG] Endpoint 'WebApi1.Controllers.CitiesController.GetCities (WebApi1)' with route pattern 'api/v{version:apiVersion}/cities' is valid for the request path '/api/v2/cities'
2024-11-18 01:53:31.478 +03:00 [DBG] Request matched endpoint 'WebApi1.Controllers.CitiesController.GetCities (WebApi1)'
2024-11-18 01:53:31.481 +03:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-18 01:53:31.487 +03:00 [INF] Executing endpoint 'WebApi1.Controllers.CitiesController.GetCities (WebApi1)'
2024-11-18 01:53:31.495 +03:00 [INF] Route matched with {action = "GetCities", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[WebApi1.Models.CityWithoutPointOfInterestDto]]] GetCities(System.String, System.String, Int32, Int32) on controller WebApi1.Controllers.CitiesController (WebApi1).
2024-11-18 01:53:31.499 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-18 01:53:31.505 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-18 01:53:31.513 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-18 01:53:31.517 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-18 01:53:31.518 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-18 01:53:31.525 +03:00 [DBG] Executing controller factory for controller WebApi1.Controllers.CitiesController (WebApi1)
2024-11-18 01:53:31.547 +03:00 [DBG] Executed controller factory for controller WebApi1.Controllers.CitiesController (WebApi1)
2024-11-18 01:53:31.550 +03:00 [DBG] Attempting to bind parameter 'name' of type 'System.String' ...
2024-11-18 01:53:31.551 +03:00 [DBG] Attempting to bind parameter 'name' of type 'System.String' using the name '' in request data ...
2024-11-18 01:53:31.553 +03:00 [DBG] Could not find a value in the request with name '' for binding parameter 'name' of type 'System.String'.
2024-11-18 01:53:31.558 +03:00 [DBG] Done attempting to bind parameter 'name' of type 'System.String'.
2024-11-18 01:53:31.560 +03:00 [DBG] Done attempting to bind parameter 'name' of type 'System.String'.
2024-11-18 01:53:31.563 +03:00 [DBG] Attempting to validate the bound parameter 'name' of type 'System.String' ...
2024-11-18 01:53:31.574 +03:00 [DBG] Done attempting to validate the bound parameter 'name' of type 'System.String'.
2024-11-18 01:53:31.579 +03:00 [DBG] Attempting to bind parameter 'searchQuery' of type 'System.String' ...
2024-11-18 01:53:31.581 +03:00 [DBG] Attempting to bind parameter 'searchQuery' of type 'System.String' using the name '' in request data ...
2024-11-18 01:53:31.585 +03:00 [DBG] Could not find a value in the request with name '' for binding parameter 'searchQuery' of type 'System.String'.
2024-11-18 01:53:31.592 +03:00 [DBG] Done attempting to bind parameter 'searchQuery' of type 'System.String'.
2024-11-18 01:53:31.596 +03:00 [DBG] Done attempting to bind parameter 'searchQuery' of type 'System.String'.
2024-11-18 01:53:31.600 +03:00 [DBG] Attempting to validate the bound parameter 'searchQuery' of type 'System.String' ...
2024-11-18 01:53:31.603 +03:00 [DBG] Done attempting to validate the bound parameter 'searchQuery' of type 'System.String'.
2024-11-18 01:53:31.608 +03:00 [DBG] Attempting to bind parameter 'pageNumber' of type 'System.Int32' ...
2024-11-18 01:53:31.615 +03:00 [DBG] Attempting to bind parameter 'pageNumber' of type 'System.Int32' using the name '' in request data ...
2024-11-18 01:53:31.617 +03:00 [DBG] Could not find a value in the request with name '' for binding parameter 'pageNumber' of type 'System.Int32'.
2024-11-18 01:53:31.620 +03:00 [DBG] Done attempting to bind parameter 'pageNumber' of type 'System.Int32'.
2024-11-18 01:53:31.625 +03:00 [DBG] Done attempting to bind parameter 'pageNumber' of type 'System.Int32'.
2024-11-18 01:53:31.628 +03:00 [DBG] Attempting to validate the bound parameter 'pageNumber' of type 'System.Int32' ...
2024-11-18 01:53:31.629 +03:00 [DBG] Done attempting to validate the bound parameter 'pageNumber' of type 'System.Int32'.
2024-11-18 01:53:31.631 +03:00 [DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' ...
2024-11-18 01:53:31.633 +03:00 [DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' using the name '' in request data ...
2024-11-18 01:53:31.635 +03:00 [DBG] Could not find a value in the request with name '' for binding parameter 'pageSize' of type 'System.Int32'.
2024-11-18 01:53:31.637 +03:00 [DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
2024-11-18 01:53:31.641 +03:00 [DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
2024-11-18 01:53:31.645 +03:00 [DBG] Attempting to validate the bound parameter 'pageSize' of type 'System.Int32' ...
2024-11-18 01:53:31.648 +03:00 [DBG] Done attempting to validate the bound parameter 'pageSize' of type 'System.Int32'.
2024-11-18 01:53:31.668 +03:00 [INF] Entity Framework Core 6.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.0' with options: None
2024-11-18 01:53:31.677 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-18 01:53:31.679 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2024-11-18 01:53:31.681 +03:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2024-11-18 01:53:31.682 +03:00 [DBG] Opened connection to database 'main' on server 'E:\Asp\WebApi1\CityInfo.db'.
2024-11-18 01:53:31.684 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "Cities" AS "c"
2024-11-18 01:53:31.687 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "Cities" AS "c"
2024-11-18 01:53:31.901 +03:00 [DBG] A data reader was disposed.
2024-11-18 01:53:31.903 +03:00 [DBG] Closing connection to database 'main' on server 'E:\Asp\WebApi1\CityInfo.db'.
2024-11-18 01:53:31.931 +03:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db'.
2024-11-18 01:53:31.949 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-18 01:53:31.952 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2024-11-18 01:53:31.959 +03:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2024-11-18 01:53:31.961 +03:00 [DBG] Opened connection to database 'main' on server 'E:\Asp\WebApi1\CityInfo.db'.
2024-11-18 01:53:31.964 +03:00 [DBG] Executing DbCommand [Parameters=[@__p_1='?' (DbType = Int32), @__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Name"
FROM "Cities" AS "c"
ORDER BY "c"."Name"
LIMIT @__p_1 OFFSET @__p_0
2024-11-18 01:53:31.976 +03:00 [INF] Executed DbCommand (12ms) [Parameters=[@__p_1='?' (DbType = Int32), @__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Name"
FROM "Cities" AS "c"
ORDER BY "c"."Name"
LIMIT @__p_1 OFFSET @__p_0
2024-11-18 01:53:31.981 +03:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-11-18 01:53:31.984 +03:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-11-18 01:53:31.987 +03:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-11-18 01:53:31.998 +03:00 [DBG] A data reader was disposed.
2024-11-18 01:53:32.001 +03:00 [DBG] Closing connection to database 'main' on server 'E:\Asp\WebApi1\CityInfo.db'.
2024-11-18 01:53:32.004 +03:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db'.
2024-11-18 01:53:32.011 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-18 01:53:32.016 +03:00 [DBG] No information found on request to perform content negotiation.
2024-11-18 01:53:32.018 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-18 01:53:32.019 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-18 01:53:32.024 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-18 01:53:32.027 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[WebApi1.Models.CityWithoutPointOfInterestDto, WebApi1, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-18 01:53:32.031 +03:00 [INF] Executed action WebApi1.Controllers.CitiesController.GetCities (WebApi1) in 506.1898ms
2024-11-18 01:53:32.043 +03:00 [INF] Executed endpoint 'WebApi1.Controllers.CitiesController.GetCities (WebApi1)'
2024-11-18 01:53:32.046 +03:00 [DBG] Connection id "0HN87BAI65O2H" completed keep alive response.
2024-11-18 01:53:32.049 +03:00 [DBG] 'CityInfoContext' disposed.
2024-11-18 01:53:32.061 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7117/api/v2/cities - - - 200 254 application/json;+charset=utf-8 596.6941ms
2024-11-18 01:55:43.506 +03:00 [DBG] Connection id "0HN87BAI65O2H" disconnecting.
2024-11-18 01:55:43.509 +03:00 [DBG] Connection id "0HN87BAI65O2H" stopped.
2024-11-18 01:55:43.511 +03:00 [DBG] Connection id "0HN87BAI65O2H" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-11-18 02:38:34.540 +03:00 [DBG] Connection id "0HN87BAI65O2I" accepted.
2024-11-18 02:38:34.550 +03:00 [DBG] Connection id "0HN87BAI65O2I" started.
2024-11-18 02:38:34.550 +03:00 [DBG] Connection id "0HN87BAI65O2J" accepted.
2024-11-18 02:38:34.589 +03:00 [DBG] Connection id "0HN87BAI65O2J" started.
2024-11-18 02:38:34.599 +03:00 [DBG] Connection 0HN87BAI65O2I established using the following protocol: "Tls12"
2024-11-18 02:38:34.729 +03:00 [DBG] Connection 0HN87BAI65O2J established using the following protocol: "Tls12"
2024-11-18 02:38:35.199 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7117/swagger/index.html - -
2024-11-18 02:38:35.652 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7117/swagger/index.html - - - 200 - text/html;charset=utf-8 453.4939ms
2024-11-18 02:38:38.499 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7117/swagger/v1/swagger.json - -
2024-11-18 02:38:39.070 +03:00 [ERR] An unhandled exception has occurred while executing the request.
Swashbuckle.AspNetCore.SwaggerGen.SwaggerGeneratorException: Ambiguous HTTP method for action - WebApi1.Controllers.CitiesController.GetCities (WebApi1). Actions require an explicit HttpMethod binding for Swagger/OpenAPI 3.0
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GenerateOperations(IEnumerable`1 apiDescriptions, SchemaRepository schemaRepository)
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GeneratePaths(IEnumerable`1 apiDescriptions, SchemaRepository schemaRepository)
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GetSwaggerDocumentWithoutFilters(String documentName, String host, String basePath)
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GetSwaggerAsync(String documentName, String host, String basePath)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2024-11-18 02:38:40.055 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7117/swagger/v1/swagger.json - - - 500 - text/plain;+charset=utf-8 1555.5696ms
2024-11-18 02:38:45.167 +03:00 [DBG] Connection id "0HN87BAI65O2J" received FIN.
2024-11-18 02:38:45.167 +03:00 [DBG] Connection id "0HN87BAI65O2I" received FIN.
2024-11-18 02:38:45.173 +03:00 [DBG] Connection id "0HN87BAI65O2J" is closed. The last processed stream ID was 0.
2024-11-18 02:38:45.175 +03:00 [DBG] Connection id "0HN87BAI65O2I" is closed. The last processed stream ID was 3.
2024-11-18 02:38:45.177 +03:00 [DBG] Connection id "0HN87BAI65O2J" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-11-18 02:38:45.180 +03:00 [DBG] Connection id "0HN87BAI65O2I" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-11-18 02:38:45.206 +03:00 [DBG] Connection id "0HN87BAI65O2I" stopped.
2024-11-18 02:38:45.206 +03:00 [DBG] Connection id "0HN87BAI65O2J" stopped.
2024-11-18 02:39:36.371 +03:00 [DBG] Connection id "0HN87BAI65O2K" accepted.
2024-11-18 02:39:36.379 +03:00 [DBG] Connection id "0HN87BAI65O2K" started.
2024-11-18 02:39:36.388 +03:00 [DBG] Connection 0HN87BAI65O2K established using the following protocol: "Tls12"
2024-11-18 02:39:36.391 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7117/swagger/index.html - -
2024-11-18 02:39:36.397 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7117/swagger/index.html - - - 200 - text/html;charset=utf-8 5.7187ms
2024-11-18 02:39:37.134 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7117/swagger/v1/swagger.json - -
2024-11-18 02:39:37.152 +03:00 [ERR] An unhandled exception has occurred while executing the request.
Swashbuckle.AspNetCore.SwaggerGen.SwaggerGeneratorException: Ambiguous HTTP method for action - WebApi1.Controllers.CitiesController.GetCities (WebApi1). Actions require an explicit HttpMethod binding for Swagger/OpenAPI 3.0
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GenerateOperations(IEnumerable`1 apiDescriptions, SchemaRepository schemaRepository)
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GeneratePaths(IEnumerable`1 apiDescriptions, SchemaRepository schemaRepository)
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GetSwaggerDocumentWithoutFilters(String documentName, String host, String basePath)
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GetSwaggerAsync(String documentName, String host, String basePath)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2024-11-18 02:39:37.523 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7117/swagger/v1/swagger.json - - - 500 - text/plain;+charset=utf-8 389.8081ms
2024-11-18 02:40:21.466 +03:00 [INF] Application is shutting down...
2024-11-18 02:40:21.469 +03:00 [DBG] Hosting stopping
2024-11-18 02:40:21.479 +03:00 [DBG] Connection id "0HN87BAI65O2K" is closing.
2024-11-18 02:40:21.482 +03:00 [DBG] Connection id "0HN87BAI65O2K" is closed. The last processed stream ID was 3.
2024-11-18 02:40:21.485 +03:00 [DBG] Connection id "0HN87BAI65O2K" received FIN.
2024-11-18 02:40:21.485 +03:00 [DBG] Connection id "0HN87BAI65O2K" stopped.
2024-11-18 02:40:21.489 +03:00 [DBG] Connection id "0HN87BAI65O2K" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-11-18 02:40:21.499 +03:00 [DBG] Hosting stopped
2024-11-18 02:40:39.051 +03:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.Versioning.ApiVersionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2024-11-18 02:40:39.476 +03:00 [DBG] Hosting starting
2024-11-18 02:40:39.518 +03:00 [INF] User profile is available. Using 'C:\Users\DaRK1AnGE1-\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-11-18 02:40:39.532 +03:00 [DBG] Reading data from file 'C:\Users\DaRK1AnGE1-\AppData\Local\ASP.NET\DataProtection-Keys\key-7aaf1ab6-3338-4bbe-824d-412c9ce49ea3.xml'.
2024-11-18 02:40:39.563 +03:00 [DBG] Found key {7aaf1ab6-3338-4bbe-824d-412c9ce49ea3}.
2024-11-18 02:40:39.596 +03:00 [DBG] Considering key {7aaf1ab6-3338-4bbe-824d-412c9ce49ea3} with expiration date 2025-02-15 20:08:59Z as default key.
2024-11-18 02:40:39.614 +03:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-11-18 02:40:39.635 +03:00 [DBG] Decrypting secret element using Windows DPAPI.
2024-11-18 02:40:39.645 +03:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-11-18 02:40:39.660 +03:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2024-11-18 02:40:39.677 +03:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2024-11-18 02:40:39.690 +03:00 [DBG] Using key {7aaf1ab6-3338-4bbe-824d-412c9ce49ea3} as the default key.
2024-11-18 02:40:39.698 +03:00 [DBG] Key ring with default key {7aaf1ab6-3338-4bbe-824d-412c9ce49ea3} was loaded during application startup.
2024-11-18 02:40:40.086 +03:00 [DBG] Using development certificate: CN=localhost (Thumbprint: 9E758B43FC1DB07235D03E669781821F9B436A79)
2024-11-18 02:40:40.189 +03:00 [INF] Now listening on: https://localhost:7117
2024-11-18 02:40:40.222 +03:00 [INF] Now listening on: http://localhost:5211
2024-11-18 02:40:40.240 +03:00 [DBG] Loaded hosting startup assembly WebApi1
2024-11-18 02:40:40.249 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-11-18 02:40:40.254 +03:00 [INF] Hosting environment: Development
2024-11-18 02:40:40.260 +03:00 [INF] Content root path: E:\Asp\WebApi1\
2024-11-18 02:40:40.264 +03:00 [DBG] Hosting started
2024-11-18 02:40:40.396 +03:00 [DBG] Connection id "0HN87C4VDCCJL" accepted.
2024-11-18 02:40:40.530 +03:00 [DBG] Connection id "0HN87C4VDCCJL" started.
2024-11-18 02:40:40.531 +03:00 [DBG] Connection id "0HN87C4VDCCJM" accepted.
2024-11-18 02:40:40.839 +03:00 [DBG] Connection id "0HN87C4VDCCJM" started.
2024-11-18 02:40:40.960 +03:00 [DBG] Connection 0HN87C4VDCCJM established using the following protocol: "Tls12"
2024-11-18 02:40:40.963 +03:00 [DBG] Connection 0HN87C4VDCCJL established using the following protocol: "Tls12"
2024-11-18 02:40:41.063 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7117/swagger/index.html - -
2024-11-18 02:40:41.069 +03:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2024-11-18 02:40:41.280 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7117/swagger/index.html - - - 200 - text/html;charset=utf-8 227.2349ms
2024-11-18 02:40:42.373 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7117/swagger/v1/swagger.json - -
2024-11-18 02:40:42.798 +03:00 [ERR] An unhandled exception has occurred while executing the request.
Swashbuckle.AspNetCore.SwaggerGen.SwaggerGeneratorException: Ambiguous HTTP method for action - WebApi1.Controllers.CitiesController.GetCities (WebApi1). Actions require an explicit HttpMethod binding for Swagger/OpenAPI 3.0
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GenerateOperations(IEnumerable`1 apiDescriptions, SchemaRepository schemaRepository)
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GeneratePaths(IEnumerable`1 apiDescriptions, SchemaRepository schemaRepository)
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GetSwaggerDocumentWithoutFilters(String documentName, String host, String basePath)
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GetSwaggerAsync(String documentName, String host, String basePath)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2024-11-18 02:40:42.914 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7117/swagger/v1/swagger.json - - - 500 - text/plain;+charset=utf-8 541.0986ms
2024-11-18 02:42:00.308 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7117/swagger/index.html - -
2024-11-18 02:42:00.313 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7117/swagger/index.html - - - 200 - text/html;charset=utf-8 4.7592ms
2024-11-18 02:42:01.057 +03:00 [DBG] Connection id "0HN87C4VDCCJL" received FIN.
2024-11-18 02:42:01.071 +03:00 [DBG] Connection id "0HN87C4VDCCJL" is closed. The last processed stream ID was 0.
2024-11-18 02:42:01.079 +03:00 [DBG] Connection id "0HN87C4VDCCJL" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-11-18 02:42:01.104 +03:00 [DBG] Connection id "0HN87C4VDCCJL" stopped.
2024-11-18 02:42:01.222 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7117/swagger/v1/swagger.json - -
2024-11-18 02:42:01.231 +03:00 [ERR] An unhandled exception has occurred while executing the request.
Swashbuckle.AspNetCore.SwaggerGen.SwaggerGeneratorException: Ambiguous HTTP method for action - WebApi1.Controllers.CitiesController.GetCities (WebApi1). Actions require an explicit HttpMethod binding for Swagger/OpenAPI 3.0
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GenerateOperations(IEnumerable`1 apiDescriptions, SchemaRepository schemaRepository)
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GeneratePaths(IEnumerable`1 apiDescriptions, SchemaRepository schemaRepository)
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GetSwaggerDocumentWithoutFilters(String documentName, String host, String basePath)
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GetSwaggerAsync(String documentName, String host, String basePath)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2024-11-18 02:42:01.641 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7117/swagger/v1/swagger.json - - - 500 - text/plain;+charset=utf-8 418.6648ms
2024-11-18 02:43:58.885 +03:00 [DBG] Connection id "0HN87C4VDCCJN" accepted.
2024-11-18 02:43:58.938 +03:00 [DBG] Connection id "0HN87C4VDCCJN" started.
2024-11-18 02:43:58.938 +03:00 [DBG] Connection id "0HN87C4VDCCJO" accepted.
2024-11-18 02:43:59.464 +03:00 [DBG] Connection id "0HN87C4VDCCJO" started.
2024-11-18 02:43:59.545 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5211/ - -
2024-11-18 02:43:59.564 +03:00 [DBG] The request path  does not match the path filter
2024-11-18 02:43:59.614 +03:00 [DBG] Https port '7117' discovered from server endpoints.
2024-11-18 02:43:59.625 +03:00 [DBG] Redirecting to 'https://localhost:7117/'.
2024-11-18 02:43:59.642 +03:00 [DBG] Connection id "0HN87C4VDCCJO" completed keep alive response.
2024-11-18 02:43:59.655 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5211/ - - - 307 0 - 110.4076ms
2024-11-18 02:43:59.679 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7117/ - -
2024-11-18 02:43:59.690 +03:00 [DBG] The request path  does not match the path filter
2024-11-18 02:43:59.803 +03:00 [DBG] No candidates found for the request path '/'
2024-11-18 02:43:59.826 +03:00 [DBG] Request did not match any endpoints
2024-11-18 02:43:59.991 +03:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-18 02:43:59.999 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7117/ - - - 404 0 - 320.2672ms
2024-11-18 02:45:01.360 +03:00 [DBG] Connection id "0HN87C4VDCCJN" received FIN.
2024-11-18 02:45:01.363 +03:00 [DBG] Connection id "0HN87C4VDCCJN" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-11-18 02:45:01.370 +03:00 [DBG] Connection id "0HN87C4VDCCJN" disconnecting.
2024-11-18 02:45:01.383 +03:00 [DBG] Connection id "0HN87C4VDCCJN" stopped.
2024-11-18 02:46:10.832 +03:00 [DBG] Connection id "0HN87C4VDCCJO" disconnecting.
2024-11-18 02:46:10.834 +03:00 [DBG] Connection id "0HN87C4VDCCJO" stopped.
2024-11-18 02:46:10.836 +03:00 [DBG] Connection id "0HN87C4VDCCJO" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-11-18 02:46:11.837 +03:00 [DBG] Connection id "0HN87C4VDCCJM" is closing.
2024-11-18 02:46:11.889 +03:00 [DBG] Connection id "0HN87C4VDCCJM" is closed. The last processed stream ID was 9.
2024-11-18 02:46:11.905 +03:00 [DBG] Connection id "0HN87C4VDCCJM" stopped.
2024-11-18 02:46:11.905 +03:00 [DBG] Connection id "0HN87C4VDCCJM" received FIN.
2024-11-18 02:46:11.919 +03:00 [DBG] Connection id "0HN87C4VDCCJM" sending FIN because: "The Socket transport's send loop completed gracefully."
